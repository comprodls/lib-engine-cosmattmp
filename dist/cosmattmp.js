/* Javascript plotting library for jQuery, version 0.8.3.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

*/

/* Plugin for jQuery for working with colors.
 *
 * Version 1.1.
 *
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */

/* Flot plugin for automatically redrawing plots as the placeholder resizes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

It works by listening for changes on the placeholder div (through the jQuery
resize event plugin) - if the size changes, it will redraw the plot.

There are no options. If you need to disable the plugin for some plots, you
can just fix the size of their placeholders.

*/

/* Inline dependency:
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

/*
Axis Labels Plugin for flot.
http://github.com/markrcote/flot-axislabels

Original code is Copyright (c) 2010 Xuan Luo.
Original code was released under the GPLv3 license by Xuan Luo, September 2010.
Original code was rereleased under the MIT license by Xuan Luo, April 2012.

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

define("css",[],function(){if("undefined"==typeof window)return{load:function(n,r,load){load()}};var head=document.getElementsByTagName("head")[0],engine=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,useImportLoad=!1,useOnload=!0;engine[1]||engine[7]?useImportLoad=parseInt(engine[1])<6||parseInt(engine[7])<=9:engine[2]||engine[8]?useOnload=!1:engine[4]&&(useImportLoad=parseInt(engine[4])<18);var cssAPI={};cssAPI.pluginBuilder="./css-builder";var curStyle,curSheet,ieCurCallback,createStyle=function(){curStyle=document.createElement("style"),head.appendChild(curStyle),curSheet=curStyle.styleSheet||curStyle.sheet},ieCnt=0,ieLoads=[],createIeLoad=function(url){curSheet.addImport(url),curStyle.onload=function(){processIeLoad()},31==++ieCnt&&(createStyle(),ieCnt=0)},processIeLoad=function(){ieCurCallback();var nextLoad=ieLoads.shift();if(!nextLoad)return void(ieCurCallback=null);ieCurCallback=nextLoad[1],createIeLoad(nextLoad[0])},importLoad=function(url,callback){if(curSheet&&curSheet.addImport||createStyle(),curSheet&&curSheet.addImport)ieCurCallback?ieLoads.push([url,callback]):(createIeLoad(url),ieCurCallback=callback);else{curStyle.textContent='@import "'+url+'";';var loadInterval=setInterval(function(){try{curStyle.sheet.cssRules,clearInterval(loadInterval),callback()}catch(e){}},10)}},linkLoad=function(url,callback){var link=document.createElement("link");if(link.type="text/css",link.rel="stylesheet",useOnload)link.onload=function(){link.onload=function(){},setTimeout(callback,7)};else var loadInterval=setInterval(function(){for(var i=0;i<document.styleSheets.length;i++){if(document.styleSheets[i].href==link.href)return clearInterval(loadInterval),callback()}},10);link.href=url,head.appendChild(link)};return cssAPI.normalize=function(name,normalize){return".css"==name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),normalize(name)},cssAPI.load=function(cssId,req,load,config){(useImportLoad?importLoad:linkLoad)(req.toUrl(cssId+".css"),load)},cssAPI}),define("css!../css/cosmattmp",[],function(){}),function($){$.color={},$.color.make=function(r,g,b,a){var o={};return o.r=r||0,o.g=g||0,o.b=b||0,o.a=null!=a?a:1,o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()},o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}return o.r=clamp(0,parseInt(o.r),255),o.g=clamp(0,parseInt(o.g),255),o.b=clamp(0,parseInt(o.b),255),o.a=clamp(0,o.a,1),o},o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)},o.normalize()},$.color.extract=function(elem,css){var c;do{if(""!=(c=elem.css(css).toLowerCase())&&"transparent"!=c)break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));return"rgba(0, 0, 0, 0)"==c&&(c="transparent"),$.color.parse(c)},$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]));if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]),parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();return"transparent"==name?m(255,255,255,0):(res=lookupColors[name]||[0,0,0],m(res[0],res[1],res[2]))};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function($){function Canvas(cls,container){var element=container.children("."+cls)[0];if(null==element&&(element=document.createElement("canvas"),element.className=cls,$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container),!element.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");element=window.G_vmlCanvasManager.initElement(element)}this.element=element;var context=this.context=element.getContext("2d"),devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio,this.resize(container.width(),container.height()),this.textContainer=null,this.text={},this._textCache={}}function Plot(placeholder,data_,options_,plugins){function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i)hook[i].apply(this,args)}function setData(d){series=parseData(d),fillInSeriesOptions(),processData()}function parseData(d){for(var res=[],i=0;i<d.length;++i){var s=$.extend(!0,{},options.series);null!=d[i].data?(s.data=d[i].data,delete d[i].data,$.extend(!0,s,d[i]),d[i].data=s.data):s.data=d[i],res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var i,axis,res={};for(i=0;i<xaxes.length;++i)(axis=xaxes[i])&&axis.used&&(res["x"+axis.n]=axis.c2p(pos.left));for(i=0;i<yaxes.length;++i)(axis=yaxes[i])&&axis.used&&(res["y"+axis.n]=axis.c2p(pos.top));return void 0!==res.x1&&(res.x=res.x1),void 0!==res.y1&&(res.y=res.y1),res}function axisToCanvasCoords(pos){var i,axis,key,res={};for(i=0;i<xaxes.length;++i)if((axis=xaxes[i])&&axis.used&&(key="x"+axis.n,null==pos[key]&&1==axis.n&&(key="x"),null!=pos[key])){res.left=axis.p2c(pos[key]);break}for(i=0;i<yaxes.length;++i)if((axis=yaxes[i])&&axis.used&&(key="y"+axis.n,null==pos[key]&&1==axis.n&&(key="y"),null!=pos[key])){res.top=axis.p2c(pos[key]);break}return res}function getOrCreateAxis(axes,number){return axes[number-1]||(axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(!0,{},axes==xaxes?options.xaxis:options.yaxis)}),axes[number-1]}function fillInSeriesOptions(){var i,neededColors=series.length,maxIndex=-1;for(i=0;i<series.length;++i){var sc=series[i].color;null!=sc&&(neededColors--,"number"==typeof sc&&sc>maxIndex&&(maxIndex=sc))}neededColors<=maxIndex&&(neededColors=maxIndex+1);var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++)c=$.color.parse(colorPool[i%colorPoolSize]||"#666"),i%colorPoolSize==0&&i&&(variation=variation>=0?variation<.5?-variation-.2:0:-variation),colors[i]=c.scale("rgb",1+variation);var s,colori=0;for(i=0;i<series.length;++i){if(s=series[i],null==s.color?(s.color=colors[colori].toString(),++colori):"number"==typeof s.color&&(s.color=colors[s.color].toString()),null==s.lines.show){var v,show=!0;for(v in s)if(s[v]&&s[v].show){show=!1;break}show&&(s.lines.show=!0)}null==s.lines.zero&&(s.lines.zero=!!s.lines.fill),s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x")),s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){function updateAxis(axis,min,max){min<axis.datamin&&min!=-fakeInfinity&&(axis.datamin=min),max>axis.datamax&&max!=fakeInfinity&&(axis.datamax=max)}var i,j,k,m,s,points,ps,val,f,p,data,format,topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE;for($.each(allAxes(),function(_,axis){axis.datamin=topSentry,axis.datamax=bottomSentry,axis.used=!1}),i=0;i<series.length;++i)s=series[i],s.datapoints={points:[]},executeHooks(hooks.processRawData,[s,s.data,s.datapoints]);for(i=0;i<series.length;++i){if(s=series[i],data=s.data,!(format=s.datapoints.format)){if(format=[],format.push({x:!0,number:!0,required:!0}),format.push({y:!0,number:!0,required:!0}),s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:autoscale}),s.bars.horizontal&&(delete format[format.length-1].y,format[format.length-1].x=!0)}s.datapoints.format=format}if(null==s.datapoints.pointsize){s.datapoints.pointsize=format.length,ps=s.datapoints.pointsize,points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;for(s.xaxis.used=s.yaxis.used=!0,j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=null==p;if(!nullify)for(m=0;m<ps;++m)val=p[m],f=format[m],f&&(f.number&&null!=val&&(val=+val,isNaN(val)?val=null:val==1/0?val=fakeInfinity:val==-1/0&&(val=-fakeInfinity)),null==val&&(f.required&&(nullify=!0),null!=f.defaultValue&&(val=f.defaultValue))),points[k+m]=val;if(nullify)for(m=0;m<ps;++m)val=points[k+m],null!=val&&(f=format[m],!1!==f.autoscale&&(f.x&&updateAxis(s.xaxis,val,val),f.y&&updateAxis(s.yaxis,val,val))),points[k+m]=null;else if(insertSteps&&k>0&&null!=points[k-ps]&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m)points[k+ps+m]=points[k+m];points[k+1]=points[k-ps+1],k+=ps}}}}for(i=0;i<series.length;++i)s=series[i],executeHooks(hooks.processDatapoints,[s,s.datapoints]);for(i=0;i<series.length;++i){s=series[i],points=s.datapoints.points,ps=s.datapoints.pointsize,format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps)if(null!=points[j])for(m=0;m<ps;++m)val=points[j+m],(f=format[m])&&!1!==f.autoscale&&val!=fakeInfinity&&val!=-fakeInfinity&&(f.x&&(val<xmin&&(xmin=val),val>xmax&&(xmax=val)),f.y&&(val<ymin&&(ymin=val),val>ymax&&(ymax=val)));if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}s.bars.horizontal?(ymin+=delta,ymax+=delta+s.bars.barWidth):(xmin+=delta,xmax+=delta+s.bars.barWidth)}updateAxis(s.xaxis,xmin,xmax),updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){axis.datamin==topSentry&&(axis.datamin=null),axis.datamax==bottomSentry&&(axis.datamax=null)})}function shutdown(){redrawTimeout&&clearTimeout(redrawTimeout),eventHolder.unbind("mousemove",onMouseMove),eventHolder.unbind("mouseleave",onMouseLeave),eventHolder.unbind("click",onClick),executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;"x"==axis.direction?(s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min)),m=Math.min(t(axis.max),t(axis.min))):(s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min)),s=-s,m=Math.max(t(axis.max),t(axis.min))),axis.p2c=t==identity?function(p){return(p-m)*s}:function(p){return(t(p)-m)*s},axis.c2p=it?function(c){return it(m+c/s)}:function(c){return m+c/s}}function measureTickLabels(axis){for(var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||("x"==axis.direction?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel",i=0;i<ticks.length;++i){var t=ticks[i];if(t.label){var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width),labelHeight=Math.max(labelHeight,info.height)}}axis.labelWidth=opts.labelWidth||labelWidth,axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis="x"===axis.direction,tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=!0,outermost=!0,first=!0,found=!1;$.each(isXAxis?xaxes:yaxes,function(i,a){a&&(a.show||a.reserveSpace)&&(a===axis?found=!0:a.options.position===pos&&(found?outermost=!1:innermost=!1),found||(first=!1))}),outermost&&(axisMargin=0),null==tickLength&&(tickLength=first?"full":5),isNaN(+tickLength)||(padding+=+tickLength),isXAxis?(lh+=padding,"bottom"==pos?(plotOffset.bottom+=lh+axisMargin,axis.box={top:surface.height-plotOffset.bottom,height:lh}):(axis.box={top:plotOffset.top+axisMargin,height:lh},plotOffset.top+=lh+axisMargin)):(lw+=padding,"left"==pos?(axis.box={left:plotOffset.left+axisMargin,width:lw},plotOffset.left+=lw+axisMargin):(plotOffset.right+=lw+axisMargin,axis.box={left:surface.width-plotOffset.right,width:lw})),axis.position=pos,axis.tickLength=tickLength,axis.box.padding=padding,axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){"x"==axis.direction?(axis.box.left=plotOffset.left-axis.labelWidth/2,axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth):(axis.box.top=plotOffset.top-axis.labelHeight/2,axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight)}function adjustLayoutForThingsStickingOut(){var i,minMargin=options.grid.minBorderMargin;if(null==minMargin)for(minMargin=0,i=0;i<series.length;++i)minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2));var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){axis.reserveSpace&&axis.ticks&&axis.ticks.length&&("x"===axis.direction?(margins.left=Math.max(margins.left,axis.labelWidth/2),margins.right=Math.max(margins.right,axis.labelWidth/2)):(margins.bottom=Math.max(margins.bottom,axis.labelHeight/2),margins.top=Math.max(margins.top,axis.labelHeight/2)))}),plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left)),plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right)),plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top)),plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]="number"==typeof margin?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset)"object"==typeof options.grid.borderWidth?plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0:plotOffset[a]+=showGrid?options.grid.borderWidth:0;if($.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=null==axisOpts.show?axis.used:axisOpts.show,axis.reserveSpace=null==axisOpts.reserveSpace?axis.show:axisOpts.reserveSpace,setRange(axis)}),showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});for($.each(allocatedAxes,function(_,axis){setupTickGeneration(axis),setTicks(axis),snapRangeToTicks(axis,axis.ticks),measureTickLabels(axis)}),i=allocatedAxes.length-1;i>=0;--i)allocateAxisBoxFirstPhase(allocatedAxes[i]);adjustLayoutForThingsStickingOut(),$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right,plotHeight=surface.height-plotOffset.bottom-plotOffset.top,$.each(axes,function(_,axis){setTransformationHelpers(axis)}),showGrid&&drawAxisLabels(),insertLegend()}function setRange(axis){var opts=axis.options,min=+(null!=opts.min?opts.min:axis.datamin),max=+(null!=opts.max?opts.max:axis.datamax),delta=max-min;if(0==delta){var widen=0==max?1:.01;null==opts.min&&(min-=widen),null!=opts.max&&null==opts.min||(max+=widen)}else{var margin=opts.autoscaleMargin;null!=margin&&(null==opts.min&&(min-=delta*margin)<0&&null!=axis.datamin&&axis.datamin>=0&&(min=0),null==opts.max&&(max+=delta*margin)>0&&null!=axis.datamax&&axis.datamax<=0&&(max=0))}axis.min=min,axis.max=max}function setupTickGeneration(axis){var noTicks,opts=axis.options;noTicks="number"==typeof opts.ticks&&opts.ticks>0?opts.ticks:.3*Math.sqrt("x"==axis.direction?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;null!=maxDec&&dec>maxDec&&(dec=maxDec);var size,magn=Math.pow(10,-dec),norm=delta/magn;if(norm<1.5?size=1:norm<3?(size=2,norm>2.25&&(null==maxDec||dec+1<=maxDec)&&(size=2.5,++dec)):size=norm<7.5?5:10,size*=magn,null!=opts.minTickSize&&size<opts.minTickSize&&(size=opts.minTickSize),axis.delta=delta,axis.tickDecimals=Math.max(0,null!=maxDec?maxDec:dec),axis.tickSize=opts.tickSize||size,"time"==opts.mode&&!axis.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(axis.tickGenerator||(axis.tickGenerator=function(axis){var prev,ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN;do{prev=v,v=start+i*axis.tickSize,ticks.push(v),++i}while(v<axis.max&&v!=prev);return ticks},axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1,formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf("."),precision=-1==decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted}),$.isFunction(opts.tickFormatter)&&(axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)}),null!=opts.alignTicksWithAxis){var otherAxis=("x"==axis.direction?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0&&(null==opts.min&&(axis.min=Math.min(axis.min,niceTicks[0])),null==opts.max&&niceTicks.length>1&&(axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]))),axis.tickGenerator=function(axis){var v,i,ticks=[];for(i=0;i<otherAxis.ticks.length;++i)v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min),v=axis.min+v*(axis.max-axis.min),ticks.push(v);return ticks},!axis.mode&&null==opts.tickDecimals){var extraDec=Math.max(0,1-Math.floor(Math.log(axis.delta)/Math.LN10)),ts=axis.tickGenerator(axis);ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))||(axis.tickDecimals=extraDec)}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];null==oticks||"number"==typeof oticks&&oticks>0?ticks=axis.tickGenerator(axis):oticks&&(ticks=$.isFunction(oticks)?oticks(axis):oticks);var i,v;for(axis.ticks=[],i=0;i<ticks.length;++i){var label=null,t=ticks[i];"object"==typeof t?(v=+t[0],t.length>1&&(label=t[1])):v=+t,null==label&&(label=axis.tickFormatter(v,axis)),isNaN(v)||axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){axis.options.autoscaleMargin&&ticks.length>0&&(null==axis.options.min&&(axis.min=Math.min(axis.min,ticks[0].v)),null==axis.options.max&&ticks.length>1&&(axis.max=Math.max(axis.max,ticks[ticks.length-1].v)))}function draw(){surface.clear(),executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;grid.show&&grid.backgroundColor&&drawBackground(),grid.show&&!grid.aboveData&&drawGrid();for(var i=0;i<series.length;++i)executeHooks(hooks.drawSeries,[ctx,series[i]]),drawSeries(series[i]);executeHooks(hooks.draw,[ctx]),grid.show&&grid.aboveData&&drawGrid(),surface.render(),triggerRedrawOverlay()}function extractRange(ranges,coord){for(var axis,from,to,key,axes=allAxes(),i=0;i<axes.length;++i)if(axis=axes[i],axis.direction==coord&&(key=coord+axis.n+"axis",ranges[key]||1!=axis.n||(key=coord+"axis"),ranges[key])){from=ranges[key].from,to=ranges[key].to;break}if(ranges[key]||(axis="x"==coord?xaxes[0]:yaxes[0],from=ranges[coord+"1"],to=ranges[coord+"2"]),null!=from&&null!=to&&from>to){var tmp=from;from=to,to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)"),ctx.fillRect(0,0,plotWidth,plotHeight),ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings)for($.isFunction(markings)&&(axes=plot.getAxes(),axes.xmin=axes.xaxis.min,axes.xmax=axes.xaxis.max,axes.ymin=axes.yaxis.min,axes.ymax=axes.yaxis.max,markings=markings(axes)),i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(null==xrange.from&&(xrange.from=xrange.axis.min),null==xrange.to&&(xrange.to=xrange.axis.max),null==yrange.from&&(yrange.from=yrange.axis.min),null==yrange.to&&(yrange.to=yrange.axis.max),!(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)){xrange.from=Math.max(xrange.from,xrange.axis.min),xrange.to=Math.min(xrange.to,xrange.axis.max),yrange.from=Math.max(yrange.from,yrange.axis.min),yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(!xequal||!yequal)if(xrange.from=Math.floor(xrange.axis.p2c(xrange.from)),xrange.to=Math.floor(xrange.axis.p2c(xrange.to)),yrange.from=Math.floor(yrange.axis.p2c(yrange.from)),yrange.to=Math.floor(yrange.axis.p2c(yrange.to)),xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath(),ctx.strokeStyle=m.color||options.grid.markingsColor,ctx.lineWidth=lineWidth,xequal?(ctx.moveTo(xrange.to+subPixel,yrange.from),ctx.lineTo(xrange.to+subPixel,yrange.to)):(ctx.moveTo(xrange.from,yrange.to+subPixel),ctx.lineTo(xrange.to,yrange.to+subPixel)),ctx.stroke()}else ctx.fillStyle=m.color||options.grid.markingsColor,ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}axes=allAxes(),bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var x,y,xoff,yoff,axis=axes[j],box=axis.box,t=axis.tickLength;if(axis.show&&0!=axis.ticks.length){for(ctx.lineWidth=1,"x"==axis.direction?(x=0,y="full"==t?"top"==axis.position?0:plotHeight:box.top-plotOffset.top+("top"==axis.position?box.height:0)):(y=0,x="full"==t?"left"==axis.position?0:plotWidth:box.left-plotOffset.left+("left"==axis.position?box.width:0)),axis.innermost||(ctx.strokeStyle=axis.options.color,ctx.beginPath(),xoff=yoff=0,"x"==axis.direction?xoff=plotWidth+1:yoff=plotHeight+1,1==ctx.lineWidth&&("x"==axis.direction?y=Math.floor(y)+.5:x=Math.floor(x)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff),ctx.stroke()),ctx.strokeStyle=axis.options.tickColor,ctx.beginPath(),i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0,isNaN(v)||v<axis.min||v>axis.max||"full"==t&&("object"==typeof bw&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max)||("x"==axis.direction?(x=axis.p2c(v),yoff="full"==t?-plotHeight:t,"top"==axis.position&&(yoff=-yoff)):(y=axis.p2c(v),xoff="full"==t?-plotWidth:t,"left"==axis.position&&(xoff=-xoff)),1==ctx.lineWidth&&("x"==axis.direction?x=Math.floor(x)+.5:y=Math.floor(y)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff))}ctx.stroke()}}bw&&(bc=options.grid.borderColor,"object"==typeof bw||"object"==typeof bc?("object"!=typeof bw&&(bw={top:bw,right:bw,bottom:bw,left:bw}),"object"!=typeof bc&&(bc={top:bc,right:bc,bottom:bc,left:bc}),bw.top>0&&(ctx.strokeStyle=bc.top,ctx.lineWidth=bw.top,ctx.beginPath(),ctx.moveTo(0-bw.left,0-bw.top/2),ctx.lineTo(plotWidth,0-bw.top/2),ctx.stroke()),bw.right>0&&(ctx.strokeStyle=bc.right,ctx.lineWidth=bw.right,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right/2,0-bw.top),ctx.lineTo(plotWidth+bw.right/2,plotHeight),ctx.stroke()),bw.bottom>0&&(ctx.strokeStyle=bc.bottom,ctx.lineWidth=bw.bottom,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2),ctx.lineTo(0,plotHeight+bw.bottom/2),ctx.stroke()),bw.left>0&&(ctx.strokeStyle=bc.left,ctx.lineWidth=bw.left,ctx.beginPath(),ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom),ctx.lineTo(0-bw.left/2,0),ctx.stroke())):(ctx.lineWidth=bw,ctx.strokeStyle=options.grid.borderColor,ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw))),ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var tick,x,y,halign,valign,box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel";if(surface.removeText(layer),axis.show&&0!=axis.ticks.length)for(var i=0;i<axis.ticks.length;++i)tick=axis.ticks[i],!tick.label||tick.v<axis.min||tick.v>axis.max||("x"==axis.direction?(halign="center",x=plotOffset.left+axis.p2c(tick.v),"bottom"==axis.position?y=box.top+box.padding:(y=box.top+box.height-box.padding,valign="bottom")):(valign="middle",y=plotOffset.top+axis.p2c(tick.v),"left"==axis.position?(x=box.left+box.width-box.padding,halign="right"):x=box.left+box.padding),surface.addText(layer,x,y,tick.label,font,null,null,halign,valign))})}function drawSeries(series){series.lines.show&&drawSeriesLines(series),series.bars.show&&drawSeriesBars(series),series.points.show&&drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(null!=x1&&null!=x2){if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}x1==prevx&&y1==prevy||ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset),prevx=x2,prevy=y2,ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}}ctx.stroke()}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw,ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis),ctx.lineWidth=sw/2,plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw,ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);fillStyle&&(ctx.fillStyle=fillStyle,function(datapoints,axisx,axisy){for(var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=!1,ypos=1,segmentStart=0,segmentEnd=0;!(ps>0&&i>points.length+ps);){i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&null!=x1&&null==x2){segmentEnd=i,ps=-ps,ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill(),areaOpen=!1,ps=-ps,ypos=1,i=segmentStart=segmentEnd+ps;continue}}if(null!=x1&&null!=x2){if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}if(areaOpen||(ctx.beginPath(),ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom)),areaOpen=!0),y1>=axisy.max&&y2>=axisy.max)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));else if(y1<=axisy.min&&y2<=axisy.min)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));else{var x1old=x1,x2old=x2;y1<=y2&&y1<axisy.min&&y2>=axisy.min?(x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min):y2<=y1&&y2<axisy.min&&y1>=axisy.min&&(x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min),y1>=y2&&y1>axisy.max&&y2<=axisy.max?(x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max):y2>=y1&&y2>axisy.max&&y1<=axisy.max&&(x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max),x1!=x1old&&ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),x2!=x2old&&(ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2)))}}}}(series.datapoints,series.xaxis,series.yaxis)),lw>0&&plotLine(series.datapoints,0,0,series.xaxis,series.yaxis),ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];null==x||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max||(ctx.beginPath(),x=axisx.p2c(x),y=axisy.p2c(y)+offset,"circle"==symbol?ctx.arc(x,y,radius,0,shadow?Math.PI:2*Math.PI,!1):symbol(ctx,x,y,radius,shadow),ctx.closePath(),fillStyle&&(ctx.fillStyle=fillStyle,ctx.fill()),ctx.stroke())}}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;if(0==lw&&(lw=1e-4),lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w,ctx.strokeStyle="rgba(0,0,0,0.1)",plotPoints(series.datapoints,radius,null,w+w/2,!0,series.xaxis,series.yaxis,symbol),ctx.strokeStyle="rgba(0,0,0,0.2)",plotPoints(series.datapoints,radius,null,w/2,!0,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw,ctx.strokeStyle=series.color,plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,!1,series.xaxis,series.yaxis,symbol),ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;horizontal?(drawBottom=drawRight=drawTop=!0,drawLeft=!1,left=b,right=x,top=y+barLeft,bottom=y+barRight,right<left&&(tmp=right,right=left,left=tmp,drawLeft=!0,drawRight=!1)):(drawLeft=drawRight=drawTop=!0,drawBottom=!1,left=x+barLeft,right=x+barRight,bottom=b,(top=y)<bottom&&(tmp=top,top=bottom,bottom=tmp,drawBottom=!0,drawTop=!1)),right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max||(left<axisx.min&&(left=axisx.min,drawLeft=!1),
right>axisx.max&&(right=axisx.max,drawRight=!1),bottom<axisy.min&&(bottom=axisy.min,drawBottom=!1),top>axisy.max&&(top=axisy.max,drawTop=!1),left=axisx.p2c(left),bottom=axisy.p2c(bottom),right=axisx.p2c(right),top=axisy.p2c(top),fillStyleCallback&&(c.fillStyle=fillStyleCallback(bottom,top),c.fillRect(left,top,right-left,bottom-top)),lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)&&(c.beginPath(),c.moveTo(left,bottom),drawLeft?c.lineTo(left,top):c.moveTo(left,top),drawTop?c.lineTo(right,top):c.moveTo(right,top),drawRight?c.lineTo(right,bottom):c.moveTo(right,bottom),drawBottom?c.lineTo(left,bottom):c.moveTo(left,bottom),c.stroke()))}function drawSeriesBars(series){ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineWidth=series.bars.lineWidth,ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;!function(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps)null!=points[i]&&drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis),ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);return c.a="number"==typeof fill?fill:.4,c.normalize(),c.toString()}function insertLegend(){if(null!=options.legend.container?$(options.legend.container).html(""):placeholder.find(".legend").remove(),options.legend.show){for(var s,label,fragments=[],entries=[],rowStarted=!1,lf=options.legend.labelFormatter,i=0;i<series.length;++i)s=series[i],s.label&&(label=lf?lf(s.label,s):s.label)&&entries.push({label:label,color:s.color});if(options.legend.sorted)if($.isFunction(options.legend.sorted))entries.sort(options.legend.sorted);else if("reverse"==options.legend.sorted)entries.reverse();else{var ascending="descending"!=options.legend.sorted;entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}for(var i=0;i<entries.length;++i){var entry=entries[i];i%options.legend.noColumns==0&&(rowStarted&&fragments.push("</tr>"),fragments.push("<tr>"),rowStarted=!0),fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+entry.label+"</td>")}if(rowStarted&&fragments.push("</tr>"),0!=fragments.length){var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(null!=options.legend.container)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;null==m[0]&&(m=[m,m]),"n"==p.charAt(0)?pos+="top:"+(m[1]+plotOffset.top)+"px;":"s"==p.charAt(0)&&(pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;"),"e"==p.charAt(1)?pos+="right:"+(m[0]+plotOffset.right)+"px;":"w"==p.charAt(1)&&(pos+="left:"+(m[0]+plotOffset.left)+"px;");var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(0!=options.legend.backgroundOpacity){var c=options.legend.backgroundColor;null==c&&(c=options.grid.backgroundColor,c=c&&"string"==typeof c?$.color.parse(c):$.color.extract(legend,"background-color"),c.a=1,c=c.toString());var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}}}function findNearbyItem(mouseX,mouseY,seriesFilter){var i,j,ps,maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null;for(i=series.length-1;i>=0;--i)if(seriesFilter(series[i])){var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;if(ps=s.datapoints.pointsize,axisx.options.inverseTransform&&(maxx=Number.MAX_VALUE),axisy.options.inverseTransform&&(maxy=Number.MAX_VALUE),s.lines.show||s.points.show)for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(null!=x&&!(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)){var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;dist<smallestDistance&&(smallestDistance=dist,item=[i,j/ps])}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}for(barRight=barLeft+s.bars.barWidth,j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];null!=x&&((series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))&&(item=[i,j/ps]))}}}return item?(i=item[0],j=item[1],ps=series[i].datapoints.pointsize,{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}):null}function onMouseMove(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return 0!=s.hoverable})}function onMouseLeave(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return!1})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return 0!=s.clickable})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX,pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item&&(item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10),item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)),options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]||unhighlight(h.series,h.point)}item&&highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(-1==t)return void drawOverlay();redrawTimeout||(redrawTimeout=setTimeout(drawOverlay,t))}function drawOverlay(){redrawTimeout=null,octx.save(),overlay.clear(),octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i)hi=highlights[i],hi.series.bars.show?drawBarHighlight(hi.series,hi.point):drawPointHighlight(hi.series,hi.point);octx.restore(),executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1==i?(highlights.push({series:s,point:point,auto:auto}),triggerRedrawOverlay()):auto||(highlights[i].auto=!1)}function unhighlight(s,point){if(null==s&&null==point)return highlights=[],void triggerRedrawOverlay();if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1!=i&&(highlights.splice(i,1),triggerRedrawOverlay())}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(!(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)){var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius,octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x),y=axisy.p2c(y),octx.beginPath(),"circle"==series.points.symbol?octx.arc(x,y,radius,0,2*Math.PI,!1):series.points.symbol(octx,x,y,radius,!1),octx.closePath(),octx.stroke()}}function drawBarHighlight(series,point){var barLeft,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth,octx.strokeStyle=highlightColor,drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if("string"==typeof spec)return spec;for(var gradient=ctx.createLinearGradient(0,top,0,bottom),i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if("string"!=typeof c){var co=$.color.parse(defaultColor);null!=c.brightness&&(co=co.scale("rgb",c.brightness)),null!=c.opacity&&(co.a*=c.opacity),c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData,plot.setupGrid=setupGrid,plot.draw=draw,plot.getPlaceholder=function(){return placeholder},plot.getCanvas=function(){return surface.element},plot.getPlotOffset=function(){return plotOffset},plot.width=function(){return plotWidth},plot.height=function(){return plotHeight},plot.offset=function(){var o=eventHolder.offset();return o.left+=plotOffset.left,o.top+=plotOffset.top,o},plot.getData=function(){return series},plot.getAxes=function(){var res={};return $.each(xaxes.concat(yaxes),function(_,axis){axis&&(res[axis.direction+(1!=axis.n?axis.n:"")+"axis"]=axis)}),res},plot.getXAxes=function(){return xaxes},plot.getYAxes=function(){return yaxes},plot.c2p=canvasToAxisCoords,plot.p2c=axisToCanvasCoords,plot.getOptions=function(){return options},plot.highlight=highlight,plot.unhighlight=unhighlight,plot.triggerRedrawOverlay=triggerRedrawOverlay,plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}},plot.shutdown=shutdown,plot.destroy=function(){shutdown(),placeholder.removeData("plot").empty(),series=[],options=null,surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],hooks=null,highlights=[],plot=null},plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height),overlay.resize(width,height)},plot.hooks=hooks,function(){for(var classes={Canvas:Canvas},i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes),p.options&&$.extend(!0,options,p.options)}}(),function(opts){$.extend(!0,options,opts),opts&&opts.colors&&(options.colors=opts.colors),null==options.xaxis.color&&(options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString()),null==options.yaxis.color&&(options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString()),null==options.xaxis.tickColor&&(options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color),null==options.yaxis.tickColor&&(options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color),null==options.grid.borderColor&&(options.grid.borderColor=options.grid.color),null==options.grid.tickColor&&(options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString());var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};for(axisCount=options.xaxes.length||1,i=0;i<axisCount;++i)axisOptions=options.xaxes[i],axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.xaxis,axisOptions),options.xaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));for(axisCount=options.yaxes.length||1,i=0;i<axisCount;++i)axisOptions=options.yaxes[i],axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.yaxis,axisOptions),options.yaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));for(options.xaxis.noTicks&&null==options.xaxis.ticks&&(options.xaxis.ticks=options.xaxis.noTicks),options.yaxis.noTicks&&null==options.yaxis.ticks&&(options.yaxis.ticks=options.yaxis.noTicks),options.x2axis&&(options.xaxes[1]=$.extend(!0,{},options.xaxis,options.x2axis),options.xaxes[1].position="top",null==options.x2axis.min&&(options.xaxes[1].min=null),null==options.x2axis.max&&(options.xaxes[1].max=null)),options.y2axis&&(options.yaxes[1]=$.extend(!0,{},options.yaxis,options.y2axis),options.yaxes[1].position="right",null==options.y2axis.min&&(options.yaxes[1].min=null),null==options.y2axis.max&&(options.yaxes[1].max=null)),options.grid.coloredAreas&&(options.grid.markings=options.grid.coloredAreas),options.grid.coloredAreasColor&&(options.grid.markingsColor=options.grid.coloredAreasColor),options.lines&&$.extend(!0,options.series.lines,options.lines),options.points&&$.extend(!0,options.series.points,options.points),options.bars&&$.extend(!0,options.series.bars,options.bars),null!=options.shadowSize&&(options.series.shadowSize=options.shadowSize),null!=options.highlightColor&&(options.series.highlightColor=options.highlightColor),i=0;i<options.xaxes.length;++i)getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];for(i=0;i<options.yaxes.length;++i)getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];for(var n in hooks)options.hooks[n]&&options.hooks[n].length&&(hooks[n]=hooks[n].concat(options.hooks[n]));executeHooks(hooks.processOptions,[options])}(options_),function(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove(),"static"==placeholder.css("position")&&placeholder.css("position","relative"),surface=new Canvas("flot-base",placeholder),overlay=new Canvas("flot-overlay",placeholder),ctx=surface.context,octx=overlay.context,eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");existing&&(existing.shutdown(),overlay.clear()),placeholder.data("plot",plot)}(),setData(data_),setupGrid(),draw(),function(){options.grid.hoverable&&(eventHolder.mousemove(onMouseMove),eventHolder.bind("mouseleave",onMouseLeave)),options.grid.clickable&&eventHolder.click(onClick),executeHooks(hooks.bindEvents,[eventHolder])}();var highlights=[],redrawTimeout=null}function floorInBase(n,base){return base*Math.floor(n/base)}var hasOwnProperty=Object.prototype.hasOwnProperty;$.fn.detach||($.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),Canvas.prototype.resize=function(width,height){if(width<=0||height<=0)throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height);var element=this.element,context=this.context,pixelRatio=this.pixelRatio;this.width!=width&&(element.width=width*pixelRatio,element.style.width=width+"px",this.width=width),this.height!=height&&(element.height=height*pixelRatio,element.style.height=height+"px",this.height=height),context.restore(),context.save(),context.scale(pixelRatio,pixelRatio)},Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){for(var position,positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active?position.rendered||(layer.append(position.element),position.rendered=!0):(positions.splice(i--,1),position.rendered&&position.element.detach());0==positions.length&&delete styleCache[key]}}layer.show()}},Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];return null==layer&&(null==this.textContainer&&(this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),layer},Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;if(text=""+text,textStyle="object"==typeof font?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family:font,layerCache=this._textCache[layer],null==layerCache&&(layerCache=this._textCache[layer]={}),styleCache=layerCache[textStyle],null==styleCache&&(styleCache=layerCache[textStyle]={}),null==(info=styleCache[text])){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));"object"==typeof font?element.css({font:textStyle,color:font.color}):"string"==typeof font&&element.addClass(font),info=styleCache[text]={width:element.outerWidth(!0),height:element.outerHeight(!0),element:element,positions:[]},element.detach()}return info},Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;"center"==halign?x-=info.width/2:"right"==halign&&(x-=info.width),"middle"==valign?y-=info.height/2:"bottom"==valign&&(y-=info.height);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y)return void(position.active=!0);position={active:!0,rendered:!1,element:positions.length?info.element.clone():info.element,x:x,y:y},positions.push(position),position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})},Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(null==text){var layerCache=this._textCache[layer];if(null!=layerCache)for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key))for(var position,positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active=!1}}else for(var position,positions=this.getTextInfo(layer,text,font,angle).positions,i=0;position=positions[i];i++)position.x==x&&position.y==y&&(position.active=!1)},$.plot=function(placeholder,data,options){return new Plot($(placeholder),data,options,$.plot.plugins)},$.plot.version="0.8.3",$.plot.plugins=[],$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})}}(jQuery),define("../../bower_components/flot/jquery.flot.js",function(){}),function($,e,t){"$:nomunge";function h(t){!0===r&&(r=t||1);for(var s=i.length-1;s>=0;s--){var l=$(i[s]);if(l[0]==e||l.is(":visible")){var f=l.width(),c=l.height(),d=l.data(m);!d||f===d.w&&c===d.h||(l.trigger(u,[d.w=f,d.h=c]),r=t||!0)}else d=l.data(m),d.w=0,d.h=0}null!==a&&(r&&(null==t||t-r<1e3)?a=e.requestAnimationFrame(h):(a=setTimeout(h,n[o]),r=!1))}var a,i=[],n=$.resize=$.extend($.resize,{}),r=!1,s="setTimeout",u="resize",m=u+"-special-event",o="pendingDelay",l="activeDelay",f="throttleWindow";n[o]=200,n[l]=20,n[f]=!0,$.event.special[u]={setup:function(){if(!n[f]&&this[s])return!1;var e=$(this);i.push(this),e.data(m,{w:e.width(),h:e.height()}),1===i.length&&(a=t,h())},teardown:function(){if(!n[f]&&this[s])return!1;for(var e=$(this),t=i.length-1;t>=0;t--)if(i[t]==this){i.splice(t,1);break}e.removeData(m),i.length||(r?cancelAnimationFrame(a):clearTimeout(a),a=null)},add:function(e){function a(e,n,a){var r=$(this),s=r.data(m)||{};s.w=n!==t?n:r.width(),s.h=a!==t?a:r.height(),i.apply(this,arguments)}if(!n[f]&&this[s])return!1;var i;if($.isFunction(e))return i=e,a;i=e.handler,e.handler=a}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,i){return e.setTimeout(function(){t((new Date).getTime())},n[l])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function($){function init(plot){function onResize(){var placeholder=plot.getPlaceholder();0!=placeholder.width()&&0!=placeholder.height()&&(plot.resize(),plot.setupGrid(),plot.draw())}function bindEvents(plot,eventHolder){plot.getPlaceholder().resize(onResize)}function shutdown(plot,eventHolder){plot.getPlaceholder().unbind("resize",onResize)}plot.hooks.bindEvents.push(bindEvents),plot.hooks.shutdown.push(shutdown)}var options={};$.plot.plugins.push({init:init,options:options,name:"resize",version:"1.0"})}(jQuery),define("../../bower_components/flot/jquery.flot.resize.js",function(){}),function($){function canvasSupported(){return!!document.createElement("canvas").getContext}function canvasTextSupported(){return!!canvasSupported()&&"function"==typeof document.createElement("canvas").getContext("2d").fillText}function css3TransitionSupported(){var div=document.createElement("div");return void 0!==div.style.MozTransition||void 0!==div.style.OTransition||void 0!==div.style.webkitTransition||void 0!==div.style.transition}function AxisLabel(axisName,position,padding,plot,opts){this.axisName=axisName,this.position=position,this.padding=padding,this.plot=plot,this.opts=opts,this.width=0,this.height=0}function CanvasAxisLabel(axisName,position,padding,plot,opts){AxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts)}function HtmlAxisLabel(axisName,position,padding,plot,opts){AxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts),this.elem=null}function CssTransformAxisLabel(axisName,position,padding,plot,opts){HtmlAxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts)}function IeTransformAxisLabel(axisName,position,padding,plot,opts){CssTransformAxisLabel.prototype.constructor.call(this,axisName,position,padding,plot,opts),this.requiresResize=!1}function init(plot){plot.hooks.processOptions.push(function(plot,options){if(options.axisLabels.show){var secondPass=!1,axisLabels={};plot.hooks.draw.push(function(plot,ctx){var hasAxisLabels=!1;secondPass?(secondPass=!1,$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options||plot.getOptions()[axisName];opts&&opts.axisLabel&&axis.show&&axisLabels[axisName].draw(axis.box)})):($.each(plot.getAxes(),function(axisName,axis){var opts=axis.options||plot.getOptions()[axisName];if(axisName in axisLabels&&(axis.labelHeight=axis.labelHeight-axisLabels[axisName].height,axis.labelWidth=axis.labelWidth-axisLabels[axisName].width,opts.labelHeight=axis.labelHeight,opts.labelWidth=axis.labelWidth,axisLabels[axisName].cleanup(),delete axisLabels[axisName]),opts&&opts.axisLabel&&axis.show){hasAxisLabels=!0;var renderer=null;if(opts.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)renderer=opts.axisLabelUseHtml||!css3TransitionSupported()&&!canvasTextSupported()&&!opts.axisLabelUseCanvas?HtmlAxisLabel:opts.axisLabelUseCanvas||!css3TransitionSupported()?CanvasAxisLabel:CssTransformAxisLabel;else{var ua=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(ua)&&(rv=parseFloat(RegExp.$1)),renderer=rv>=9&&!opts.axisLabelUseCanvas&&!opts.axisLabelUseHtml?CssTransformAxisLabel:opts.axisLabelUseCanvas||opts.axisLabelUseHtml?opts.axisLabelUseCanvas?CanvasAxisLabel:HtmlAxisLabel:IeTransformAxisLabel}var padding=void 0===opts.axisLabelPadding?2:opts.axisLabelPadding;axisLabels[axisName]=new renderer(axisName,axis.position,padding,plot,opts),axisLabels[axisName].calculateSize(),opts.labelHeight=axis.labelHeight+axisLabels[axisName].height,opts.labelWidth=axis.labelWidth+axisLabels[axisName].width}}),hasAxisLabels&&(secondPass=!0,plot.setupGrid(),plot.draw()))})}})}var options={axisLabels:{show:!0}};AxisLabel.prototype.cleanup=function(){},CanvasAxisLabel.prototype=new AxisLabel,CanvasAxisLabel.prototype.constructor=CanvasAxisLabel,CanvasAxisLabel.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},CanvasAxisLabel.prototype.draw=function(box){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var ctx=this.plot.getCanvas().getContext("2d");ctx.save(),ctx.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,ctx.fillStyle=this.opts.axisLabelColour;var x,y,width=ctx.measureText(this.opts.axisLabel).width,height=this.opts.axisLabelFontSizePixels,angle=0;"top"==this.position?(x=box.left+box.width/2-width/2,y=box.top+.72*height):"bottom"==this.position?(x=box.left+box.width/2-width/2,y=box.top+box.height-.72*height):"left"==this.position?(x=box.left+.72*height,y=box.height/2+box.top+width/2,angle=-Math.PI/2):"right"==this.position&&(x=box.left+box.width-.72*height,y=box.height/2+box.top-width/2,angle=Math.PI/2),ctx.translate(x,y),ctx.rotate(angle),ctx.fillText(this.opts.axisLabel,0,0),ctx.restore()},HtmlAxisLabel.prototype=new AxisLabel,HtmlAxisLabel.prototype.constructor=HtmlAxisLabel,HtmlAxisLabel.prototype.calculateSize=function(){var elem=$('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(elem),this.labelWidth=elem.outerWidth(!0),this.labelHeight=elem.outerHeight(!0),elem.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},HtmlAxisLabel.prototype.cleanup=function(){this.elem&&this.elem.remove()},HtmlAxisLabel.prototype.draw=function(box){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=$('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",box.left+box.width/2-this.labelWidth/2+"px"),this.elem.css("top",box.top+"px")):"bottom"==this.position?(this.elem.css("left",box.left+box.width/2-this.labelWidth/2+"px"),this.elem.css("top",box.top+box.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",box.top+box.height/2-this.labelHeight/2+"px"),this.elem.css("left",box.left+"px")):"right"==this.position&&(this.elem.css("top",box.top+box.height/2-this.labelHeight/2+"px"),this.elem.css("left",box.left+box.width-this.labelWidth+"px"))},CssTransformAxisLabel.prototype=new HtmlAxisLabel,CssTransformAxisLabel.prototype.constructor=CssTransformAxisLabel,CssTransformAxisLabel.prototype.calculateSize=function(){HtmlAxisLabel.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},CssTransformAxisLabel.prototype.transforms=function(degrees,x,y){var stransforms={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=x||0!=y){var stdTranslate=" translate("+x+"px, "+y+"px)";stransforms["-moz-transform"]+=stdTranslate,stransforms["-webkit-transform"]+=stdTranslate,stransforms["-o-transform"]+=stdTranslate,stransforms["-ms-transform"]+=stdTranslate}if(0!=degrees){var stdRotate=" rotate("+degrees+"deg)";stransforms["-moz-transform"]+=stdRotate,stransforms["-webkit-transform"]+=stdRotate,stransforms["-o-transform"]+=stdRotate,stransforms["-ms-transform"]+=stdRotate}var s="top: 0; left: 0; ";for(var prop in stransforms)stransforms[prop]&&(s+=prop+":"+stransforms[prop]+";");return s+=";"},CssTransformAxisLabel.prototype.calculateOffsets=function(box){var offsets={x:0,y:0,degrees:0};return"bottom"==this.position?(offsets.x=box.left+box.width/2-this.labelWidth/2,offsets.y=box.top+box.height-this.labelHeight):"top"==this.position?(offsets.x=box.left+box.width/2-this.labelWidth/2,offsets.y=box.top):"left"==this.position?(offsets.degrees=-90,offsets.x=box.left-this.labelWidth/2+this.labelHeight/2,offsets.y=box.height/2+box.top):"right"==this.position&&(offsets.degrees=90,offsets.x=box.left+box.width-this.labelWidth/2-this.labelHeight/2,offsets.y=box.height/2+box.top),offsets.x=Math.round(offsets.x),offsets.y=Math.round(offsets.y),offsets},CssTransformAxisLabel.prototype.draw=function(box){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var offsets=this.calculateOffsets(box);this.elem=$('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(offsets.degrees,offsets.x,offsets.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},IeTransformAxisLabel.prototype=new CssTransformAxisLabel,IeTransformAxisLabel.prototype.constructor=IeTransformAxisLabel,
IeTransformAxisLabel.prototype.transforms=function(degrees,x,y){var s="";if(0!=degrees){for(var rotation=degrees/90;rotation<0;)rotation+=4;s+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+rotation+"); ",this.requiresResize="right"==this.position}return 0!=x&&(s+="left: "+x+"px; "),0!=y&&(s+="top: "+y+"px; "),s},IeTransformAxisLabel.prototype.calculateOffsets=function(box){var offsets=CssTransformAxisLabel.prototype.calculateOffsets.call(this,box);return"top"==this.position?offsets.y=box.top+1:"left"==this.position?(offsets.x=box.left,offsets.y=box.height/2+box.top-this.labelWidth/2):"right"==this.position&&(offsets.x=box.left+box.width-this.labelHeight,offsets.y=box.height/2+box.top-this.labelWidth/2),offsets},IeTransformAxisLabel.prototype.draw=function(box){CssTransformAxisLabel.prototype.draw.call(this,box),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},$.plot.plugins.push({init:init,options:options,name:"axisLabels",version:"2.0"})}(jQuery),define("../../bower_components/flot-axislabels/jquery.flot.axislabels.js",function(){}),define("css!../libs/libs-frontend-unitcombobox/dist/css/unitComboBox",[],function(){});var unitData={unitType:{LINEARDISTANCE:{unit:[{symbol:"m",name:"meter",conversionFactor:.0254,id:"meter",isSI:!0},{symbol:"cm",name:"centimeter",conversionFactor:2.54,id:"centimeter"},{symbol:"mm",name:"millimeter",conversionFactor:25.4,id:"millimeter",isMetric:!0},{symbol:"in",name:"inch",conversionFactor:1,id:"inch",isImperial:!0},{symbol:"ft",name:"feet",conversionFactor:.0833333333333333,id:"feet"},{symbol:"Km",name:"kilometer",conversionFactor:254e-7,id:"kilometer"}]},ANGULARDISTANCE:{unit:[{symbol:"rad",name:"radian",conversionFactor:6.28318530717958,id:"radian",isSI:!0},{symbol:"deg",name:"degree",conversionFactor:360,id:"degree"},{symbol:"rev",name:"revolution",conversionFactor:1,id:"revolution",isMetric:!0,isImperial:!0},{symbol:"min",name:"minute",conversionFactor:21600,id:"minute"}]},VELOCITY:{unit:[{symbol:"m/sec",name:"meter/second",conversionFactor:.0254,id:"meterpersecond",isSI:!0},{symbol:"cm/sec",name:"centimeter/second",conversionFactor:2.54,id:"centimeterpersecond"},{symbol:"mm/sec",name:"millimeter/second",conversionFactor:25.4,id:"millimeterpersecond",isMetric:!0},{symbol:"in/sec",name:"inch/second",conversionFactor:1,id:"inchpersecond",isImperial:!0},{symbol:"ft/sec",name:"feet/second",conversionFactor:.0833333333333333,id:"feetpersecond"},{symbol:"ft/min",name:"feet/minute",conversionFactor:5,id:"feetperminute"}]},ANGULARVELOCITY:{unit:[{symbol:"rad/sec",name:"radian/second",conversionFactor:1,id:"radianpersecond",isSI:!0},{symbol:"deg/sec",name:"degree/second",conversionFactor:57.2957795130823,id:"degreepersecond"},{symbol:"rev/sec",name:"revolution/second",conversionFactor:.159154943091895,id:"revolutionpersecond"},{symbol:"rpm",name:"revolutions/minute",conversionFactor:9.54929658551372,id:"revolutionsperminute",isMetric:!0,isImperial:!0}]},ACCELERATION:{unit:[{symbol:"m/sec&sup2;",name:"meter/second",conversionFactor:.0254,id:"meterpersecondsquare",isSI:!0},{symbol:"cm/sec&sup2;",name:"centimeter/second",conversionFactor:2.54,id:"centimeterpersecondsquare"},{symbol:"mm/sec&sup2;",name:"millimeter/second",conversionFactor:25.4,id:"millimeterpersecondsquare",isMetric:!0},{symbol:"in/sec&sup2;",name:"inch/second",conversionFactor:1,id:"inchpersecondsquare",isImperial:!0},{symbol:"ft/sec&sup2;",name:"feet/second",conversionFactor:.0833333333333333,id:"feetpersecondsquare"},{symbol:"g",name:"gravity acceleration",conversionFactor:.00259007914966232,id:"gravityacceleration"}]},ANGULARACCELERATION:{unit:[{symbol:"rad/sec&sup2;",name:"radian/second",conversionFactor:1,id:"radianpersecondsquare",isSI:!0},{symbol:"deg/sec&sup2;",name:"degree/second",conversionFactor:57.2957795130823,id:"degreepersecondsquare"},{symbol:"rev/sec&sup2;",name:"revolutions/second",conversionFactor:.159154943091895,id:"revolutionspersecondsquare"},{symbol:"rpm/sec",name:"revolutions per minute/second",conversionFactor:9.54929658551372,id:"revolutionsperminutepersecond",isMetric:!0,isImperial:!0}]},TIME:{unit:[{symbol:"sec",name:"second",conversionFactor:60,id:"second",isSI:!0,isMetric:!0,isImperial:!0},{symbol:"min",name:"minute",conversionFactor:1,id:"minute"},{symbol:"msec",name:"millisecond",conversionFactor:6e4,id:"millisecond"}]},MASS:{unit:[{symbol:"kg",name:"kilogram",conversionFactor:.0283495199999999,id:"kilogram",isSI:!0,isMetric:!0},{symbol:"gm",name:"gram",conversionFactor:28.3495199999999,id:"gram"},{symbol:"oz",name:"ounce",conversionFactor:1,id:"ounce"},{symbol:"lb",name:"pound",conversionFactor:.0625,id:"pound",isImperial:!0}]},FORCE:{unit:[{symbol:"N",name:"newton",conversionFactor:4.4482216153,id:"newton",isSI:!0,isMetric:!0},{symbol:"kgf",name:"kilogram-force",conversionFactor:.45359237,id:"kilogramforce"},{symbol:"lbf",name:"pound-force",conversionFactor:1,id:"poundforce",isImperial:!0},{symbol:"dyne",name:"dyne",conversionFactor:444822.161526051,id:"dyne"}]},TORQUE:{unit:[{symbol:"N-m",name:"newton-meter",conversionFactor:.007061552,id:"newtonmeter",isSI:!0,isMetric:!0},{symbol:"oz-in",name:"ounce-inch",conversionFactor:1,id:"ounceinch"},{symbol:"lb-in",name:"pound-inch",conversionFactor:.0625,id:"poundinch",isImperial:!0},{symbol:"lb-ft",name:"pound-feet",conversionFactor:.00520833333333333,id:"poundfeet"}]},INERTIA:{unit:[{symbol:"kg-m&sup2;",name:"kilogram-meter",conversionFactor:182997852e-13,id:"kilogrammetersquare",isSI:!0,isMetric:!0},{symbol:"kg-cm&sup2;",name:"kilogram-centimeter",conversionFactor:.182997852,id:"kilogramcentimetersquare"},{symbol:"Nm-s&sup2;",name:"newton-meter-second",conversionFactor:182997852e-13,id:"newtonmetersecondsquare"},{symbol:"oz-in-s&sup2;",name:"pound-inch-second",conversionFactor:.00259008,id:"poundinchsecondsquare"},{symbol:"lb-in-s&sup2;",name:"pound-inch-second",conversionFactor:16188e-8,id:"poundinchsecondsquare",isImperial:!0},{symbol:"lb-ft-s&sup2;",name:"pound-feet-second",conversionFactor:1349e-8,id:"poundfeetsecondsquare"},{symbol:"oz-in&sup2;",name:"ounce-inch",conversionFactor:1,id:"ounceinchsquare"},{symbol:"lb-in&sup2;",name:"pound-inch",conversionFactor:.0625,id:"INERTIA_8"},{symbol:"lb-ft&sup2;",name:"pound-feet",conversionFactor:434028e-9,id:"poundfeetsquare"},{symbol:"gm-mm&sup2;",name:"gram-millimeter",conversionFactor:18299.7852,id:"grammillimetersquare"},{symbol:"Kg-mm&sup2;",name:"kilogram-millimeter",conversionFactor:18.2997852,id:"kilogrammillimetersquare"}]},POWER:{unit:[{symbol:"watts",name:"watts",conversionFactor:746,id:"watts",isSI:!0},{symbol:"HP",name:"horsepower",conversionFactor:1,id:"horsepower",isImperial:!0},{symbol:"kW",name:"kilo-watt",conversionFactor:.746,id:"kilowatt",isMetric:!0}]},TEMPERATURE:{unit:[{symbol:"C",name:"celsius",conversionFactor:1,id:"celsius",isSI:!0,isMetric:!0},{symbol:"F",name:"fahrenheit",conversionFactor:1,id:"fahrenheit",isImperial:!0}]},TORQUECONSTANT:{unit:[{symbol:"Nm/A",name:"newton-meter/ampere",conversionFactor:1,id:"newtonmeterperampere",isSI:!0,isMetric:!0},{symbol:"kg-m/A",name:"kilogram-meter/ampere",conversionFactor:.101971621296887,id:"kilogrammeterperampere"},{symbol:"kg-cm/A",name:"kilogram-cm/ampere",conversionFactor:10.1971621296887,id:"kilogramcmperampere"},{symbol:"gm-cm/A",name:"gram-centimeter/ampere",conversionFactor:10197.1621296887,id:"gramcentimeterperampere"},{symbol:"oz-in/A",name:"ounce-inch/ampere",conversionFactor:141.61193228,id:"ounceinchperampere"},{symbol:"lb-in/A",name:"pound-inch/ampere",conversionFactor:8.85074577,id:"poundinchampere",isImperial:!0},{symbol:"lb-ft/A",name:"pound-feet/ampere",conversionFactor:.73756215,id:"poundfeetperampere"}]},DAMPINGCONSTANT:{unit:[{symbol:"Nm/krpm",name:"newton-meter/krpm",conversionFactor:1,id:"newtonmeterperkrpm"},{symbol:"kg-m/krpm",name:"kilogram-meter/krpm",conversionFactor:.101971621296887,id:"kilogrammeterperkrpm"},{symbol:"kg-cm/krpm",name:"kilogram-centimeter/krpm",conversionFactor:10.1971621296887,id:"kilogramcentimeterperkrpm"},{symbol:"gm-cm/krpm",name:"gram-centimeter/krpm",conversionFactor:10197.1621296887,id:"gramcentimeterperkrpm"},{symbol:"oz-in/krpm",name:"ounce-inch/krpm",conversionFactor:141.61193228,id:"ounceinchperkrpm"},{symbol:"lb-in/krpm",name:"pound-inch/krpm",conversionFactor:8.85074577,id:"poundinchperkrpm",isImperial:!0},{symbol:"lb-ft/krpm",name:"pound-feet/krpm",conversionFactor:.73756215,id:"poundfeetperkrpm"},{symbol:"Nm/rad/sec",name:"newton-meter/radian/second",conversionFactor:.00954929658551372,id:"newtonmeterperradianpersecond",isSI:!0,isMetric:!0}]},THERMALRESISTANCE:{unit:[{symbol:"C/Watt",name:"celsius/watt",conversionFactor:1,id:"celsiusperwatt",isSI:!0,isMetric:!0,isImperial:!0}]},RESISTANCE:{unit:[{symbol:"Ohms",name:"ohms",conversionFactor:1,id:"ohms",isSI:!0,isMetric:!0,isImperial:!0}]},INDUCTANCE:{unit:[{symbol:"H",name:"henry",conversionFactor:1,id:"henry",isSI:!0,isMetric:!0,isImperial:!0}]},CURRENT:{unit:[{symbol:"A(0-pk)",name:"ampere(0 to peak)",conversionFactor:1,id:"amperezerotopeak",isSI:!0,isMetric:!0,isImperial:!0},{symbol:"A(RMS)",name:"ampere(root mean square)",conversionFactor:.707106781186547,id:"ampererootmeansquare"}]},TEMPERATURECOFFICIENT:{unit:[{symbol:"/C",name:"/celsius",conversionFactor:1,id:"percelsius",isSI:!0,isMetric:!0},{symbol:"%/C",name:"%/celsius",conversionFactor:100,id:"percentagepercelsius",isImperial:!0}]},CAPACITANCE:{unit:[{symbol:"F",name:"farad",conversionFactor:1,id:"farad",isSI:!0,isMetric:!0,isImperial:!0},{symbol:"F",name:"micro-farad",conversionFactor:1e6,id:"microfarad"}]},VOLTAGE:{unit:[{symbol:"Volts",name:"volts",conversionFactor:1,id:"volts",isSI:!0,isMetric:!0,isImperial:!0}]},DENSITY:{unit:[{symbol:"Kg/m&sup3",name:"kilogram/meter",conversionFactor:27679.9047,id:"kilogrampermetercube",isSI:!0,isMetric:!0},{symbol:"Kg/cm&sup3",name:"kilogram/centimeter",conversionFactor:.0276799047,id:"kilogrampercentimetercube"},{symbol:"gm/m&sup3",name:"gram/meter",conversionFactor:27679904.7,id:"grampermetercube"},{symbol:"lb/in&sup3",name:"pound/inch",conversionFactor:1,id:"poundperinchcube",isImperial:!0},{symbol:"lb/ft&sup3",name:"pound/feet",conversionFactor:1728,id:"poundperfeetcube"},{symbol:"gm/cm&sup3",name:"gram/centimeter",conversionFactor:27.6799047,id:"grampercentimetercube",isSI:!0,isMetric:!0}]},ROLLOFF:{unit:[{symbol:"Nm/(rad/sec)&sup2",name:"newton-meter/(radian/second)",conversionFactor:1,id:"newtonmeterperradianpersecondsquare",isSI:!0,isMetric:!0}]},MAGNETTEMPCOFFICIENT:{unit:[]},LEAD:{unit:[{symbol:"mm/rev",name:"millimeter/revolution",conversionFactor:1,id:"millimeterperrevolution",isSI:!0,isMetric:!0},{symbol:"in/rev",name:"inch/revolution",conversionFactor:.03937007874016,id:"inchperrevolution",isImperial:!0}]},INCLINATION:{unit:[{symbol:"rad",name:"radian",conversionFactor:.0174532925199433,id:"radian",isSI:!0},{symbol:"deg",name:"radian",conversionFactor:1,id:"radian",isMetric:!0}]},DIAMETER:{unit:[{symbol:"mm",name:"millimeter",conversionFactor:25.4,id:"millimeter",isMetric:!0},{symbol:"cm",name:"centimeter",conversionFactor:2.54,id:"centimeter"},{symbol:"m",name:"meter",conversionFactor:.0254,id:"meter",isSI:!0},{symbol:"in",name:"inch",conversionFactor:1,id:"inch",isImperial:!0},{symbol:"ft",name:"feet",conversionFactor:.0833333333333333,id:"feet"}]},FORCECONSTANT:{unit:[{symbol:"N/A",name:"newton/ampere",conversionFactor:1,id:"newtonperampere",isSI:!0,isMetric:!0},{symbol:"kg/A",name:"kilogram/ampere",conversionFactor:.101971621296887,id:"kilogramperampere"},{symbol:"gm/A",name:"gram/ampere",conversionFactor:101.971621296887,id:"gramperampere"},{symbol:"oz/A",name:"ounce/ampere",conversionFactor:3.59694,id:"ounceperampere"},{symbol:"lb/A",name:"pound/ampere",conversionFactor:.224809,id:"poundperampere",isImperial:!0}]},ENERGY:{unit:[{symbol:"J",name:"joules",conversionFactor:1,id:"joules",isSI:!0}]},LIFE:{unit:[{symbol:"Year",name:"year",conversionFactor:1,id:"year",isSI:!0,isMetric:!0,isImperial:!0},{symbol:"Days",name:"days",conversionFactor:365,id:"days"},{symbol:"Weeks",name:"weeks",conversionFactor:52.1428571428571,id:"weeks"}]},ALTITUDE:{unit:[{symbol:"m",name:"meter",conversionFactor:.0254,id:"meter",isSI:!0,isMetric:!0},{symbol:"cm",name:"centimeter",conversionFactor:2.54,id:"centimeter"},{symbol:"mm",name:"millimeter",conversionFactor:25.4,id:"millimeter"},{symbol:"in",name:"inch",conversionFactor:1,id:"inch"},{symbol:"ft",name:"feet",conversionFactor:.0833333333333333,id:"feet",isImperial:!0},{symbol:"Km",name:"kilometer",conversionFactor:254e-7,id:"kilometer"}]},LINEARDAMPING:{unit:[{symbol:"N/m/s",name:"newton/meter/second",conversionFactor:175.126818058489,id:"newtonpermeterpersecond",isSI:!0,isMetric:!0},{symbol:"kgf/m/s",name:"kilogram-force/meter/second",conversionFactor:17.8579653543307,id:"kilogramforcepermeterpersecond"},{symbol:"lbf/in/s",name:"pound-force/inch/second",conversionFactor:1,id:"poundforceperinchpersecond",isImperial:!0}]},CURRENCY:{unit:[{symbol:"$(USD)",name:"dollar",conversionFactor:1,id:"dollar",isSI:!0,isMetric:!0},{symbol:"EUR",name:"euro",conversionFactor:.703,id:"euro"},{symbol:"GBP",name:"great british pound",conversionFactor:.491,id:"greatbritishpound",isImperial:!0}]},JERK:{unit:[{symbol:"m/sec&sup3",name:"meter/second",conversionFactor:.0254,id:"meterpersecondcube",isSI:!0},{symbol:"cm/sec&sup3",name:"centimeter/second",conversionFactor:2.54,id:"centimeterpersecondcube"},{symbol:"mm/sec&sup3",name:"millimeter/second",conversionFactor:25.4,id:"millimeterpersecondcube",isMetric:!0},{symbol:"in/sec&sup3",name:"inches/second",conversionFactor:1,id:"inchespersecondcube",isImperial:!0},{symbol:"ft/sec&sup3",name:"feet/second",conversionFactor:.0833333333333333,id:"feetpersecondcube"}]},VOLUME:{unit:[{symbol:"m&sup3",name:"meter",conversionFactor:16387064e-12,id:"metercube",isSI:!0},{symbol:"cm&sup3",name:"centimeter",conversionFactor:16.387064,id:"centimetercube"},{symbol:"mm&sup3",name:"millimeter",conversionFactor:16387.064,id:"millimetercube"},{symbol:"in&sup3",name:"inch",conversionFactor:1,id:"inchcube",isImperial:!0},{symbol:"ft&sup3",name:"feet",conversionFactor:578704e-9,id:"feetcube"}]},AREA:{unit:[{symbol:"m&sup2",name:"meter",conversionFactor:.000645159999999949,id:"metersquare",isSI:!0},{symbol:"cm&sup2",name:"centimeter",conversionFactor:6.4516,id:"centimetersquare"},{symbol:"mm&sup2",name:"millimeter",conversionFactor:645.16,id:"millimetersquare"},{symbol:"in&sup2",name:"inch",conversionFactor:1,id:"inchsquare",isImperial:!0},{symbol:"ft&sup2",name:"feet",conversionFactor:.00694444444444438,id:"feetsquare"}]},ANGULARJERK:{unit:[{symbol:"rad/sec&sup3",name:"radian/second",conversionFactor:1,id:"radianpersecondcube",isSI:!0},{symbol:"deg/sec&sup3",name:"degree/second",conversionFactor:57.2957795130823,id:"degreepersecondcube"},{symbol:"rev/sec&sup3",name:"revolution/second",conversionFactor:.159154943091895,id:"revolutionpersecondcube"},{symbol:"rpm/sec&sup2",name:"revolution-per-minute/second",conversionFactor:9.54929658551372,id:"revolutionperminutepersecondsquare",isMetric:!0,isImperial:!0}]},MOMENT:{unit:[{symbol:"N-m",name:"newton-meter",conversionFactor:.007061552,id:"newtonpermeter",isSI:!0,isMetric:!0},{symbol:"oz-in",name:"ounce-inch",conversionFactor:1,id:"ounceinch"},{symbol:"lb-in",name:"pound-inch",conversionFactor:.0625,id:"poundinch",isImperial:!0},{symbol:"lb-ft",name:"pound-feet",conversionFactor:.00520833333333333,id:"poundfeet"}]},BANDWIDTH:{unit:[{symbol:"1/sec",name:"1/second",conversionFactor:1,isSI:!0,id:"onepersecond",isMetric:!0,isImperial:!0}]},INTEGRAL:{unit:[{symbol:"1/ms-s",name:"1/ms-s",conversionFactor:1,isSI:!0,id:"onepermss",isMetric:!0,isImperial:!0}]},STIFFNESSROTARY:{unit:[{symbol:"Nm/deg",name:"newton-meter/degree",conversionFactor:1,isSI:!0,id:"newtonmeterperdegree",isMetric:!0,isImperial:!0}]},BACKLASH:{unit:[{symbol:"arc min",name:"arc minute",conversionFactor:1,isSI:!0,id:"arcminute",isMetric:!0,isImperial:!0}]},FREQUENCY:{unit:[{symbol:"Hz",name:"hertz",conversionFactor:1,isSI:!0,id:"hertz",isMetric:!0,isImperial:!0}]},PRESSURE:{unit:[{symbol:"GPa",name:"giga-pascal",conversionFactor:1,isSI:!0,id:"gigapascal",isMetric:!0,isImperial:!0}]},THERMALMASS:{unit:[{symbol:"J/C",name:"joules/celsius",conversionFactor:1,isSI:!0,id:"joulespercelsius"}]},STIFFNESSLINEAR:{unit:[{symbol:"N/mm",name:"newton/millimeter",conversionFactor:1,isSI:!0,id:"newtonpermillimeter",isMetric:!0,isImperial:!0}]},PERCENTAGE:{unit:[{symbol:"%",name:"percentage",conversionFactor:1,isSI:!0,id:"percentage",isMetric:!0,isImperial:!0}]}}};window.COSMATT=window.COSMATT||{},COSMATT.UNITCONVERTER=function(){var convertedValue=function(unitType,value,unitFrom,unitTo){try{var unitFromConverionFactor="",unitToConverionFactor="";unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)unitNode[loop].id==unitFrom&&(unitFromConverionFactor=unitNode[loop].conversionFactor),unitNode[loop].id==unitTo&&(unitToConverionFactor=unitNode[loop].conversionFactor);return unitToConverionFactor/unitFromConverionFactor*value}catch(errorMessage){console.log("Error : "+errorMessage)}},units=function(unitType){try{var units=[],unitNode=[];unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)units.push(unitNode[loop].symbol);return units}catch(errorMessage){console.log("Error : "+errorMessage)}},unitsAndIds=function(unitType){try{var units=[],unitNode=[];unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++){var unitsObj={};unitsObj.name=unitNode[loop].symbol,unitsObj.id=unitNode[loop].id,units.push(unitsObj)}return units}catch(errorMessage){console.log("Error : "+errorMessage)}},SIUnit=function(unitType){try{var SIUnitObj={};unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)void 0!=unitNode[loop].isSI&&1==unitNode[loop].isSI&&(SIUnitObj.name=unitNode[loop].symbol,SIUnitObj.id=unitNode[loop].id);return SIUnitObj}catch(errorMessage){console.log("Error : "+errorMessage)}},SIValue=function(unitType,selectedUnit,value){try{var SIUnitIndex;unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)if(void 0!=unitNode[loop].isSI&&1==unitNode[loop].isSI){SIUnitIndex=loop;break}return SIUnitIndex===selectedUnit?value:value*conversionRatio(unitType,selectedUnit,SIUnitIndex)}catch(errorMessage){console.log("Error : "+errorMessage)}},conversionFactor=function(unitType,unitName){try{var conversionFactor="";unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)unitNode[loop].id==unitName&&(conversionFactor=unitNode[loop].conversionFactor);return conversionFactor}catch(errorMessage){console.log("Error : "+errorMessage)}},conversionRatio=function(unitType,prevIndex,newIndex){try{var prevConversionFactor=1,newConversionFactor=1;unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)loop==prevIndex&&(prevConversionFactor=unitNode[loop].conversionFactor),loop==newIndex&&(newConversionFactor=unitNode[loop].conversionFactor);return newConversionFactor/prevConversionFactor}catch(errorMessage){console.log("Error : "+errorMessage)}};return{getUnits:units,getunitsAndIds:unitsAndIds,getSIUnit:SIUnit,getSIValue:SIValue,getUnitConvertedValue:convertedValue,getConversionFactor:conversionFactor,getConversionRatio:conversionRatio,getConversionRatioById:function(unitType,unitFrom,UnitTo){try{var prevConversionFactor=1,newConversionFactor=1;unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)"SI"==unitFrom&&unitNode[loop].isSI?prevConversionFactor=unitNode[loop].conversionFactor:unitNode[loop].id==unitFrom&&(prevConversionFactor=unitNode[loop].conversionFactor),"SI"==UnitTo&&unitNode[loop].isSI?newConversionFactor=unitNode[loop].conversionFactor:unitNode[loop].id==UnitTo&&(newConversionFactor=unitNode[loop].conversionFactor);return newConversionFactor/prevConversionFactor}catch(errorMessage){console.log("Error : "+errorMessage)}},getUnitDetails:function(unitType,unit){try{var unitNode=[];unitNode=unitData.unitType[unitType].unit;for(var loop=0;loop<unitNode.length;loop++)if(unitNode[loop].id==unit)return unitNode[loop];return null}catch(errorMessage){console.log("Error : "+errorMessage)}}}}(),function($){$.fn.unitsComboBox=function(options){var defaults={unitType:"",unit:"",roundOfNumber:"",value:"",show:"true",enable:{textbox:"true",comboBox:"true"},comboBoxWidthRatio:{textBox:"60%",comboBox:"40%"},callBackFn:function(){}},plugin=this,timerId=0;plugin.settings={};var $element=$(this);plugin.init=function(){plugin.settings=$.extend({},defaults,options),createComboBox(plugin.settings.unitType)},plugin.update=function(options){var newOptions=$.extend({},plugin.settings,options);$element.find(".cosmatt-unitComboBox")["true"==newOptions.show?"show":"hide"](),"true"==newOptions.enable.textbox?$element.find(".cosmatt-unitComboBox").find("input").removeAttr("disabled"):$element.find(".cosmatt-unitComboBox").find("input").attr("disabled","disabled"),"true"==newOptions.enable.comboBox?$element.find(".cosmatt-unitComboBox").find("select").removeAttr("disabled"):$element.find(".cosmatt-unitComboBox").find("select").attr("disabled","disabled"),$element.find(".cosmatt-unitComboBox").find(".unitTextBox")["true"==newOptions.showComboBoxOnly?"hide":"show"]()},plugin.getSIValue=function(){var textboxValue=0,SIUnitObj="";if("object"==typeof COSMATT.UNITCONVERTER){SIUnitObj=COSMATT.UNITCONVERTER.getSIUnit(plugin.settings.unitType),textboxValue=$element.find(".amount_"+plugin.settings.unitType).val();return COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,textboxValue,plugin.settings.unit,SIUnitObj.id)}},plugin.getValueInSelectedUnit=function(siVal){var SIUnitObj="";if("object"==typeof COSMATT.UNITCONVERTER){SIUnitObj=COSMATT.UNITCONVERTER.getSIUnit(plugin.settings.unitType);return COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,siVal,SIUnitObj.id,plugin.settings.unit)}},plugin.getConversionFactor=function(){var conversionfactor="";return"object"==typeof COSMATT.UNITCONVERTER&&(conversionfactor=COSMATT.UNITCONVERTER.getConversionFactor(plugin.settings.unitType,plugin.settings.unit)),conversionfactor},plugin.setDropBoxItem=function(optionId){$element.find(".unitComboBox");$element.find("select option").filter(function(ele,option){return $(option).data("id")==optionId}).attr("selected",!0);var textboxValue=0;if(""===(textboxValue=plugin.settings.value))return plugin.setTextBoxValue(textboxValue),void(plugin.settings.unit=$element.find(":selected").data("id"));if("true"==plugin.settings.showComboBoxOnly)var convertedVal=COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,1,plugin.settings.unit,$element.find(":selected").data("id"));else var convertedVal=COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,textboxValue,plugin.settings.unit,$element.find(":selected").data("id"));plugin.settings.unit=$element.find(":selected").data("id"),plugin.setTextBoxValue(convertedVal)},plugin.setTextBoxValue=function(value){var stringToNum;if(stringToNum=""===value?value:Number(value),plugin.settings.value=value,""!==plugin.settings.roundOfNumber&&""!==stringToNum){var decimalPlaces=Math.pow(10,plugin.settings.roundOfNumber);stringToNum=Math.round(stringToNum*decimalPlaces)/decimalPlaces}$element.find(".amount_"+plugin.settings.unitType).val(stringToNum),$element.find(".amount_"+plugin.settings.unitType).attr("title",stringToNum)};var createComboBox=function(unitType){var callbackData={};try{if("object"==typeof COSMATT.UNITCONVERTER&&""!=unitType){var dropDownOptions=COSMATT.UNITCONVERTER.getunitsAndIds(unitType),$unitWrapper=$('<div class="cosmatt-unitComboBox"></div>');$element.append($unitWrapper);var textBoxType="textbox",step="";"spin"==plugin.settings.mode&&(textBoxType="number",step=plugin.settings.step);var $textBoxControl=$('<input type ="'+textBoxType+'" value="" class="form-control amount_'+plugin.settings.unitType+' unitTextBox" step="'+step+'"></input>');$unitWrapper.append($textBoxControl),plugin.setTextBoxValue(plugin.settings.value),void 0!=plugin.settings.max&&$textBoxControl.attr("max",plugin.settings.max),void 0!=plugin.settings.min&&$textBoxControl.attr("min",plugin.settings.min);for(var loop1=0;loop1<dropDownOptions.length;loop1++)if(plugin.settings.unit==dropDownOptions[loop1].id)var selectedUnit=dropDownOptions[loop1].name;var $unitDropDown=$('<select id="comboBox'+plugin.settings.unitType+'" class="form-control unitComboBox" title="'+selectedUnit+'"></select');$unitWrapper.append($unitDropDown),$textBoxControl.css("width",plugin.settings.comboBoxWidthRatio.textBox),$unitDropDown.css("width",plugin.settings.comboBoxWidthRatio.comboBox);for(var loop=0;loop<dropDownOptions.length;loop++){var option=$('<option value="'+dropDownOptions[loop].name+'">'+dropDownOptions[loop].name+"</option>");option.data("id",dropDownOptions[loop].id),$unitDropDown.append(option)}$element.find("select option").filter(function(ele,option){return $(option).data("id")==plugin.settings.unit}).attr("selected",!0),plugin.settings.unit=$element.find("#comboBox"+plugin.settings.unitType+" :selected").data("id"),comboBoxEventHandler(),textBoxEventHandler(),plugin.update({}),plugin.settings.SIValue=plugin.getSIValue({}),"function"==typeof plugin.settings.callBackFn&&(callbackData.unitName=plugin.settings.unit,callbackData.SIValue=plugin.settings.SIValue,plugin.settings.callBackFn.call(callbackData))}}catch(errorMessage){console.log("Error : "+errorMessage)}},comboBoxEventHandler=function(){var textboxValue=0,callbackData={};$element.find(".unitComboBox").on("change",function(event){if(""===(textboxValue=plugin.settings.value))return plugin.setTextBoxValue(textboxValue),void(plugin.settings.unit=$element.find(":selected").data("id"));if("true"==plugin.settings.showComboBoxOnly)var convertedVal=COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,1,plugin.settings.unit,$element.find(":selected").data("id"));else var convertedVal=COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType,textboxValue,plugin.settings.unit,$element.find(":selected").data("id"));conversionfactor=COSMATT.UNITCONVERTER.getConversionFactor(plugin.settings.unitType,$(this).val()),plugin.settings.unit=$element.find(":selected").data("id"),$(this).attr("title",$(this).val()),plugin.setTextBoxValue(convertedVal),"function"==typeof plugin.settings.callBackFn&&(callbackData.unit=plugin.settings.unit,callbackData.value=plugin.settings.value,callbackData.SIValue=plugin.getSIValue({}),callbackData.type="dropdown",plugin.settings.callBackFn.call(callbackData))})},textBoxEventHandler=function(){$element.find(".unitTextBox").on("input",function(){var self=this,callbackData={};timerId>0&&clearTimeout(timerId),timerId=setTimeout(function(){plugin.setTextBoxValue($(self).val()),"function"==typeof plugin.settings.callBackFn&&(callbackData.value=plugin.settings.value,callbackData.unit=plugin.settings.unit,callbackData.type="textbox",callbackData.SIValue=plugin.getSIValue(),plugin.settings.callBackFn.call(callbackData))},800)})};plugin.init(),$(this).data("unitsComboBox",plugin)}}(jQuery),define("../libs/libs-frontend-unitcombobox/dist/js/unitComboBox.js",function(){}),define("css!../libs/libs-frontend-motionprofile/dist/css/motionProfile",[],function(){}),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.AccelDecelSegment=function(){var dM1,dM2,dM3,dV1,dV2,dV3,dS1,dS2,dS3,Snorm,skewCorrectionFactor,accFormFactor,accSkewFactor,deltaM,avgVel,finalVelocity,deltaV,deltaBase,deltaRamp,initialTime,initialVelocity,initialPosition,outputData={},calculateDeltaElements=function(){dM2=2/accFormFactor-1,dM1=(1-dM2)*(1-accSkewFactor)/2,dM3=1-dM1-dM2,dV1=accFormFactor*dM1/2,dV2=accFormFactor*dM2,dV3=accFormFactor*dM3/2,dS1=dV1/3*dM1,dS2=(dV2+2*dV1)/2*dM2,dS3=(1-dV3/3)*dM3,Snorm=dS1+dS2+dS3,dS1/=Snorm,dS2/=Snorm,dS3/=Snorm,skewCorrectionFactor=.5/Snorm},calculateIntermediateVars=function(inputData){switch(inputData.permutation){case"TIME_DISTANCE":deltaM=inputData.time,avgVel=inputData.distance/deltaM,finalVelocity=initialVelocity+2*(avgVel-initialVelocity)*skewCorrectionFactor,deltaV=finalVelocity-initialVelocity,deltaBase=deltaM*initialVelocity,deltaRamp=inputData.distance-deltaBase;break;case"TIME_VELOCITY":deltaM=inputData.time,deltaV=inputData.velocity-initialVelocity,deltaRamp=deltaM*deltaV*Snorm,deltaBase=deltaM*initialVelocity}},calculateAccelElement=function(){if(dM1>0){var deltaM1=deltaM*dM1,deltaS1=deltaBase*dM1+deltaRamp*dS1,deltaV1=deltaV*dV1,ElementStartTime=initialTime,ElementEndTime=ElementStartTime+deltaM1,ElementStartPosition=initialPosition,ElementEndPosition=ElementStartPosition+deltaS1,ElementStartVelocity=initialVelocity,ElementEndVelocity=ElementStartVelocity+deltaV1,avgVel=(ElementEndVelocity+ElementStartVelocity)/2,Ka=(deltaS1-avgVel*deltaM1)*(-2/Math.pow(deltaM1,3)),Kb=(-3*Ka*Math.pow(deltaM1,2)+deltaV1)/(2*deltaM1),Kc=ElementStartVelocity,Kd=ElementStartPosition,ElementEndAcc=6*Ka*(ElementEndTime-ElementStartTime)+2*Kb,ElementRmsAccel=Math.abs(ElementEndAcc),ElementRmsVel=Math.sqrt((Math.pow(ElementStartVelocity,2)+Math.pow(ElementEndVelocity,2))/2),ElementJerk=6*Ka,AccelElement={time_initial:ElementStartTime,time_final:ElementEndTime,velocity_initial:ElementStartVelocity,velocity_final:ElementEndVelocity,acceleration_initial:0,acceleration_final:ElementEndAcc,position_initial:ElementStartPosition,position_final:ElementEndPosition,motion_equation_third_order_coefficient:Ka,motion_equation_second_order_coefficient:Kb,motion_equation_first_order_coefficient:Kc,motion_equation_zero_order_coefficient:Kd,rms_acceleration:ElementRmsAccel,rms_velocity:ElementRmsVel,jerk:ElementJerk};outputData.ElementsData.push(AccelElement),initialTime=ElementEndTime,initialPosition=ElementEndPosition,initialVelocity=ElementEndVelocity}},calculateCruiseElement=function(){if(dM2>0){var deltaM2=deltaM*dM2,deltaS2=deltaBase*dM2+deltaRamp*dS2,deltaV2=deltaV*dV2,ElementStartTime=initialTime,ElementEndTime=ElementStartTime+deltaM2,ElementStartPosition=initialPosition,ElementEndPosition=ElementStartPosition+deltaS2,ElementStartVelocity=initialVelocity,ElementEndVelocity=ElementStartVelocity+deltaV2,Kb=(-0*Math.pow(deltaM2,2)+deltaV2)/(2*deltaM2),Kc=ElementStartVelocity,Kd=ElementStartPosition,ElementStartAcc=2*Kb,ElementEndAcc=0*(ElementEndTime-ElementStartTime)+2*Kb,ElementRmsAccel=Math.abs(ElementEndAcc),ElementRmsVel=Math.sqrt((Math.pow(ElementStartVelocity,2)+Math.pow(ElementEndVelocity,2))/2),CruiseElement={time_initial:ElementStartTime,time_final:ElementEndTime,velocity_initial:ElementStartVelocity,velocity_final:ElementEndVelocity,acceleration_initial:ElementStartAcc,acceleration_final:ElementEndAcc,position_initial:ElementStartPosition,position_final:ElementEndPosition,motion_equation_third_order_coefficient:0,motion_equation_second_order_coefficient:Kb,motion_equation_first_order_coefficient:Kc,motion_equation_zero_order_coefficient:Kd,rms_acceleration:ElementRmsAccel,rms_velocity:ElementRmsVel,jerk:0};outputData.ElementsData.push(CruiseElement),initialTime=ElementEndTime,initialPosition=ElementEndPosition,initialVelocity=ElementEndVelocity}},calculateDecelElement=function(){if(dM3>0){
var deltaM3=deltaM*dM3,deltaS3=deltaBase*dM3+deltaRamp*dS3,deltaV3=deltaV*dV3,ElementStartTime=initialTime,ElementEndTime=ElementStartTime+deltaM3,ElementStartPosition=initialPosition,ElementEndPosition=ElementStartPosition+deltaS3,ElementStartVelocity=initialVelocity,ElementEndVelocity=ElementStartVelocity+deltaV3,avgVel=(ElementEndVelocity+ElementStartVelocity)/2,Ka=(deltaS3-avgVel*deltaM3)*(-2/Math.pow(deltaM3,3)),Kb=(-3*Ka*Math.pow(deltaM3,2)+deltaV3)/(2*deltaM3),Kc=ElementStartVelocity,Kd=ElementStartPosition,ElementStartAcc=2*Kb,ElementRmsAccel=Math.abs(0),ElementRmsVel=Math.sqrt((Math.pow(ElementStartVelocity,2)+Math.pow(ElementEndVelocity,2))/2),ElementJerk=6*Ka,DecelElement={time_initial:ElementStartTime,time_final:ElementEndTime,velocity_initial:ElementStartVelocity,velocity_final:ElementEndVelocity,acceleration_initial:ElementStartAcc,acceleration_final:0,position_initial:ElementStartPosition,position_final:ElementEndPosition,motion_equation_third_order_coefficient:Ka,motion_equation_second_order_coefficient:Kb,motion_equation_first_order_coefficient:Kc,motion_equation_zero_order_coefficient:Kd,rms_acceleration:ElementRmsAccel,rms_velocity:ElementRmsVel,jerk:ElementJerk};outputData.ElementsData.push(DecelElement),initialTime=ElementEndTime,initialPosition=ElementEndPosition,initialVelocity=ElementEndVelocity}},calculateIndividualElements=function(){calculateAccelElement(),calculateCruiseElement(),calculateDecelElement()},updateFinalParams=function(){var ElementsData=outputData.ElementsData,ElementsLength=ElementsData.length,distance=ElementsData[ElementsLength-1].position_final-ElementsData[0].position_initial;outputData.SegmentData.distance=distance};return{calculate:function(inputData,initials){return outputData={},outputData.ElementsData=[],outputData.SegmentData={},accSkewFactor=inputData.skewPercentage/100||0,accFormFactor=1/(1-inputData.jerkPercentage/200)||1,initialTime=initials.time||0,initialVelocity=initials.velocity||0,initialPosition=initials.position||0,calculateDeltaElements(),calculateIntermediateVars(inputData),calculateIndividualElements(),updateFinalParams(),outputData}}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.CruiseSegment=function(){var initialTime,initialVelocity,initialPosition,segmentTime,segmentDistance,outputData={},calculateIntermediateVars=function(inputData){switch(inputData.permutation){case"TIME":segmentTime=inputData.time,segmentDistance=segmentTime*initialVelocity}},calculateElementsData=function(){var ElementStartTime=initialTime,ElementEndTime=ElementStartTime+segmentTime,ElementStartPosition=initialPosition,ElementEndPosition=ElementStartPosition+segmentDistance,ElementStartVelocity=initialVelocity,ElementEndVelocity=ElementStartVelocity,Kc=ElementStartVelocity,Kd=ElementStartPosition,ElementRmsAccel=Math.abs(0),ElementRmsVel=Math.sqrt((Math.pow(ElementStartVelocity,2)+Math.pow(ElementEndVelocity,2))/2),Element={time_initial:ElementStartTime,time_final:ElementEndTime,velocity_initial:ElementStartVelocity,velocity_final:ElementEndVelocity,acceleration_initial:0,acceleration_final:0,position_initial:ElementStartPosition,position_final:ElementEndPosition,motion_equation_third_order_coefficient:0,motion_equation_second_order_coefficient:0,motion_equation_first_order_coefficient:Kc,motion_equation_zero_order_coefficient:Kd,rms_acceleration:ElementRmsAccel,rms_velocity:ElementRmsVel};outputData.ElementsData.push(Element)},updateFinalParams=function(){var ElementsData=outputData.ElementsData,distance=ElementsData[0].position_final-ElementsData[0].position_initial;outputData.SegmentData.distance=distance};return{calculate:function(inputData,initials){return outputData={},outputData.ElementsData=[],outputData.SegmentData={},initialTime=initials.time||0,initialVelocity=initials.velocity||0,initialPosition=initials.position||0,calculateIntermediateVars(inputData),calculateElementsData(),updateFinalParams(),outputData}}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.ProfileIndexModel=function(){var initialTime,initialVelocity,initialPosition,finalVelocity,movedistance,movedtime,velFormFactor,velSkewFactor,dweltime,averageVel,cruiseVel,accelTime,decelTime,cruiseTime,accelDistance,decelDistance,cruiseDistance,dwelDistance,outputData=[],segmentData={},accelJerk=0,decelJerk=0,updateAccelDecelJerkVariables=function(selectedVal){if(selectedVal=parseInt(selectedVal),!isNaN(selectedVal))switch(selectedVal){case 0:accelJerk=0,decelJerk=0;break;case 1:accelJerk=40,decelJerk=40;break;case 2:accelJerk=100,decelJerk=100}},updateVelocityJerkSkewVars=function(inputData){var velJerkPerc,velSkewperc;velJerkPerc=void 0!=inputData.velocityJerk?inputData.velocityJerk:50,velSkewperc=void 0!=inputData.velocitySkew?inputData.velocitySkew:0,velFormFactor=velJerkPerc/100+1,velSkewFactor=velSkewperc/100},ResolveIntoElements=function(){if(accelDistance=decelDistance=cruiseDistance=dwelDistance=0,averageVel=(movedistance-initialVelocity*movedtime)/movedtime,0==(cruiseVel=averageVel*velFormFactor))console.log("cruise velocity zero");else{var totalAccelDecelTime=2*(cruiseVel*movedtime-(movedistance-initialVelocity*movedtime))/cruiseVel;if(accelTime=totalAccelDecelTime*(1+velSkewFactor)/2,decelTime=totalAccelDecelTime*(1-velSkewFactor)/2,cruiseTime=movedtime-totalAccelDecelTime,accelTime>0){var accelInputdata={},accelInitialValues={};accelInputdata.permutation="TIME_VELOCITY",accelInputdata.velocity=cruiseVel+initialVelocity,accelInputdata.time=accelTime,accelInputdata.jerkPercentage=accelJerk,accelInputdata.skewPercentage=0,accelInitialValues.position=initialPosition,accelInitialValues.velocity=initialVelocity,accelInitialValues.time=initialTime;var accelSegment=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(accelInputdata,accelInitialValues);accelDistance=accelSegment.SegmentData.distance,outputData=outputData.concat(accelSegment.ElementsData),segmentData.accel=accelSegment.ElementsData}if(cruiseTime>0){var cruiseInputdata={},cruiseInitialValues={};cruiseInputdata.permutation="TIME",cruiseInputdata.velocity=cruiseVel+initialVelocity,cruiseInputdata.time=cruiseTime,cruiseInputdata.skewPercentage=0,cruiseInitialValues.position=initialPosition+accelDistance,cruiseInitialValues.velocity=initialVelocity+cruiseVel,cruiseInitialValues.time=initialTime+accelTime;var cruiseSegment=COSMATT.ProfileCalculation.CruiseSegment.calculate(cruiseInputdata,cruiseInitialValues);cruiseDistance=cruiseSegment.SegmentData.distance,outputData=outputData.concat(cruiseSegment.ElementsData),segmentData.cruise=cruiseSegment.ElementsData}if(decelTime>0){var decelInputdata={},decelInitialValues={};decelInputdata.permutation="TIME_VELOCITY",decelInputdata.velocity=finalVelocity,decelInputdata.time=decelTime,decelInputdata.jerkPercentage=decelJerk,decelInputdata.skewPercentage=0,decelInitialValues.position=initialPosition+accelDistance+cruiseDistance,decelInitialValues.velocity=cruiseVel+initialVelocity,decelInitialValues.time=initialTime+accelTime+cruiseTime;var decelSegment=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(decelInputdata,decelInitialValues);decelDistance=decelSegment.SegmentData.distance,outputData=outputData.concat(decelSegment.ElementsData),segmentData.decel=decelSegment.ElementsData}if(dweltime>0){var dwelInputdata={},dwelInitialValues={};dwelInputdata.permutation="TIME",dwelInputdata.velocity=finalVelocity,dwelInputdata.time=dweltime,dwelInputdata.skewPercentage=0,dwelInitialValues.position=initialPosition+movedistance,dwelInitialValues.velocity=finalVelocity,dwelInitialValues.time=initialTime+movedtime;var dwelSegment=COSMATT.ProfileCalculation.CruiseSegment.calculate(dwelInputdata,dwelInitialValues);dwelDistance=dwelSegment.SegmentData.distance,outputData=outputData.concat(dwelSegment.ElementsData),segmentData.dwell=dwelSegment.ElementsData}}};return{calculate:function(inputData,initials){if(outputData=[],segmentData=[],movedistance=inputData.movedistance||0,movedtime=inputData.movedtime||0,dweltime=inputData.dweltime||0,updateVelocityJerkSkewVars(inputData),updateAccelDecelJerkVariables(inputData.smoothness),initialTime=initials.time||0,initialVelocity=initials.velocity||0,initialPosition=initials.position||0,finalVelocity=initialVelocity,!(movedistance>0&&movedtime>0))throw{message:"Time and distance needs to be positive values for Profile calculations"};return ResolveIntoElements(),{elementsData:outputData,segmentData:segmentData}}}}(),window.COSMATT=window.COSMATT||{},COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.configuration={DataFields:{moveDistance:"moveDistance",moveTime:"moveTime",dwellTime:"dwellTime",velocityFormFactor:"indexType",peakVelocity:"peakVelocity",rmsVelocity:"rmsVelocity",peakAccelaration:"peakAcc",rmsAccelaration:"rmsAcc",showAll:!0},Profiles:{profile1:"profile1",profile2:"profile2",profile3:"profile3",showAll:!0},GraphMode:{individualAxis:0,sameAxis:1},Graphs:{position:"pos",velocity:"vel",acceleration:"acc",jerk:"jerk",showAll:!0},GraphHandles:{position:"position",peakVelocity:"peakVelocity",moveTime:"moveTime",dwellTime:"dwellTime",showAll:!0},Smoothness:{automatic:0,standard:1,maximum:2},UnitData:{Velocity:"ANGULARVELOCITY",Position:"ANGULARDISTANCE",Acceleration:"ANGULARACCELERATION",Jerk:"ANGULARJERK"}},function($){$.fn.motionProfile=function(options){function updateInputs(params){if(params.movedistance){SIValues.movedistance=isNaN(parseFloat(params.movedistance.value))?"":parseFloat(params.movedistance.value);var $combobox=$inputControls.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");$combobox.setTextBoxValue(SIValues.movedistance),params.movedistance.unit&&(settings.moveDistanceUnit=params.movedistance.unit,$combobox.setDropBoxItem(settings.moveDistanceUnit))}if(params.movedtime){SIValues.movedtime=isNaN(parseFloat(params.movedtime.value))?"":parseFloat(params.movedtime.value);var $combobox=$inputControls.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox");$combobox.setTextBoxValue(SIValues.movedtime),params.movedtime.unit&&(settings.moveTimeUnit=params.movedtime.unit,$combobox.setDropBoxItem(settings.moveTimeUnit))}if(params.dweltime){SIValues.dweltime=isNaN(parseFloat(params.dweltime.value))?"":parseFloat(params.dweltime.value);var $combobox=$inputControls.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox");$combobox.setTextBoxValue(SIValues.dweltime),params.dweltime.unit&&(settings.dwellTimeUnit=params.dweltime.unit,$combobox.setDropBoxItem(settings.dwellTimeUnit))}if(params.velocityJerk){SIValues.velocityJerk=isNaN(parseFloat(params.velocityJerk.value))?"":parseFloat(params.velocityJerk.value);var $combobox=$inputControls.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");$combobox.setTextBoxValue(SIValues.velocityJerk)}calculateAndPaint()}function markAnswers(params){var cssClass;if(params.movedistance){cssClass=params.movedistance.status?"correct":"incorrect";var $moveDistanceInput=$inputControls.find("#moveDistanceInputContainer").find(".comboMoveDistance");$moveDistanceInput.addClass(cssClass),$moveDistanceInput.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),cssClass=params.movedistance.status?"fa-check correct":"fa-times incorrect";var convertedValueInRev=COSMATT.UNITCONVERTER.getUnitConvertedValue("ANGULARDISTANCE",params.movedistance.correctAnswer,COSMATT.UNITCONVERTER.getSIUnit("ANGULARDISTANCE").id,"revolution"),correctAns=params.movedistance.status?"":"("+convertedValueInRev+" rev)";$moveDistanceInput.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+cssClass+'"></span><span class="correct-answer">'+correctAns+"</span></span>")}if(params.movedtime){cssClass=params.movedtime.status?"correct":"incorrect";var $moveTimeInput=$inputControls.find("#moveTimeInputContainer").find(".comboMoveTime");$moveTimeInput.addClass(cssClass),$moveTimeInput.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),cssClass=params.movedtime.status?"fa-check correct":"fa-times incorrect";var correctAns=params.movedtime.status?"":"("+params.movedtime.correctAnswer+" sec)";$moveTimeInput.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+cssClass+'"></span><span class="correct-answer">'+correctAns+"</span></span>")}if(params.dweltime){cssClass=params.dweltime.status?"correct":"incorrect";var $dwellTimeInput=$inputControls.find("#dwellTimeInputContainer").find(".comboDwellTime");$dwellTimeInput.addClass(cssClass),$dwellTimeInput.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),cssClass=params.dweltime.status?"fa-check correct":"fa-times incorrect";var correctAns=params.dweltime.status?"":"("+params.dweltime.correctAnswer+" sec)";$dwellTimeInput.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+cssClass+'"></span><span class="correct-answer">'+correctAns+"</span></span>")}if(params.velocityJerk){cssClass=params.velocityJerk.status?"correct":"incorrect";var $velocityJerkInput=$inputControls.find("#indexTypeInputContainer").find(".comboIndexType");$velocityJerkInput.addClass(cssClass),$velocityJerkInput.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),cssClass=params.velocityJerk.status?"fa-check correct":"fa-times incorrect";var correctAns=params.velocityJerk.status?"":"("+params.velocityJerk.correctAnswer+" %)";$velocityJerkInput.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+cssClass+'"></span><span class="correct-answer">'+correctAns+"</span></span>")}$widgetContainer.find(".response-status").unbind("mouseenter").bind("mouseenter",function(e){var element=$(this)[0],targetOffset=$widgetContainer.offset();element.offsetWidth<element.scrollWidth&&showTooltip(e.pageX-targetOffset.left,e.pageY-targetOffset.top,element.innerText)}),$widgetContainer.find(".response-status").unbind("mouseleave").bind("mouseleave",function(e){$widgetContainer.find("#tooltip").remove()}),disableDraggablePoints()}function disableDraggablePoints(){if(posPlot){var posData=posPlot.getData();posData[1]&&(posData[1].hoverable=!1),posPlot.setupGrid(),posPlot.setData(posData),posPlot.draw()}if(velPlot){var velData=velPlot.getData();velData[1]&&(velData[1].hoverable=!1),velData[2]&&(velData[2].hoverable=!1),velData[3]&&(velData[3].hoverable=!1),velPlot.setupGrid(),velPlot.setData(velData),velPlot.draw()}updateYaxisLabelCSS()}function getProfileValues(){return{activeProfileIndex:settings.activeProfileIndex,moveDistance:SIValues.movedistance,moveTime:SIValues.movedtime,dwellTime:SIValues.dweltime,smoothness:SIValues.smoothness}}var defaults={activeProfileIndex:1,moveDistance:20,moveTime:10,dwellTime:2,graphMode:COSMATT.MotionProfile.configuration.GraphMode.individualAxis,showGraphs:[COSMATT.MotionProfile.configuration.Graphs.velocity],showGraphDragHandles:COSMATT.MotionProfile.configuration.GraphHandles.showAll,readOnlyInputs:!1,hideInputs:!1,showProfiles:COSMATT.MotionProfile.configuration.Profiles.showAll,smoothness:COSMATT.MotionProfile.configuration.Smoothness.automatic,showCheckAnswerButton:!1,assessmentMode:!1,moveDistanceUnit:"revolution",moveTimeUnit:"second",dwellTimeUnit:"second",peakVelocityUnit:"revolutionsperminute",rmsVelocityUnit:"revolutionsperminute",peakAccelarationUnit:"radianpersecondsquare",rmsAccelarationUnit:"radianpersecondsquare",velocityFactorUnit:"percentage",graphUnits:{Velocity:"radianpersecond",Position:"radian",Acceleration:"radianpersecondsquare",Jerk:"radianpersecondcube"}};options.assessmentMode&&(defaults.moveDistance="",defaults.moveTime="",defaults.dwellTime="",defaults.activeProfileIndex=3);var settings=$.extend(defaults,options);settings.graphModeVal=settings.graphMode;var $container=this,$widgetContainer=$('<div class="cosmatt-motionProfile unselectable" unselectable="on"></div>');$container.append($widgetContainer),$widgetContainer.append('<div id="profileButtons"><button class="btn btn-default profileButton" id="btn1">Profile 1</button><button class="btn btn-default profileButton" id="btn2">Profile 2</button><button class="btn btn-default profileButton" id="btn3">Profile 3</button></div><div id="graphContainer" class=""></div><div id="inputControls"></div>'),options.assessmentMode&&$widgetContainer.addClass("assessment-mode");var outputData,minVel,maxVel,posPlot,velPlot,accPlot,aioPlot,jerkPlot,uiValues={},SIValues={},initialValues={},calculatedValues={},$inputControls=$widgetContainer.find("#inputControls"),dwellStart=0,AreaUnderCurve=0,xmin=void 0!==settings.xmin?parseFloat(settings.xmin):15,posYMax=void 0!==settings.posYmin?parseFloat(settings.posYmin):30,velYMax=void 0!==settings.velYmin?parseFloat(settings.velYmin):8,accYMax=void 0!==settings.accYmin?parseFloat(settings.accYmin):2,jerkYMax=void 0!==settings.jerkYmin?parseFloat(settings.jerkYmin):3,dataSet={vel:{graphtype:"Velocity",label:"Velocity",data:[],color:"#f7252a",lines:{show:!0},hoverable:!1,clickable:!1},pos:{graphtype:"Position",label:"Position",data:[],color:"#619beb",series:{lines:{show:!1}},hoverable:!1,clickable:!1},acc:{graphtype:"Acceleration",label:"Acceleration",data:[],color:"#ff8a65",series:{lines:{show:!1}},hoverable:!1,clickable:!1},jerk:{graphtype:"Jerk",label:"Jerk",data:[],color:"#40cc43",series:{lines:{show:!1}},hoverable:!1,clickable:!1}},pointsDataSet={vel:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},pos:{graphtype:"Position",data:[],color:"#619beb",lines:{show:!1},points:{show:!0,fillColor:"#619beb"}},acc:{label:"Acceleration",data:[],color:"#ff8a65"},jerk:{label:"Jerk",data:[],color:"#40cc43"},dwell:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},movetime:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}}},chartOptions={series:{lines:{show:!0}},xaxis:{axisLabel:"Time (sec)",position:"bottom"},legend:{show:!0},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,bottom:1,right:0,left:1}}},resetProfileData=function(){for(var key in dataSet)dataSet.hasOwnProperty(key)&&(dataSet[key].data=[]);for(var key in pointsDataSet)pointsDataSet.hasOwnProperty(key)&&(pointsDataSet[key].data=[])},getHighestPoint=function(segmentData,axis,leastVal){var keys=Object.keys(segmentData),highestVal=0;for(var keyIndex in keys)if(keys.hasOwnProperty(keyIndex)){var finalVal=1.2*segmentData[keys[keyIndex]][0][axis];highestVal<finalVal&&(highestVal=finalVal)}return highestVal<leastVal&&(highestVal=leastVal),highestVal},getAioGraphPoints=function(){var aioGraphPointsArr=[];return settings.showGraphs.length>0&&(settings.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?aioGraphPointsArr.push(dataSet.pos,pointsDataSet.pos):aioGraphPointsArr.push([],[]),settings.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.velocity)>-1?aioGraphPointsArr.push(dataSet.vel,pointsDataSet.vel,pointsDataSet.dwell,pointsDataSet.movetime):aioGraphPointsArr.push([],[],[],[]),settings.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.acceleration)>-1?aioGraphPointsArr.push(dataSet.acc):aioGraphPointsArr.push([]),settings.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.jerk)>-1?aioGraphPointsArr.push(dataSet.jerk):aioGraphPointsArr.push([])),aioGraphPointsArr},updateGraph=function(segmentData){var highestTime=(Object.keys(segmentData),getHighestPoint(segmentData,"time_final",xmin));if(posPlot){var highestYPtPos=getHighestPoint(segmentData,"position_final",posYMax),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",settings.graphUnits.Position);conversionFactor&&1!=conversionFactor&&(highestYPtPos*=conversionFactor),posPlot.getOptions().yaxes[0].max=highestYPtPos,posPlot.getOptions().yaxes[0].min=-1*highestYPtPos,posPlot.getOptions().xaxes[0].max=highestTime,posPlot.setupGrid(),posPlot.setData([dataSet.pos,pointsDataSet.pos]),posPlot.draw()}if(velPlot){var highestYPtVel=getHighestPoint(segmentData,"velocity_final",velYMax),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",settings.graphUnits.Velocity);conversionFactor&&1!=conversionFactor&&(highestYPtVel*=conversionFactor),velPlot.getOptions().yaxes[0].max=highestYPtVel,velPlot.getOptions().yaxes[0].min=-1*highestYPtVel,velPlot.getOptions().xaxes[0].max=highestTime,velPlot.setupGrid(),velPlot.setData([dataSet.vel,pointsDataSet.vel,pointsDataSet.dwell,pointsDataSet.movetime]),velPlot.draw()}if(accPlot){var highestYPtAcc=getHighestPoint(segmentData,"acceleration_final",accYMax),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",settings.graphUnits.Acceleration);conversionFactor&&1!=conversionFactor&&(highestYPtAcc*=conversionFactor),accPlot.getOptions().yaxes[0].max=highestYPtAcc,accPlot.getOptions().yaxes[0].min=-1*highestYPtAcc,accPlot.getOptions().xaxes[0].max=highestTime,accPlot.setupGrid(),accPlot.setData([dataSet.acc]),accPlot.draw()}if(jerkPlot){var highestYPtJerk=getHighestPoint(segmentData,"jerk",jerkYMax),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",settings.graphUnits.Jerk);conversionFactor&&1!=conversionFactor&&(highestYPtJerk*=conversionFactor),jerkPlot.getOptions().yaxes[0].max=highestYPtJerk,jerkPlot.getOptions().yaxes[0].min=-1*highestYPtJerk,jerkPlot.getOptions().xaxes[0].max=highestTime,jerkPlot.setupGrid(),jerkPlot.setData([dataSet.jerk]),jerkPlot.draw()}if(aioPlot){for(var highestYPt,yaxesArr=aioPlot.getOptions().yaxes,i=0;i<yaxesArr.length;i++){switch(yaxesArr[i].axisLabel){case"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position).symbol+")":highestYPt=getHighestPoint(segmentData,"position_final",posYMax);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",settings.graphUnits.Position);conversionFactor&&1!=conversionFactor&&(highestYPt*=conversionFactor);break;case"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,settings.graphUnits.Velocity).symbol+")":highestYPt=getHighestPoint(segmentData,"velocity_final",velYMax);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",settings.graphUnits.Velocity);conversionFactor&&1!=conversionFactor&&(highestYPt*=conversionFactor);break;case"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,settings.graphUnits.Acceleration).symbol+")":highestYPt=getHighestPoint(segmentData,"acceleration_final",accYMax);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",settings.graphUnits.Acceleration);conversionFactor&&1!=conversionFactor&&(highestYPt*=conversionFactor);break;case"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,settings.graphUnits.Jerk).symbol+")":highestYPt=getHighestPoint(segmentData,"jerk",jerkYMax);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",settings.graphUnits.Jerk);conversionFactor&&1!=conversionFactor&&(highestYPt*=conversionFactor)}aioPlot.getOptions().yaxes[i].max=highestYPt,aioPlot.getOptions().yaxes[i].min=-1*highestYPt}aioPlot.getOptions().xaxes[0].max=highestTime,aioPlot.setupGrid(),aioPlot.setData(getAioGraphPoints()),aioPlot.draw()}},plotGraph=function(segmentData){attachResizeToPlots(segmentData)},attachResizeToPlots=function(segmentData){var timer,$graphContainer=$widgetContainer.find("#graphContainer"),triggerResize=!0,resetPlots=function(){posPlot&&(posPlot=posPlot.destroy()),velPlot&&(velPlot=velPlot.destroy()),accPlot&&(accPlot=accPlot.destroy()),jerkPlot&&(jerkPlot=jerkPlot.destroy()),aioPlot&&(aioPlot=aioPlot.destroy()),$graphContainer.find(".graphArea").remove(),segmentData?(plottingGraph($graphContainer,segmentData),triggerResize=!1):(plotEmptyGraph(),triggerResize=!1)};$graphContainer.resize(function(e){var ele=$(e.target);"graphContainer"===ele[0].id?ele.width()<777&&settings.showGraphs.length>1&&0===settings.graphModeVal&&0===settings.graphMode?(settings.graphMode=1,resetPlots()):ele.width()>777&&settings.showGraphs.length>1&&0===settings.graphModeVal&&1===settings.graphMode?(settings.graphMode=0,resetPlots()):triggerResize&&(triggerResize=!1,segmentData?plottingGraph($graphContainer,segmentData):plotEmptyGraph()):ele.hasClass("graphArea")&&ele.height(ele.width()),settings.autoResizer&&!timer&&(timer=setTimeout(function(){settings.autoResizer(),timer=void 0},500))}),$graphContainer.trigger("resize")},plottingGraph=function($graphContainer,segmentData){var posMax=getHighestPoint(segmentData,"position_final",posYMax),velMax=getHighestPoint(segmentData,"velocity_final",velYMax),accMax=getHighestPoint(segmentData,"acceleration_final",accYMax),timeMax=getHighestPoint(segmentData,"time_final",xmin),jerkMax=getHighestPoint(segmentData,"jerk",jerkYMax),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",settings.graphUnits.Position);if(conversionFactor&&1!=conversionFactor&&(posMax*=conversionFactor),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",settings.graphUnits.Velocity),conversionFactor&&1!=conversionFactor&&(velMax*=conversionFactor),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",settings.graphUnits.Acceleration),conversionFactor&&1!=conversionFactor&&(accMax*=conversionFactor),conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",settings.graphUnits.Jerk),conversionFactor&&1!=conversionFactor&&(jerkMax*=conversionFactor),0===$graphContainer.children().length)if(0===settings.graphMode)for(var i=0;i<settings.showGraphs.length;i++)$graphContainer.append('<div id="'+settings.showGraphs[i]+'Graph" class="graphArea"></div>');else 1===settings.graphMode&&$graphContainer.append('<div id="aioGraph" class="graphArea"></div>');for(var $graphArea=$graphContainer.find(".graphArea"),i=0;i<$graphArea.length;i++)0===i||i===$graphArea.length-1?$($graphArea[i]).css("width","calc("+100/$graphContainer.children().length+"% - 20px)"):$($graphArea[i]).css("width","calc("+100/$graphContainer.children().length+"% - 30px)");$graphArea.css("height",$graphArea.eq(0).width()),1===settings.graphMode&&0===settings.graphModeVal?$graphArea.css("max-height","300px"):0===settings.graphMode&&0===settings.graphModeVal&&$graphArea.css("max-height","400px");for(var $posGraph=$graphContainer.find("#posGraph"),$velGraph=$graphContainer.find("#velGraph"),$accGraph=$graphContainer.find("#accGraph"),$jerkGraph=$graphContainer.find("#jerkGraph"),$aioGraph=$graphContainer.find("#aioGraph"),dataSetKeys=Object.keys(dataSet),pointsDataSetKeys=Object.keys(pointsDataSet),i=0;i<dataSetKeys.length;i++)delete dataSet[dataSetKeys[i]].yaxis;for(var i=0;i<pointsDataSetKeys.length;i++)delete pointsDataSet[pointsDataSetKeys[i]].yaxis;if($posGraph.length>0){var posPlotOptions=$.extend(!0,{yaxis:{min:-1*posMax,max:posMax,position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position).symbol+")",tickFormatter:function(val,axis){var valStr=val.toString();return valStr.length>5&&"-"==valStr[0]||valStr.length>4&&"-"!=valStr[0]?val.toExponential(1):val}},xaxis:{min:0,max:timeMax}},chartOptions);posPlot=$.plot($posGraph,[dataSet.pos,pointsDataSet.pos],posPlotOptions),addDragDropFunctionalityPostion(posPlot)}if($velGraph.length>0){var velPlotOptions=$.extend(!0,{yaxis:{min:-1*velMax,max:velMax,position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,settings.graphUnits.Velocity).symbol+")",tickFormatter:function(val,axis){var valStr=val.toString();return valStr.length>5&&"-"==valStr[0]||valStr.length>4&&"-"!=valStr[0]?val.toExponential(1):val}},xaxis:{min:0,max:timeMax}},chartOptions);velPlot=$.plot($velGraph,[dataSet.vel,pointsDataSet.vel,pointsDataSet.dwell,pointsDataSet.movetime],velPlotOptions),addDragDropFunctionality(velPlot)}if($accGraph.length>0){var accPlotOptions=$.extend(!0,{yaxis:{min:-1*accMax,max:accMax,position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,settings.graphUnits.Acceleration).symbol+")",tickFormatter:function(val,axis){var valStr=val.toString();return valStr.length>5&&"-"==valStr[0]||valStr.length>4&&"-"!=valStr[0]?val.toExponential(1):val}},xaxis:{min:0,max:timeMax}},chartOptions);accPlot=$.plot($accGraph,[dataSet.acc],accPlotOptions)}if($jerkGraph.length>0){var jerkPlotOptions=$.extend(!0,{yaxis:{min:-1*jerkMax,max:jerkMax,position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,settings.graphUnits.Jerk).symbol+")",tickFormatter:function(val,axis){var valStr=val.toString();return valStr.length>5&&"-"==valStr[0]||valStr.length>4&&"-"!=valStr[0]?val.toExponential(1):val}},xaxis:{min:0,max:timeMax}},chartOptions);jerkPlot=$.plot($jerkGraph,[dataSet.jerk],jerkPlotOptions),addDragDropFunctionalityPostion(posPlot)}if($aioGraph.length>0){var yaxesOptions={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*posMax,max:posMax},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,settings.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*velMax,max:velMax},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,settings.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*accMax,max:accMax},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,settings.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*jerkMax,max:jerkMax}},aioOptions=$.extend(!0,{yaxes:function(){for(var yaxesArr=[],i=0;i<settings.showGraphs.length;i++)yaxesArr[i]=yaxesOptions[settings.showGraphs[i]],dataSet[settings.showGraphs[i]].yaxis=i+1,pointsDataSet[settings.showGraphs[i]].yaxis=i+1;return yaxesArr}(),xaxis:{min:0,max:timeMax}},chartOptions);aioOptions.legend={show:!0,backgroundOpacity:0},aioPlot=$.plot($aioGraph,getAioGraphPoints(),aioOptions),addDragDropFunctionalityAIO(aioPlot)}settings.onGraphPaint&&settings.onGraphPaint()},plotEmptyGraph=function(){var $graphContainer=$widgetContainer.find("#graphContainer");if(0===$graphContainer.children().length)if(0===settings.graphMode)for(var i=0;i<settings.showGraphs.length;i++)$graphContainer.append('<div id="'+settings.showGraphs[i]+'Graph" class="graphArea"></div>');else 1===settings.graphMode&&$graphContainer.append('<div id="aioGraph" class="graphArea"></div>')
;for(var $graphArea=$graphContainer.find(".graphArea"),i=0;i<$graphArea.length;i++)0===i||i===$graphArea.length-1?$($graphArea[i]).css("width","calc("+100/$graphContainer.children().length+"% - 20px)"):$($graphArea[i]).css("width","calc("+100/$graphContainer.children().length+"% - 30px)");$graphArea.css("height",$graphArea.eq(0).width()),1===settings.graphMode&&0===settings.graphModeVal?$graphArea.css("max-height","300px"):0===settings.graphMode&&0===settings.graphModeVal&&$graphArea.css("max-height","400px");for(var dataSetKeys=Object.keys(dataSet),pointsDataSetKeys=Object.keys(pointsDataSet),i=0;i<dataSetKeys.length;i++)delete dataSet[dataSetKeys[i]].yaxis;for(var i=0;i<pointsDataSetKeys.length;i++)delete pointsDataSet[pointsDataSetKeys[i]].yaxis;var $posGraph=$graphContainer.find("#posGraph"),$velGraph=$graphContainer.find("#velGraph"),$accGraph=$graphContainer.find("#accGraph"),$jerkGraph=$graphContainer.find("#jerkGraph"),$aioGraph=$graphContainer.find("#aioGraph");if($posGraph.length>0&&(posPlot=$.plot($posGraph,[dataSet.pos,pointsDataSet.pos],$.extend(!0,{yaxis:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position).symbol+")"},xaxis:{min:0}},chartOptions))),$velGraph.length>0&&(velPlot=$.plot($velGraph,[dataSet.vel,pointsDataSet.vel,pointsDataSet.dwell,pointsDataSet.movetime],$.extend(!0,{yaxis:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,settings.graphUnits.Velocity).symbol+")"},xaxis:{min:0}},chartOptions))),$accGraph.length>0&&(accPlot=$.plot($accGraph,[dataSet.acc],$.extend(!0,{yaxis:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,settings.graphUnits.Acceleration).symbol+")"},xaxis:{min:0}},chartOptions))),$jerkGraph.length>0&&(jerkPlot=$.plot($jerkGraph,[dataSet.jerk],$.extend(!0,{yaxis:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,settings.graphUnits.Jerk).symbol+")"},xaxis:{min:0}},chartOptions))),$aioGraph.length>0){var yaxesOptions={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,settings.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,settings.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,settings.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3}},aioOptions=$.extend(!0,{yaxes:function(){for(var yaxesArr=[],i=0;i<settings.showGraphs.length;i++)yaxesArr[i]=yaxesOptions[settings.showGraphs[i]],dataSet[settings.showGraphs[i]].yaxis=i+1,pointsDataSet[settings.showGraphs[i]].yaxis=i+1;return yaxesArr}(),xaxis:{min:0}},chartOptions);aioOptions.legend={show:!0,backgroundOpacity:0},aioPlot=$.plot($aioGraph,getAioGraphPoints(),aioOptions)}settings.onGraphPaint&&settings.onGraphPaint()},updateGraphData=function(element,timeSlice){for(var initialTime=element.time_initial,finalTime=element.time_final,Ka=element.motion_equation_third_order_coefficient,Kb=element.motion_equation_second_order_coefficient,Kc=element.motion_equation_first_order_coefficient,Kd=element.motion_equation_zero_order_coefficient,deltaTime=finalTime-initialTime,stepSize=deltaTime/timeSlice,time=0;time<deltaTime;time+=stepSize)dataSet.jerk.data.push([time+initialTime,6*Ka]),dataSet.acc.data.push([time+initialTime,6*Ka*time+2*Kb]),dataSet.vel.data.push([time+initialTime,3*Ka*Math.pow(time,2)+2*Kb*time+Kc]),dataSet.pos.data.push([time+initialTime,Ka*Math.pow(time,3)+Kb*Math.pow(time,2)+Kc*time+Kd])},updatePointsGraphData=function(profileElements){var velPonit,dwellTimePoint,moveTimePoint,posPoint;if(profileElements.cruise){velPonit=[(profileElements.cruise[0].time_final+profileElements.cruise[0].time_initial)/2,profileElements.cruise[0].velocity_final]}else if(profileElements.accel)for(var maxVelPoint=0,i=0;i<dataSet.vel.data.length;i++)dataSet.vel.data[i][1]>maxVelPoint&&(maxVelPoint=dataSet.vel.data[i][1],velPonit=dataSet.vel.data[i]);profileElements.dwell&&(dwellTimePoint=[profileElements.dwell[0].time_final,profileElements.dwell[0].velocity_final]),profileElements.decel?moveTimePoint=[profileElements.decel[0].time_final,profileElements.decel[0].velocity_final]:profileElements.cruise&&(moveTimePoint=[profileElements.cruise[0].time_final,profileElements.cruise[0].velocity_final]),posPoint=[parseFloat(SIValues.movedtime+SIValues.dweltime||0),parseFloat(SIValues.movedistance)],settings.showGraphDragHandles&&(settings.showGraphDragHandles.indexOf("position")>-1&&pointsDataSet.pos.data.push(posPoint),settings.showGraphDragHandles.indexOf("peakVelocity")>-1&&pointsDataSet.vel.data.push(JSON.parse(JSON.stringify(velPonit))),settings.showGraphDragHandles.indexOf("moveTime")>-1&&pointsDataSet.movetime.data.push(moveTimePoint),settings.showGraphDragHandles.indexOf("dwellTime")>-1&&pointsDataSet.dwell.data.push(dwellTimePoint))},updateCalculatedFields=function(profileElements){var peakVel,rmsVel,peakAcc,rmsAcc,t1,t2,t3,t4=profileElements.dwell?profileElements.dwell[0].time_final:0;t1=t2=t3=0;var a1,a2,a3,a4;if(a1=a2=a3=a4=0,!profileElements.cruise||profileElements.accel||profileElements.decel||(peakVel=profileElements.cruise[0].velocity_final,peakAcc=profileElements.cruise[0].acceleration_final,peakVel=parseFloat(peakVel),peakAcc=parseFloat(peakAcc),rmsVel=peakVel,rmsAcc=peakAcc,a2=profileElements.cruise[0].rms_acceleration,t2=profileElements.cruise[0].time_final),!profileElements.cruise&&profileElements.accel&&profileElements.decel&&(peakVel=profileElements.accel[0].velocity_final,peakAcc=profileElements.accel[0].acceleration_final,peakVel=parseFloat(peakVel),peakAcc=parseFloat(peakAcc),rmsVel=peakVel/Math.sqrt(3),rmsAcc=Math.sqrt(Math.pow(profileElements.accel[0].rms_acceleration,2)+Math.pow(profileElements.decel[0].rms_acceleration,2)),a1=profileElements.accel[0].rms_acceleration,a3=profileElements.decel[0].rms_acceleration,t1=profileElements.accel[0].time_final,t3=profileElements.decel[0].time_final,t2=t1),profileElements.cruise&&profileElements.accel&&profileElements.decel){peakVel=profileElements.cruise[0].velocity_final,peakAcc=profileElements.accel[0].acceleration_final,peakVel=parseFloat(peakVel),peakAcc=parseFloat(peakAcc),t1=profileElements.accel[0].time_final,t2=profileElements.cruise[0].time_final,t3=profileElements.decel[0].time_final;var T=Math.max(t1,t2,t3,t4);rmsVel=peakVel*Math.sqrt((t2-t1+(t3-t2+t1)/3)/T),a1=profileElements.accel[0].rms_acceleration,a2=profileElements.cruise[0].rms_acceleration,a3=profileElements.decel[0].rms_acceleration}var T=Math.max(t1,t2,t3,t4);rmsAcc=Math.sqrt((Math.pow(a1,2)*t1+Math.pow(a2,2)*(t2-t1)+Math.pow(a3,2)*(t3-t2)+Math.pow(a4,2)*(t4-t3))/T),calculatedValues.peakVel=parseFloat(peakVel),calculatedValues.peakAcc=parseFloat(peakAcc),calculatedValues.rmsVel=parseFloat(rmsVel),calculatedValues.rmsAcc=parseFloat(rmsAcc),updateCalculatedControls()};$container.find("#profileButtons").on("click",".profileButton",function(e){e.preventDefault();var btnId=$(this).attr("id");void 0!=btnId&&settings.activeProfileIndex!=parseInt(btnId.slice(3))&&(settings.activeProfileIndex=parseInt(btnId.slice(3)),settings.smoothness=$inputControls.find("#smoothnessInputContainer").find(".smoothnessDropDown").find(".smoothnessDDMenu")[0].selectedIndex,$container.find("#profileButtons").find(".profileButton.btn-primary").removeClass("btn-primary").addClass("btn-default"),$(this).addClass("btn-primary").removeClass("btn-default"),settings.velocityJerk=void 0,readUIValues(),calculateAndPaint())});var resetCalculatedValues=function(){calculatedValues.peakVel="",calculatedValues.peakAcc="",calculatedValues.rmsVel="",calculatedValues.rmsAcc="",updateCalculatedControls()},readUIValues=function(){void 0==SIValues.movedistance&&(SIValues.movedistance=uiValues.movedistance=isNaN(parseFloat(settings.moveDistance))?settings.moveDistance:parseFloat(settings.moveDistance)),void 0==SIValues.movedtime&&(SIValues.movedtime=uiValues.movedtime=isNaN(parseFloat(settings.moveTime))?settings.moveTime:parseFloat(settings.moveTime)),void 0==SIValues.dweltime&&(SIValues.dweltime=uiValues.dweltime=isNaN(parseFloat(settings.dwellTime))?settings.dwellTime:parseFloat(settings.dwellTime)),void 0===settings.velocityJerk?(updateIndexType(),SIValues.velocityJerk=uiValues.velocityJerk=isNaN(parseFloat(settings.indexType))?settings.indexType:parseFloat(settings.indexType)):SIValues.velocityJerk=uiValues.velocityJerk=isNaN(parseFloat(settings.velocityJerk))?settings.velocityJerk:parseFloat(settings.velocityJerk),void 0==SIValues.smoothness&&(SIValues.smoothness=uiValues.smoothness=isNaN(parseFloat(settings.smoothness))?settings.smoothness:parseFloat(settings.smoothness))},validateUIValues=function(){var bret=!0;return $inputControls.find(".input-entries .form-group").removeClass("has-error"),!isNaN(SIValues.movedistance)&&SIValues.movedistance>0||($inputControls.find("#moveDistanceInputContainer").addClass("has-error"),bret=!1),!isNaN(SIValues.movedtime)&&SIValues.movedtime>0||($inputControls.find("#moveTimeInputContainer").addClass("has-error"),bret=!1),!isNaN(SIValues.dweltime)&&SIValues.dweltime>=0||($inputControls.find("#dwellTimeInputContainer").addClass("has-error"),bret=!1),!isNaN(SIValues.velocityJerk)&&SIValues.velocityJerk>=0&&SIValues.velocityJerk<=100||($inputControls.find("#indexTypeInputContainer").addClass("has-error"),bret=!1),settings.assessmentMode&&$inputControls.find(".input-entries .form-group").removeClass("has-error"),bret},saveVelMaxMinPoints=function(profileElements){AreaUnderCurve=0;for(var prevWidth=dataSet.vel.data[0][0],i=1;i<dataSet.vel.data.length;i++)AreaUnderCurve+=(dataSet.vel.data[i][0]-prevWidth)*dataSet.vel.data[i][1],prevWidth=dataSet.vel.data[i][0];minVel=-1/0;var inputData=JSON.parse(JSON.stringify(SIValues));inputData.velocityJerk=100,inputData.velocityJerk=0;for(var minVelSegmentData=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(inputData,initialValues).segmentData,i=0;i<Object.keys(minVelSegmentData).length;i++)for(var j=0;j<minVelSegmentData[Object.keys(minVelSegmentData)[i]].length;j++)minVel<minVelSegmentData[Object.keys(minVelSegmentData)[i]][j].velocity_initial&&(minVel=minVelSegmentData[Object.keys(minVelSegmentData)[i]][j].velocity_initial);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",settings.graphUnits.Velocity);conversionFactor&&1!=conversionFactor&&(minVel=parseFloat(minVel)*conversionFactor),maxVel=2*minVel,profileElements.dwell&&(dwellStart=profileElements.dwell[0].time_initial)},showTooltip=function(x,y,contents){$('<div id="tooltip">'+contents+"</div>").css({top:y+5,left:x+15}).appendTo($widgetContainer).fadeIn(200)},addDragDropFunctionality=function(plot){var hoverItem=null,dragItem=null,prevItemIndex=null;$container.find("#velGraph").unbind("plothover").bind("plothover",function(event,pos,item){if(hoverItem=item,item){var targetOffset=$widgetContainer.offset();if(prevItemIndex!=item.seriesIndex)switch(item.seriesIndex){case 1:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Velocity Jerk"),prevItemIndex=item.seriesIndex;break;case 2:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Dwell Time"),prevItemIndex=item.seriesIndex;break;case 3:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Move Time"),prevItemIndex=item.seriesIndex}}else $widgetContainer.find("#tooltip").remove(),prevItemIndex=null;if(dragItem&&dragItem.seriesIndex){plot.getData();switch(dragItem.seriesIndex){case 1:var Vff;if(pos.y>=maxVel)Vff=100;else if(pos.y<=minVel)Vff=0;else{var xpos=parseFloat(SIValues.movedtime)-AreaUnderCurve/pos.y;Vff=xpos*pos.y*100/AreaUnderCurve}SIValues.velocityJerk=parseFloat(Math.ceil(Vff));break;case 2:var dwt;dwt=pos.x<dwellStart?0:parseFloat(pos.x-dwellStart),uiValues.dweltime=parseFloat(dwt),SIValues.dweltime=parseFloat(dwt);break;case 3:var mvtime;mvtime=pos.x<=0?1:pos.x,uiValues.movedtime=parseFloat(mvtime),SIValues.movedtime=parseFloat(mvtime)}calculateAndPaint(!0)}}),$container.find("#velGraph").unbind("mousedown").bind("mousedown",function(){if($widgetContainer.find("#tooltip").remove(),hoverItem)switch(hoverItem.seriesIndex){case 1:hoverItem.datapoint[1]>=minVel&&hoverItem.datapoint[1]<=maxVel&&(dragItem=hoverItem);break;case 2:hoverItem.datapoint[0]>=dwellStart&&(dragItem=hoverItem);break;case 3:hoverItem.datapoint[0]>0&&(dragItem=hoverItem)}}),$container.find("#velGraph").unbind("mouseup").bind("mouseup",function(){dragItem&&settings.onGraphDrag&&settings.onGraphDrag(),dragItem&&settings.assessmentMode&&responseNotifier(),dragItem=null}),$container.find("#velGraph").unbind("mouseleave").bind("mouseleave",function(){$container.find("#velGraph").mouseup()})},addDragDropFunctionalityPostion=function(plot){var hoverItem=null,dragItem=null,prevItemIndex=null;$container.find("#posGraph").unbind("plothover").bind("plothover",function(event,pos,item){if(hoverItem=item,item){var targetOffset=$widgetContainer.offset();if(prevItemIndex!=item.seriesIndex)switch(item.seriesIndex){case 1:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Move Distance"),prevItemIndex=item.seriesIndex}}else $widgetContainer.find("#tooltip").remove(),prevItemIndex=null;if(dragItem&&dragItem.seriesIndex){plot.getData();switch(dragItem.seriesIndex){case 1:var moveDis;moveDis=pos.y<=0?1:parseFloat(pos.y);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position,"SI");conversionFactor&&1!=conversionFactor&&(moveDis=parseFloat(moveDis)*conversionFactor),uiValues.movedistance=parseFloat(moveDis),SIValues.movedistance=parseFloat(moveDis)}calculateAndPaint(!0)}}),$container.find("#posGraph").unbind("mousedown").bind("mousedown",function(){if($widgetContainer.find("#tooltip").remove(),hoverItem)switch(hoverItem.seriesIndex){case 1:hoverItem.datapoint[1]>0&&(dragItem=hoverItem)}}),$container.find("#posGraph").unbind("mouseup").bind("mouseup",function(){dragItem&&settings.onGraphDrag&&settings.onGraphDrag(),dragItem&&settings.assessmentMode&&responseNotifier(),dragItem=null}),$container.find("#posGraph").unbind("mouseleave").bind("mouseleave",function(){$container.find("#posGraph").mouseup()})},addDragDropFunctionalityAIO=function(plot){var hoverItem=null,dragItem=null,prevItemIndex=null;$container.find("#aioGraph").unbind("plothover").bind("plothover",function(event,pos,item){if(hoverItem=item,item){var targetOffset=$widgetContainer.offset();if(prevItemIndex!=item.seriesIndex)switch(item.seriesIndex){case 1:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Move Distance"),prevItemIndex=item.seriesIndex;break;case 3:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Velocity Jerk"),prevItemIndex=item.seriesIndex;break;case 4:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Dwell Time"),prevItemIndex=item.seriesIndex;break;case 5:showTooltip(item.pageX-targetOffset.left,item.pageY-targetOffset.top,"Drag to change Move Time"),prevItemIndex=item.seriesIndex}}else $widgetContainer.find("#tooltip").remove(),prevItemIndex=null;if(dragItem&&dragItem.seriesIndex){plot.getData();switch(dragItem.seriesIndex){case 1:var moveDis;moveDis=pos.y<=0?1:parseFloat(pos.y);var conversionFactor=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,settings.graphUnits.Position,"SI");conversionFactor&&1!=conversionFactor&&(moveDis=parseFloat(moveDis)*conversionFactor),uiValues.movedistance=parseFloat(moveDis),SIValues.movedistance=parseFloat(moveDis);break;case 3:var Vff,yCordinate=settings.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?pos.y2:pos.y1;if(yCordinate>=maxVel)Vff=100;else if(yCordinate<=minVel)Vff=0;else{var xpos=parseFloat(SIValues.movedtime)-AreaUnderCurve/yCordinate;Vff=xpos*yCordinate*100/AreaUnderCurve}uiValues.velocityJerk=parseFloat(Math.ceil(Vff)),SIValues.velocityJerk=parseFloat(Math.ceil(Vff));break;case 4:var dwt;dwt=pos.x<dwellStart?0:parseFloat(pos.x-dwellStart),uiValues.dweltime=parseFloat(dwt),SIValues.dweltime=parseFloat(dwt);break;case 5:var mvtime;mvtime=pos.x<=0?1:pos.x,uiValues.movedtime=parseFloat(mvtime),SIValues.movedtime=parseFloat(mvtime)}calculateAndPaint(!0)}}),$container.find("#aioGraph").unbind("mousedown").bind("mousedown",function(){if($widgetContainer.find("#tooltip").remove(),hoverItem)switch(hoverItem.seriesIndex){case 1:hoverItem.datapoint[1]>0&&(dragItem=hoverItem);break;case 3:hoverItem.datapoint[1]>=minVel&&hoverItem.datapoint[1]<=maxVel&&(dragItem=hoverItem);break;case 4:hoverItem.datapoint[0]>=dwellStart&&(dragItem=hoverItem);break;case 5:hoverItem.datapoint[0]>0&&(dragItem=hoverItem)}}),$container.find("#aioGraph").unbind("mouseup").bind("mouseup",function(){dragItem&&settings.onGraphDrag&&settings.onGraphDrag(),dragItem&&settings.assessmentMode&&responseNotifier(),dragItem=null}),$container.find("#aioGraph").unbind("mouseleave").bind("mouseleave",function(){$container.find("#aioGraph").mouseup()})},updateYaxisLabelCSS=function(){if(posPlot){var $ylabel=$container.find("#posGraph .yaxisLabel"),width=Math.ceil($ylabel.width()>$ylabel.height()?$ylabel.width():$ylabel.height());width%2!=0&&(width++,$ylabel.width(width)),$ylabel.css("top","-3%")}if(velPlot){var $ylabel=$container.find("#velGraph .yaxisLabel"),width=Math.ceil($ylabel.width()>$ylabel.height()?$ylabel.width():$ylabel.height());width%2!=0&&(width++,$ylabel.width(width)),$ylabel.css("top","-3%")}if(accPlot){var $ylabel=$container.find("#accGraph .yaxisLabel"),width=Math.ceil($ylabel.width()>$ylabel.height()?$ylabel.width():$ylabel.height());width%2!=0&&(width++,$ylabel.width(width)),$ylabel.css("top","-3%")}if(jerkPlot){var $ylabel=$container.find("#jerkGraph .yaxisLabel"),width=Math.ceil($ylabel.width()>$ylabel.height()?$ylabel.width():$ylabel.height());width%2!=0&&(width++,$ylabel.width(width)),$ylabel.css("top","-3%")}if(aioPlot)for(var $ylabels=$container.find("#aioGraph .axisLabels"),i=0;i<$ylabels.length;i++){var $ylabel=$($ylabels[i]);if(!$ylabel.hasClass("xaxisLabel")){var width=Math.ceil($ylabel.width()>$ylabel.height()?$ylabel.width():$ylabel.height());width%2!=0&&(width++,$ylabel.width(width)),$ylabel.css("top","-3%")}}},calculateData=function(dataonly){outputData=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(SIValues,initialValues);var profileElements=outputData.elementsData,profileElementsLength=profileElements.length;if(profileElementsLength>0){resetProfileData();for(var element=0;element<profileElementsLength;element++)updateGraphData(profileElements[element],100)}updatePointsGraphData(outputData.segmentData),updateCalculatedFields(outputData.segmentData),convertDataToGraphDisplayUnits(dataSet),convertDataToGraphDisplayUnits(pointsDataSet),saveVelMaxMinPoints(outputData.segmentData),dataonly?updateGraph(outputData.segmentData):plotGraph(outputData.segmentData)},convertDataToGraphDisplayUnits=function(obj){for(var toUnits=settings.graphUnits,datakeys=Object.keys(obj),i=0;i<datakeys.length;i++){var conversionFactor=COSMATT.MotionProfile.configuration.UnitData[obj[datakeys[i]].graphtype]?COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData[obj[datakeys[i]].graphtype],"SI",toUnits[obj[datakeys[i]].graphtype]):void 0;if(conversionFactor&&1!=conversionFactor)for(var j=0;j<obj[datakeys[i]].data.length;j++)obj[datakeys[i]].data[j][1]*=conversionFactor}},updateIndexType=function(){switch(settings.activeProfileIndex=parseInt(settings.activeProfileIndex),settings.activeProfileIndex){case 1:settings.indexType=50;break;case 2:settings.indexType=100;break;case 3:settings.indexType=0}},inputControlsCallbackFn=function(){calculateAndPaint()},responseNotifier=function(){settings.assessmentMode&&settings.userResponseNotifier&&settings.userResponseNotifier({movedistance:{value:SIValues.movedistance,unit:settings.moveDistanceUnit},movedtime:{value:SIValues.movedtime,unit:settings.moveTimeUnit},dweltime:{value:SIValues.dweltime,unit:settings.dwellTimeUnit},velocityJerk:{value:SIValues.velocityJerk}})},updateCalculatedControls=function(){var control;control=$inputControls.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox"),SIValues.movedistance?control.setTextBoxValue(control.getValueInSelectedUnit(SIValues.movedistance)):control.setTextBoxValue(SIValues.movedistance),control=$inputControls.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox"),SIValues.movedtime?control.setTextBoxValue(control.getValueInSelectedUnit(SIValues.movedtime)):control.setTextBoxValue(SIValues.movedtime),control=$inputControls.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox"),SIValues.dweltime?control.setTextBoxValue(control.getValueInSelectedUnit(SIValues.dweltime)):control.setTextBoxValue(SIValues.dweltime),control=$inputControls.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox"),SIValues.velocityJerk?control.setTextBoxValue(control.getValueInSelectedUnit(SIValues.velocityJerk)):control.setTextBoxValue(SIValues.velocityJerk),control=$inputControls.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox"),calculatedValues.peakVel?control.setTextBoxValue(control.getValueInSelectedUnit(calculatedValues.peakVel)):control.setTextBoxValue(calculatedValues.peakVel),control=$inputControls.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox"),calculatedValues.rmsVel?control.setTextBoxValue(control.getValueInSelectedUnit(calculatedValues.rmsVel)):control.setTextBoxValue(calculatedValues.rmsVel),control=$inputControls.find("#peakAccInputContainer").find(".comboPeakAcc").data("unitsComboBox"),calculatedValues.peakAcc?control.setTextBoxValue(control.getValueInSelectedUnit(calculatedValues.peakAcc)):control.setTextBoxValue(calculatedValues.peakAcc),control=$inputControls.find("#rmsAccInputContainer").find(".comboRmsAcc").data("unitsComboBox"),calculatedValues.rmsAcc?control.setTextBoxValue(control.getValueInSelectedUnit(calculatedValues.rmsAcc)):control.setTextBoxValue(calculatedValues.rmsAcc)},handleProfilesVisibility=function(showProfiles,$profileButtons){if($profileButtons.find("button").hide(),"boolean"==typeof showProfiles)!0===showProfiles?$profileButtons.show():$profileButtons.hide();else if(showProfiles.length>0)for(var profile in showProfiles)profile=showProfiles[profile],$profileButtons.find("#btn"+profile.slice(profile.length-1)).show()},handleGraphDragHandles=function(showGraphDragHandles){"boolean"==typeof showGraphDragHandles&&(settings.showGraphDragHandles=!0===showGraphDragHandles?[COSMATT.MotionProfile.configuration.GraphHandles.position,COSMATT.MotionProfile.configuration.GraphHandles.peakVelocity,COSMATT.MotionProfile.configuration.GraphHandles.moveTime,COSMATT.MotionProfile.configuration.GraphHandles.dwellTime]:[])},makeInputsReadOnly=function(readOnlyInputsArr){if("boolean"==typeof readOnlyInputsArr&&(readOnlyInputsArr=!0===readOnlyInputsArr?[COSMATT.MotionProfile.configuration.DataFields.moveDistance,COSMATT.MotionProfile.configuration.DataFields.moveTime,COSMATT.MotionProfile.configuration.DataFields.dwellTime,COSMATT.MotionProfile.configuration.DataFields.velocityFormFactor,COSMATT.MotionProfile.configuration.DataFields.peakVelocity,COSMATT.MotionProfile.configuration.DataFields.rmsVelocity,COSMATT.MotionProfile.configuration.DataFields.peakAccelaration,COSMATT.MotionProfile.configuration.DataFields.rmsAccelaration]:[]),readOnlyInputsArr.length>0)for(var inputEle in readOnlyInputsArr)readOnlyInputsArr.hasOwnProperty(inputEle)&&(inputEle=readOnlyInputsArr[inputEle],$inputControls.find("#"+inputEle+"InputContainer").find(".combo"+inputEle.charAt(0).toUpperCase()+inputEle.slice(1)).data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}))},handleInputsVisibility=function(hideInputsArr){if("boolean"==typeof hideInputsArr&&(!0===hideInputsArr?$inputControls.hide():$inputControls.show()),hideInputsArr.length>0)for(var inputEle in hideInputsArr)hideInputsArr.hasOwnProperty(inputEle)&&(inputEle=hideInputsArr[inputEle],$inputControls.find("#"+inputEle+"InputContainer").hide())};!function(){var $inputControls=$widgetContainer.find("#inputControls");$inputControls.append('<form class="form-horizontal"> <div class="input-entries inputs"> <div class="form-group input-container" id="moveDistanceInputContainer"> <label for="moveDistance" class="control-label">Move Distance</label> <div class="combo-container comboMoveDistance"></div></div><div class="form-group input-container" id="moveTimeInputContainer"> <label for="moveTime" class="control-label">Move Time</label> <div class="combo-container comboMoveTime"></div></div><div class="form-group input-container" id="dwellTimeInputContainer"> <label for="dwellTime" class="control-label">Dwell Time</label> <div class="combo-container comboDwellTime"></div></div><div class="form-group input-container" id="indexTypeInputContainer"> <label for="indexType" class="control-label">Velocity Factor</label> <div class="combo-container comboIndexType"></div></div><div class="form-group input-container" id="smoothnessInputContainer"> <label for="smoothness" class="control-label">Smoothness</label> <div class="combo-container smoothnessDropDown"></div></div></div><div class="output-entries inputs"> <div class="form-group input-container" id="peakVelocityInputContainer"> <label for="peakVelocity" class="control-label">Peak Velocity</label> <div class="combo-container comboPeakVelocity"></div></div><div class="form-group input-container" id="rmsVelocityInputContainer"> <label for="rmsVelocity" class="control-label">RMS Velocity</label> <div class="combo-container comboRmsVelocity"></div></div><div class="form-group input-container" id="peakAccInputContainer"> <label for="peakAcc" class="control-label">Peak Acceleration</label> <div class="combo-container comboPeakAcc"></div></div><div class="form-group input-container" id="rmsAccInputContainer"> <label for="rmsAcc" class="control-label">RMS Acceleration</label> <div class="combo-container comboRmsAcc"></div></div></div></form>'),$inputControls.find("#moveDistanceInputContainer").find(".comboMoveDistance").unitsComboBox({unitType:"ANGULARDISTANCE",unit:settings.moveDistanceUnit,roundOfNumber:"2",value:settings.moveDistance,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?settings.moveDistanceUnit=this.unit:"textbox"==this.type&&(uiValues.movedistance=isNaN(parseFloat(this.value))?"":parseFloat(this.value),SIValues.movedistance=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),inputControlsCallbackFn()),responseNotifier())}}),$inputControls.find("#moveTimeInputContainer").find(".comboMoveTime").unitsComboBox({unitType:"TIME",unit:settings.moveTimeUnit,roundOfNumber:"2",value:settings.moveTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?settings.moveTimeUnit=this.unit:"textbox"==this.type&&(uiValues.movedtime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),SIValues.movedtime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),inputControlsCallbackFn()),responseNotifier())}}),$inputControls.find("#dwellTimeInputContainer").find(".comboDwellTime").unitsComboBox({unitType:"TIME",unit:settings.dwellTimeUnit,roundOfNumber:"2",value:settings.dwellTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?settings.dwellTimeUnit=this.unit:"textbox"==this.type&&(uiValues.dweltime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),SIValues.dweltime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),inputControlsCallbackFn()),responseNotifier())}}),$inputControls.find("#indexTypeInputContainer").find(".comboIndexType").unitsComboBox({unitType:"PERCENTAGE",unit:settings.velocityFactorUnit,roundOfNumber:"2",value:settings.indexType,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("textbox"==this.type&&(uiValues.velocityJerk=isNaN(parseFloat(this.value))?"":parseFloat(this.value),SIValues.velocityJerk=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?0:parseFloat(this.SIValue),inputControlsCallbackFn()),responseNotifier())}});var $smoothnessDD=$inputControls.find("#smoothnessInputContainer").find(".smoothnessDropDown");$smoothnessDD.append('<select class="form-control smoothnessDDMenu"><option value=automatic>Automatic<option value=standard>Standard<option value=maximum>Maximum</select>'),settings.smoothness&&$smoothnessDD.find("select option").eq(settings.smoothness).attr("selected",!0),$smoothnessDD.find("select").on("change",function(e){uiValues.smoothness=e.target.selectedIndex,SIValues.smoothness=e.target.selectedIndex,calculateAndPaint(!0)}),$inputControls.find("#peakVelocityInputContainer").find(".comboPeakVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:settings.peakVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(settings.peakVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),$inputControls.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:settings.rmsVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(settings.rmsVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),$inputControls.find("#peakAccInputContainer").find(".comboPeakAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:settings.peakAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(settings.peakAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),$inputControls.find("#rmsAccInputContainer").find(".comboRmsAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:settings.rmsAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(settings.rmsAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),$inputControls.resize(function(e){var ele=$(e.target);if(ele.width()<839){$widgetContainer.addClass("lowerResolution"),$inputControls.find(".input-entries").css("width","55%"),$inputControls.find(".output-entries").css("width","45%");var $comboBox=$inputControls.find(".input-container .combo-container .cosmatt-unitComboBox");$comboBox.find(".unitTextBox").css("max-width","100px"),$comboBox.find(".unitComboBox").css("max-width","100px")}else if(ele.width()>=839){$widgetContainer.removeClass("lowerResolution"),
$inputControls.find(".input-entries").css("width","50%"),$inputControls.find(".output-entries").css("width","50%");var $comboBox=$inputControls.find(".input-container .combo-container .cosmatt-unitComboBox");$comboBox.find(".unitTextBox").css("max-width","100px"),$comboBox.find(".unitComboBox").css("max-width","100px")}ele.width()<1239&&ele.width()>839?$widgetContainer.addClass("resizeon1240"):ele.width()>=1239&&$widgetContainer.removeClass("resizeon1240")}),$inputControls.width()<1239&&$inputControls.trigger("resize")}(),function($domContainer){var $profileButtons=$widgetContainer.find("#profileButtons");$profileButtons.find("#btn"+settings.activeProfileIndex).addClass("btn-primary").removeClass("btn-default"),settings.showProfiles&&handleProfilesVisibility(settings.showProfiles,$profileButtons),settings.showGraphDragHandles&&handleGraphDragHandles(settings.showGraphDragHandles),settings.readOnlyInputs&&makeInputsReadOnly(settings.readOnlyInputs),settings.hideInputs&&handleInputsVisibility(settings.hideInputs)}(),settings.showEditConfigButton&&function(){$("body").append('<div id="editConfigBtnContainer"><button class="btn btn-default editConfigBtn pull-right btn-lg" type="button" href="configWindow.html" data-target="#theModal" data-toggle="modal">Edit Configurations</div>')}(),settings.showCheckAnswerButton,readUIValues(),function(){initialValues.time=0,initialValues.position=0,initialValues.velocity=0}();var calculateAndPaint=function(dataonly,settimeout){validateUIValues()?settimeout?setTimeout(function(dataonly){calculateData()},0):calculateData(dataonly):(resetProfileData(),resetCalculatedValues(),setTimeout(function(dataonly){plotEmptyGraph(),attachResizeToPlots(!1)},0)),updateYaxisLabelCSS(),$container.on("resize",function(){updateYaxisLabelCSS()})};return calculateAndPaint(!1,!0),{ref:this,updateInputs:updateInputs,markAnswers:markAnswers,getProfileValues:getProfileValues}}}(jQuery),define("../libs/libs-frontend-motionprofile/dist/js/motionProfile.js",function(){}),define("cosmattmp",["css!../css/cosmattmp.css","../../bower_components/flot/jquery.flot.js","../../bower_components/flot/jquery.flot.resize.js","../../bower_components/flot-axislabels/jquery.flot.axislabels.js","css!../libs/libs-frontend-unitcombobox/dist/css/unitComboBox.css","../libs/libs-frontend-unitcombobox/dist/js/unitComboBox.js","css!../libs/libs-frontend-motionprofile/dist/css/motionProfile.css","../libs/libs-frontend-motionprofile/dist/js/motionProfile.js"],function(cosmattmpTemplateRef){cosmattmp=function(){"use strict";function init(elRoot,params,adaptor,htmlLayout,jsonContentObj,callback){activityAdaptor=adaptor;var jsonContent=jQuery.extend(!0,{},jsonContentObj);__processedJsonContent=__parseAndUpdateJSONContent(jsonContent,params,htmlLayout);var $questionContainer=$('<div class="row cosmattmp-engine"></div>'),$questionArea=$('<p class="col-sm-12 text-primary question-text"></p>'),$pluginArea=$('<div class="col-sm-12"></div>');$questionArea.html(__content.questionText),__content.appData.options.data.userResponseNotifier=userResponseHandler,__content.appData.options.data.autoResizer=autoResizeEngine,__pluginInstance=$pluginArea.motionProfile(__content.appData.options.data),$questionContainer.append($questionArea),$questionContainer.append($pluginArea),$(elRoot).html($questionContainer),callback&&callback()}function getConfig(){return __config}function autoResizeEngine(){activityAdaptor.autoResizeActivityIframe()}function userResponseHandler(callbackValue){for(var property in callbackValue)if(callbackValue.hasOwnProperty(property)){var interactionMinScore=__content.score.min,optionsCount=Object.keys(__content.optionsJSON).length,interactionMaxScore=__content.score.max/optionsCount,interactionId=getInteractionId(property);""!=interactionId&&(__content.userAnswersJSON[interactionId]={},__content.userAnswersJSON[interactionId].answer=callbackValue[property].value.toString(),void 0!=callbackValue[property].unit&&(__content.userAnswersJSON[interactionId].unit=callbackValue[property].unit.toString()),__content.userAnswersJSON[interactionId].correctanswer=__content.answersJSON[interactionId].correct.toString(),__content.userAnswersJSON[interactionId].maxscore=interactionMaxScore,Math.round(100*parseFloat(callbackValue[property].value))/100==parseFloat(__content.answersJSON[interactionId].correct)?(__content.userAnswersJSON[interactionId].score=interactionMaxScore,__content.userAnswersJSON[interactionId].status="correct"):(__content.userAnswersJSON[interactionId].score=interactionMinScore,__content.userAnswersJSON[interactionId].status="incorrect"))}__saveResults(!1)}function getInteractionId(interactionField){var interactions=__content.optionsJSON,interactionId="";for(interactionId in interactions)if(interactions[interactionId].type===interactionField)return interactionId;return""}function getStatus(){return __state.activitySubmitted||__state.activityPariallySubmitted}function handleSubmit(event){__saveResults(!0),activityAdaptor.showAnswers&&__markAnswers()}function showGrades(savedAnswer,reviewAttempt){__markAnswers()}function updateLastSavedResults(lastResults){var updatePluginVals={};$.each(lastResults.interactions,function(num,value){var interactionMinScore=__content.score.min,optionsCount=Object.keys(__content.optionsJSON).length,interactionMaxScore=__content.score.max/optionsCount,interactionId=value.id;__content.userAnswersJSON[interactionId]={},__content.userAnswersJSON[interactionId].answer=value.answer.toString(),__content.userAnswersJSON[interactionId].correctanswer=__content.answersJSON[interactionId].correct.toString(),__content.userAnswersJSON[interactionId].maxscore=interactionMaxScore,Math.round(100*parseFloat(value.answer))/100==parseFloat(__content.answersJSON[interactionId].correct)?(__content.userAnswersJSON[interactionId].score=interactionMaxScore,__content.userAnswersJSON[interactionId].status="correct"):(__content.userAnswersJSON[interactionId].score=interactionMinScore,__content.userAnswersJSON[interactionId].status="incorrect"),updatePluginVals[__content.optionsJSON[value.id].type]={value:value.answer},value.unit&&(updatePluginVals[__content.optionsJSON[value.id].type].unit=value.unit)}),__pluginInstance.updateInputs(updatePluginVals)}function __parseAndUpdateJSONContent(jsonContent,params,htmlLayout){jsonContent.content.displaySubmit=activityAdaptor.displaySubmit,__content.activityType=params.engineType,__content.layoutType=jsonContent.content.canvas.layout;var tagName=jsonContent.content.instructions[0].tag;__content.instructionText=jsonContent.content.instructions[0][tagName],__content.appData=jsonContent["app-data"],__content.score=jsonContent.meta.score;var questionText=jsonContent.content.canvas.data.questiondata[0].text,interactionId=[],interactionTag=[],parsedQuestionArray=$.parseHTML(jsonContent.content.canvas.data.questiondata[0].text),j=0;return $.each(parsedQuestionArray,function(i,el){"http://www.comprodls.com/m1.0/interaction/cosmattmp"===this.href&&(interactionId[j]=this.childNodes[0].nodeValue.trim(),__interactionIds.push(interactionId[j]),interactionTag[j]=this.outerHTML.replace(/"/g,"'"),j++)}),$.each(interactionId,function(i){var interactionId=this;questionText=questionText.replace(interactionTag[i],""),__content.answersJSON[interactionId]=jsonContent.responses[interactionId],__content.optionsJSON[interactionId]=jsonContent.content.interactions[interactionId]}),__content.questionText=questionText,jsonContent}function __saveResults(bSubmit){var uniqueId=activityAdaptor.getId(),answerJSON=__getAnswersJSON(!1);!0===bSubmit?activityAdaptor.submitResults(answerJSON,uniqueId,function(data,status){status===__constants.STATUS_NOERROR?(__state.activitySubmitted=!0,activityAdaptor.closeActivity(),__state.currentTries=0):__state.currentTries<__config.MAX_RETRIES&&(__state.currentTries++,__saveResults(bSubmit))}):activityAdaptor.savePartialResults(answerJSON,uniqueId,function(data,status){status===__constants.STATUS_NOERROR&&(__state.activityPariallySubmitted=!0)})}function __markAnswers(){var markAnswerObj={},userAnswers=__content.userAnswersJSON,options=__content.optionsJSON,interactions=Object.keys(__content.optionsJSON),answers=__content.answersJSON;interactions.forEach(function(element,index){userAnswers[element]&&userAnswers[element].status&&"correct"==userAnswers[element].status?markAnswerObj[options[element].type]={status:!0}:markAnswerObj[options[element].type]={status:!1},markAnswerObj[options[element].type].correctAnswer=answers[element].correct}),__pluginInstance.markAnswers(markAnswerObj)}function __getAnswersJSON(skipQuestion){var answers="",interactionArray=[],statusProgress=__constants.ACTIVITY_NOT_ATTEMPTED,statusEvaluation=__constants.ACTIVITY_INCORRECT,partiallyCorrect=!1,correct=!1;if(skipQuestion)answers="Not Answered";else{answers=__content.userAnswersJSON;for(var answerID in answers){var interaction={};interaction.id=answerID,interaction.answer=answers[answerID].answer,interaction.maxscore=answers[answerID].maxscore,interaction.score=answers[answerID].score,interaction.unit=answers[answerID].unit,interactionArray.push(interaction)}}var interactions=Object.keys(__content.optionsJSON);partiallyCorrect=interactions.some(function(element,index){if(answers[element]&&"correct"==answers[element].status)return!0}),correct=interactions.every(function(element,index){if(answers[element]&&"correct"==answers[element].status)return!0}),partiallyCorrect&&(statusEvaluation=__constants.ACTIVITY_PARTIALLY_CORRECT),correct&&(statusEvaluation=__constants.ACTIVITY_CORRECT);var response={interactions:interactionArray};return skipQuestion||(statusProgress=__constants.ACTIVITY_IN_PROGRESS),response.statusProgress=statusProgress,response.statusEvaluation=statusEvaluation,{response:response}}var activityAdaptor,__processedJsonContent,__pluginInstance,__config={MAX_RETRIES:10,RESIZE_MODE:"auto",RESIZE_HEIGHT:"580"},__state={currentTries:0,activityPariallySubmitted:!1,activitySubmitted:!1,radioButtonClicked:!1},__content={instructionText:"",score:{},appData:{},questionText:"",optionsJSON:{},answersJSON:{},userAnswersJSON:{},activityType:null},__constants={STATUS_NOERROR:"NO_ERROR",ACTIVITY_NOT_ATTEMPTED:"not_attempted",ACTIVITY_IN_PROGRESS:"in_progress",ACTIVITY_PARTIALLY_CORRECT:"partially_correct",ACTIVITY_CORRECT:"correct",ACTIVITY_INCORRECT:"incorrect",TEMPLATES:{cosmattmp:cosmattmpTemplateRef}},__interactionIds=[];return{init:init,getStatus:getStatus,getConfig:getConfig,handleSubmit:handleSubmit,showGrades:showGrades,updateLastSavedResults:updateLastSavedResults}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}("/*******************************************************\r\n * \r\n * ----------------------\r\n * Engine Renderer Styles\r\n * ----------------------\r\n *\r\n * These styles do not include any product-specific branding\r\n * and/or layout / design. They represent minimal structural\r\n * CSS which is necessary for a default rendering of an\r\n * MCQSC activity\r\n *\r\n * The styles are linked/depending on the presence of\r\n * certain elements (classes / ids / tags) in the DOM (as would\r\n * be injected via a valid MCQSC layout HTML and/or dynamically\r\n * created by the MCQSC engine JS)\r\n *\r\n *\r\n *******************************************************/\r\n\r\n\r\n/* .cosmattmp-engine .question-text{\r\n    color: #366894;\r\n    font-size: 1.286em;\r\n} */.cosmatt-unitComboBox {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.cosmatt-unitComboBox .form-control {\r\n  display: block;\r\n  height: 34px;\r\n  padding: 6px 12px;\r\n  font-size: 14px;\r\n  line-height: 1.42857143;\r\n  color: #555;\r\n  background-color: #fff;\r\n  background-image: none;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  -webkit-border-radius: 4px;\r\n}\r\n.cosmatt-unitComboBox .unitTextBox {\r\n  display: inline;\r\n  max-width: 100px;\r\n}\r\n.cosmatt-unitComboBox .unitComboBox {\r\n  display: inline;\r\n  max-width: 100px;\r\n  padding: 0 6px;\r\n  margin-left: 10px;\r\n}\r\n.cosmatt-unitComboBox .form-control[disabled],\r\n.cosmatt-unitComboBox .form-control[readonly] {\r\n  background-color: #eee;\r\n  opacity: 1;\r\n}\r\n.cosmatt-motionProfile {\n  position: relative;\n}\n.cosmatt-motionProfile.unselectable {\n  -moz-user-select: -moz-none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n}\n.cosmatt-motionProfile.assessment-mode {\n  box-shadow: 0 0 0 #ddd !important;\n  border: none !important;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal {\n  width: 100%;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs {\n  display: inline-block;\n  vertical-align: top;\n  padding-top: 15px;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs.output-entries {\n  width: 50%;\n  float: right;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs.output-entries .input-container {\n  float: right;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs.input-entries {\n  width: 50%;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container {\n  width: 100%;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .control-label {\n  width: 34%;\n  display: inline-block;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .combo-container {\n  padding-left: 15px;\n  width: 64%;\n  display: inline-block;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status {\n  display: inline-block;\n  padding-left: 8px;\n  font-size: 12px;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status .incorrect {\n  font-size: 14px;\n  color: #da1a33;\n  display: inline-block;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status .correct {\n  display: inline-block;\n  color: #388e3c;\n}\n.cosmatt-motionProfile #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status .correct-answer {\n  display: inline-block;\n  color: #388e3c;\n  padding-left: 5px;\n  font-weight: bold;\n}\n.cosmatt-motionProfile #inputControls .correct .cosmatt-unitComboBox .unitTextBox {\n  background-color: #f0fff0;\n  border-color: #7DC27D;\n}\n.cosmatt-motionProfile #inputControls .correct .cosmatt-unitComboBox .unitComboBox {\n  background-color: #f0fff0;\n  border-color: #7DC27D;\n}\n.cosmatt-motionProfile #inputControls .incorrect .cosmatt-unitComboBox .unitTextBox {\n  background-color: #fff0f0;\n  border-color: #A90329;\n}\n.cosmatt-motionProfile #inputControls .incorrect .cosmatt-unitComboBox .unitComboBox {\n  background-color: #fff0f0;\n  border-color: #A90329;\n}\n.cosmatt-motionProfile.resizeon1240 #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 32%;\n}\n.cosmatt-motionProfile.lowerResolution {\n  overflow: hidden;\n}\n.cosmatt-motionProfile.lowerResolution #inputControls .form-horizontal .inputs .input-container {\n  margin-bottom: 7px;\n}\n.cosmatt-motionProfile.lowerResolution #inputControls .form-horizontal .inputs .input-container .control-label {\n  display: block;\n  width: 100%;\n  text-align: left;\n  margin-left: 20%;\n}\n.cosmatt-motionProfile.lowerResolution #inputControls .form-horizontal .inputs .input-container .combo-container {\n  display: block;\n  width: 100%;\n  margin-left: 20%;\n  padding-left: 0;\n}\n.cosmatt-motionProfile.lowerResolution #inputControls .form-horizontal .inputs .input-container .combo-container .cosmatt-unitComboBox .response-status {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 32%;\n}\n.cosmatt-motionProfile #profileButtons {\n  margin: 10px 0;\n}\n.cosmatt-motionProfile .profileButton {\n  margin-right: 10px;\n}\n.cosmatt-motionProfile #graphContainer .graphArea {\n  height: 400px;\n  min-width: 10px;\n  display: inline-block;\n  margin: 0px 15px;\n  max-height: 400px;\n  min-height: 250px;\n}\n.cosmatt-motionProfile #graphContainer .graphArea:first-child {\n  margin-left: 0px !important;\n}\n.cosmatt-motionProfile #graphContainer .graphArea:last-child {\n  margin-right: 0px !important;\n}\n.cosmatt-motionProfile #graphContainer .graphArea .legend table {\n  pointer-events: none;\n  margin: 0px !important;\n  width: initial;\n}\n.cosmatt-motionProfile #graphContainer .graphArea .legend table tr {\n  background-color: transparent !important;\n  border-width: 0px !important;\n}\n.cosmatt-motionProfile #graphContainer .graphArea .legend table tr td {\n  border-width: 0px !important;\n  padding: 0px !important;\n  vertical-align: middle;\n}\n.cosmatt-motionProfile #graphContainer .graphArea .legend table tr td.legendColorBox div div {\n  border-radius: 0% !important;\n  width: 0 !important;\n}\n.cosmatt-motionProfile .smoothnessDropDown .smoothnessDDMenu {\n  max-width: 211px;\n  width: 64%;\n}\n.cosmatt-motionProfile #tooltip {\n  padding: 4px 10px !important;\n  background-color: rgba(0, 0, 0, 0.8) !important;\n  border: solid 1px #000 !important;\n  z-index: 100 !important;\n  font-size: 12px !important;\n  color: #fff !important;\n  -webkit-border-radius: 3px !important;\n  -moz-border-radius: 3px !important;\n  border-radius: 3px !important;\n  position: absolute;\n  display: none;\n}\n.cosmatt-motionProfile .control-label {\n  text-align: right;\n  margin-bottom: 0;\n  padding-top: 7px;\n}\n");