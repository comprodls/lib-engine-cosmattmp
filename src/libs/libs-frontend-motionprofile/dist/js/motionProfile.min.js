"use strict";var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.AccelDecelSegment=function(){var e,i,t,a,o,n,s,l,r,c,d,p,m,f,u,v,h,x,b,g,w,y,T={},C=function(){i=2/p-1,e=(1-i)*(1-m)/2,t=1-e-i,a=p*e/2,o=p*i,n=p*t/2,s=a/3*e,l=(o+2*a)/2*i,r=(1-n/3)*t,c=s+l+r,s/=c,l/=c,r/=c,d=.5/c},M=function(e){switch(e.permutation){case"TIME_DISTANCE":f=e.time,u=e.distance/f,v=w+2*(u-w)*d,h=v-w,x=f*w,b=e.distance-x;break;case"TIME_VELOCITY":f=e.time,h=e.velocity-w,b=f*h*c,x=f*w}},k=function(){if(e>0){var i=f*e,t=x*e+b*s,o=h*a,n=g,l=n+i,r=y,c=r+t,d=w,p=d+o,m=(p+d)/2,u=(t-m*i)*(-2/Math.pow(i,3)),v=(-3*u*Math.pow(i,2)+o)/(2*i),C=d,M=r,k=0,_=6*u*(l-n)+2*v,A=Math.abs(_),I=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),D=6*u,F={time_initial:n,time_final:l,velocity_initial:d,velocity_final:p,acceleration_initial:k,acceleration_final:_,position_initial:r,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:C,motion_equation_zero_order_coefficient:M,rms_acceleration:A,rms_velocity:I,jerk:D};T.ElementsData.push(F),g=l,y=c,w=p}},_=function(){if(i>0){var e=f*i,t=x*i+b*l,a=h*o,n=g,s=n+e,r=y,c=r+t,d=w,p=d+a,m=0,u=(-3*m*Math.pow(e,2)+a)/(2*e),v=d,C=r,M=2*u,k=6*m*(s-n)+2*u,_=Math.abs(k),A=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),I=6*m,D={time_initial:n,time_final:s,velocity_initial:d,velocity_final:p,acceleration_initial:M,acceleration_final:k,position_initial:r,position_final:c,motion_equation_third_order_coefficient:m,motion_equation_second_order_coefficient:u,motion_equation_first_order_coefficient:v,motion_equation_zero_order_coefficient:C,rms_acceleration:_,rms_velocity:A,jerk:I};T.ElementsData.push(D),g=s,y=c,w=p}},A=function(){if(t>0){var e=f*t,i=x*t+b*r,a=h*n,o=g,s=o+e,l=y,c=l+i,d=w,p=d+a,m=(p+d)/2,u=(i-m*e)*(-2/Math.pow(e,3)),v=(-3*u*Math.pow(e,2)+a)/(2*e),C=d,M=l,k=2*v,_=0,A=Math.abs(_),I=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),D=6*u,F={time_initial:o,time_final:s,velocity_initial:d,velocity_final:p,acceleration_initial:k,acceleration_final:_,position_initial:l,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:C,motion_equation_zero_order_coefficient:M,rms_acceleration:A,rms_velocity:I,jerk:D};T.ElementsData.push(F),g=s,y=c,w=p}},I=function(){k(),_(),A()},D=function(){var e=T.ElementsData,i=e.length,t=e[i-1].position_final-e[0].position_initial;T.SegmentData.distance=t},F=function(e,i){return T={},T.ElementsData=[],T.SegmentData={},m=e.skewPercentage/100||0,p=1/(1-e.jerkPercentage/200)||1,g=i.time||0,w=i.velocity||0,y=i.position||0,C(),M(e),I(),D(),T};return{calculate:F}}();var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.CruiseSegment=function(){var e,i,t,a,o,n={},s=function(e){switch(e.permutation){case"TIME":a=e.time,o=a*i}},l=function(){var s=e,l=s+a,r=t,c=r+o,d=i,p=d,m=0,f=0,u=d,v=r,h=0,x=0,b=Math.abs(x),g=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),w={time_initial:s,time_final:l,velocity_initial:d,velocity_final:p,acceleration_initial:h,acceleration_final:x,position_initial:r,position_final:c,motion_equation_third_order_coefficient:m,motion_equation_second_order_coefficient:f,motion_equation_first_order_coefficient:u,motion_equation_zero_order_coefficient:v,rms_acceleration:b,rms_velocity:g};n.ElementsData.push(w)},r=function(){var e=n.ElementsData,i=e[0].position_final-e[0].position_initial;n.SegmentData.distance=i},c=function(a,o){return n={},n.ElementsData=[],n.SegmentData={},e=o.time||0,i=o.velocity||0,t=o.position||0,s(a),l(),r(),n};return{calculate:c}}();var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.ProfileIndexModel=function(){var e,i,t,a,o,n,s,l,r,c,d,p,m,f,u,v,h,x,b=[],g={},w=0,y=0,T=function(e){if(e=parseInt(e),!isNaN(e))switch(e){case 0:w=0,y=0;break;case 1:w=40,y=40;break;case 2:w=100,y=100}},C=function(e){var i,t;i=void 0!=e.velocityJerk?e.velocityJerk:50,t=void 0!=e.velocitySkew?e.velocitySkew:0,s=i/100+1,l=t/100},M=function(){if(u=v=h=x=0,c=(o-i*n)/n,d=c*s,0==d)console.log("cruise velocity zero");else{var T=2*(d*n-(o-i*n))/d;if(p=T*(1+l)/2,m=T*(1-l)/2,f=n-T,p>0){var C={},M={};C.permutation="TIME_VELOCITY",C.velocity=d+i,C.time=p,C.jerkPercentage=w,C.skewPercentage=0,M.position=t,M.velocity=i,M.time=e;var k=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(C,M);u=k.SegmentData.distance,b=b.concat(k.ElementsData),g.accel=k.ElementsData}if(f>0){var _={},A={};_.permutation="TIME",_.velocity=d+i,_.time=f,_.skewPercentage=0,A.position=t+u,A.velocity=i+d,A.time=e+p;var I=COSMATT.ProfileCalculation.CruiseSegment.calculate(_,A);h=I.SegmentData.distance,b=b.concat(I.ElementsData),g.cruise=I.ElementsData}if(m>0){var D={},F={};D.permutation="TIME_VELOCITY",D.velocity=a,D.time=m,D.jerkPercentage=y,D.skewPercentage=0,F.position=t+u+h,F.velocity=d+i,F.time=e+p+f;var P=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(D,F);v=P.SegmentData.distance,b=b.concat(P.ElementsData),g.decel=P.ElementsData}if(r>0){var O={},B={};O.permutation="TIME",O.velocity=a,O.time=r,O.skewPercentage=0,B.position=t+o,B.velocity=a,B.time=e+n;var V=COSMATT.ProfileCalculation.CruiseSegment.calculate(O,B);x=V.SegmentData.distance,b=b.concat(V.ElementsData),g.dwell=V.ElementsData}}},k=function(s,l){if(b=[],g=[],o=s.movedistance||0,n=s.movedtime||0,r=s.dweltime||0,C(s),T(s.smoothness),e=l.time||0,i=l.velocity||0,t=l.position||0,a=i,!(o>0&&n>0))throw{message:"Time and distance needs to be positive values for Profile calculations"};return M(),{elementsData:b,segmentData:g}};return{calculate:k}}();var COSMATT=COSMATT||{};COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.configuration={DataFields:{moveDistance:"moveDistance",moveTime:"moveTime",dwellTime:"dwellTime",velocityFormFactor:"indexType",peakVelocity:"peakVelocity",rmsVelocity:"rmsVelocity",peakAccelaration:"peakAcc",rmsAccelaration:"rmsAcc",showAll:!0},Profiles:{profile1:"profile1",profile2:"profile2",profile3:"profile3",showAll:!0},GraphMode:{individualAxis:0,sameAxis:1},Graphs:{position:"pos",velocity:"vel",acceleration:"acc",jerk:"jerk",showAll:!0},GraphHandles:{position:"position",peakVelocity:"peakVelocity",moveTime:"moveTime",dwellTime:"dwellTime",showAll:!0},Smoothness:{automatic:0,standard:1,maximum:2}},function(e){e.fn.motionProfile=function(i){function t(e){if(e.movedistance){b.movedistance=isNaN(parseFloat(e.movedistance.value))?"":parseFloat(e.movedistance.value);var i=y.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");i.setTextBoxValue(b.movedistance),e.movedistance.unit&&(s.moveDistanceUnit=e.movedistance.unit,i.setDropBoxItem(s.moveDistanceUnit))}if(e.movedtime){b.movedtime=isNaN(parseFloat(e.movedtime.value))?"":parseFloat(e.movedtime.value);var i=y.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox");i.setTextBoxValue(b.movedtime),e.movedtime.unit&&(s.moveTimeUnit=e.movedtime.unit,i.setDropBoxItem(s.moveTimeUnit))}if(e.dweltime){b.dweltime=isNaN(parseFloat(e.dweltime.value))?"":parseFloat(e.dweltime.value);var i=y.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox");i.setTextBoxValue(b.dweltime),e.dweltime.unit&&(s.dwellTimeUnit=e.dweltime.unit,i.setDropBoxItem(s.dwellTimeUnit))}if(e.velocityJerk){b.velocityJerk=isNaN(parseFloat(e.velocityJerk.value))?"":parseFloat(e.velocityJerk.value);var i=y.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");i.setTextBoxValue(b.velocityJerk)}pe()}function a(e){var i;if(e.movedistance){i=e.movedistance.status?"correct":"incorrect";var t=y.find("#moveDistanceInputContainer").find(".comboMoveDistance");t.addClass(i),t.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}),i=e.movedistance.status?"fa-check correct":"fa-times incorrect";var a=e.movedistance.status?"":"("+e.movedistance.correctAnswer+" rad)";t.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+a+"</span></span>")}if(e.movedtime){i=e.movedtime.status?"correct":"incorrect";var n=y.find("#moveTimeInputContainer").find(".comboMoveTime");n.addClass(i),n.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}),i=e.movedtime.status?"fa-check correct":"fa-times incorrect";var a=e.movedtime.status?"":"("+e.movedtime.correctAnswer+" sec)";n.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+a+"</span></span>")}if(e.dweltime){i=e.dweltime.status?"correct":"incorrect";var s=y.find("#dwellTimeInputContainer").find(".comboDwellTime");s.addClass(i),s.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}),i=e.dweltime.status?"fa-check correct":"fa-times incorrect";var a=e.dweltime.status?"":"("+e.dweltime.correctAnswer+" sec)";s.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+a+"</span></span>")}if(e.velocityJerk){i=e.velocityJerk.status?"correct":"incorrect";var l=y.find("#indexTypeInputContainer").find(".comboIndexType");l.addClass(i),l.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}),i=e.velocityJerk.status?"fa-check correct":"fa-times incorrect";var a=e.velocityJerk.status?"":"("+e.velocityJerk.correctAnswer+" %)";l.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+a+"</span></span>")}o()}function o(){if(m){var e=m.getData();e[1]&&(e[1].hoverable=!1),m.setupGrid(),m.setData(e),m.draw()}if(f){var i=f.getData();i[1]&&(i[1].hoverable=!1),i[2]&&(i[2].hoverable=!1),i[3]&&(i[3].hoverable=!1),f.setupGrid(),f.setData(i),f.draw()}}var n={activeProfileIndex:1,moveDistance:20,moveTime:10,dwellTime:2,graphMode:COSMATT.MotionProfile.configuration.GraphMode.individualAxis,showGraphs:[COSMATT.MotionProfile.configuration.Graphs.velocity],showGraphDragHandles:COSMATT.MotionProfile.configuration.GraphHandles.showAll,readOnlyInputs:!1,hideInputs:!1,showProfiles:COSMATT.MotionProfile.configuration.Profiles.showAll,smoothness:COSMATT.MotionProfile.configuration.Smoothness.automatic,showCheckAnswerButton:!1,assessmentMode:!1,moveDistanceUnit:"radian",moveTimeUnit:"second",dwellTimeUnit:"second",peakVelocityUnit:"radianpersecond",rmsVelocityUnit:"radianpersecond",peakAccelarationUnit:"radianpersecondsquare",rmsAccelarationUnit:"radianpersecondsquare"};i.assessmentMode&&(n.moveDistance="",n.moveTime="",n.dwellTime="",n.activeProfileIndex=3);var s=e.extend(n,i);s.graphModeVal=s.graphMode;var l=this,r=e('<div class="cosmatt-motionProfile unselectable" unselectable="on"></div>');l.append(r),r.append('<div id="profileButtons"><button class="btn btn-default profileButton" id="btn1">Profile 1</button><button class="btn btn-default profileButton" id="btn2">Profile 2</button><button class="btn btn-default profileButton" id="btn3">Profile 3</button></div><div id="graphContainer" class=""></div><div id="inputControls"></div>'),i.assessmentMode&&r.addClass("assessment-mode");var c,d,p,m,f,u,v,h,x={},b={},g={},w={},y=r.find("#inputControls"),T=0,C=0,M=void 0!==s.xmin?parseFloat(s.xmin):15,k=void 0!==s.posYmin?parseFloat(s.posYmin):30,_=void 0!==s.velYmin?parseFloat(s.velYmin):8,A=void 0!==s.accYmin?parseFloat(s.accYmin):2,I=void 0!==s.jerkYmin?parseFloat(s.jerkYmin):3,D={vel:{label:"Velocity",data:[],color:"#f7252a",lines:{show:!0},hoverable:!1,clickable:!1},pos:{label:"Position",data:[],color:"#619beb",series:{lines:{show:!1}},hoverable:!1,clickable:!1},acc:{label:"Acceleration",data:[],color:"#ff8a65",series:{lines:{show:!1}},hoverable:!1,clickable:!1},jerk:{label:"Jerk",data:[],color:"#40cc43",series:{lines:{show:!1}},hoverable:!1,clickable:!1}},F={vel:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},pos:{data:[],color:"#619beb",lines:{show:!1},points:{show:!0,fillColor:"#619beb"}},acc:{label:"Acceleration",data:[],color:"#ff8a65"},jerk:{label:"Jerk",data:[],color:"#40cc43"},dwell:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},movetime:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}}},P={series:{lines:{show:!0}},xaxis:{axisLabel:"Time (sec)",position:"bottom"},legend:{show:!0},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,bottom:1,right:0,left:1}}},O=function(){for(var e in D)D.hasOwnProperty(e)&&(D[e].data=[]);for(var e in F)F.hasOwnProperty(e)&&(F[e].data=[])},B=function(e,i,t){var a=Object.keys(e),o=0;for(var n in a)if(a.hasOwnProperty(n)){var s=1.2*e[a[n]][0][i];s>o&&(o=s)}return t>o&&(o=t),o},V=function(){var e=[];return s.showGraphs.length>0&&(s.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?e.push(D.pos,F.pos):e.push([],[]),s.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.velocity)>-1?e.push(D.vel,F.vel,F.dwell,F.movetime):e.push([],[],[],[]),s.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.acceleration)>-1?e.push(D.acc):e.push([]),s.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.jerk)>-1?e.push(D.jerk):e.push([])),e},S=function(e){var i=(Object.keys(e),B(e,"time_final",M));if(m){var t=B(e,"position_final",k);m.getOptions().yaxes[0].max=t,m.getOptions().yaxes[0].min=-1*t,m.getOptions().xaxes[0].max=i,m.setupGrid(),m.setData([D.pos,F.pos]),m.draw()}if(f){var a=B(e,"velocity_final",_);f.getOptions().yaxes[0].max=a,f.getOptions().yaxes[0].min=-1*a,f.getOptions().xaxes[0].max=i,f.setupGrid(),f.setData([D.vel,F.vel,F.dwell,F.movetime]),f.draw()}if(u){var o=B(e,"acceleration_final",A);u.getOptions().yaxes[0].max=o,u.getOptions().yaxes[0].min=-1*o,u.getOptions().xaxes[0].max=i,u.setupGrid(),u.setData([D.acc]),u.draw()}if(h){var n=B(e,"jerk",I);h.getOptions().yaxes[0].max=n,h.getOptions().yaxes[0].min=-1*n,h.getOptions().xaxes[0].max=i,h.setupGrid(),h.setData([D.jerk]),h.draw()}if(v){for(var s,l=v.getOptions().yaxes,r=0;r<l.length;r++){switch(l[r].axisLabel){case"Position (rad)":s=B(e,"position_final",k);break;case"Velocity (rad/sec)":s=B(e,"velocity_final",_);break;case"Acceleration (rad/sec^2)":s=B(e,"acceleration_final",A);break;case"Jerk (rad/sec^3)":s=B(e,"jerk",I)}v.getOptions().yaxes[r].max=s,v.getOptions().yaxes[r].min=-1*s}v.getOptions().xaxes[0].max=i,v.setupGrid(),v.setData(V()),v.draw()}},G=function(e){N(e)},N=function(i){var t=r.find("#graphContainer"),a=!0,o=function(){m&&(m=m.destroy()),f&&(f=f.destroy()),u&&(u=u.destroy()),h&&(h=h.destroy()),v&&(v=v.destroy()),t.find(".graphArea").remove(),i?(L(t,i),a=!1):(J(),a=!1)};t.resize(function(n){var l=e(n.target);"graphContainer"===l[0].id?l.width()<777&&s.showGraphs.length>1&&0===s.graphModeVal&&0===s.graphMode?(s.graphMode=1,o()):l.width()>777&&s.showGraphs.length>1&&0===s.graphModeVal&&1===s.graphMode?(s.graphMode=0,o()):a&&(a=!1,i?L(t,i):J()):l.hasClass("graphArea")&&l.height(l.width())}),t.trigger("resize")},L=function(i,t){var a=B(t,"position_final",k),o=B(t,"velocity_final",_),n=B(t,"acceleration_final",A),l=B(t,"time_final",M),r=B(t,"jerk",I);if(0===i.children().length)if(0===s.graphMode)for(var c=0;c<s.showGraphs.length;c++)i.append('<div id="'+s.showGraphs[c]+'Graph" class="graphArea"></div>');else 1===s.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');for(var d=i.find(".graphArea"),c=0;c<d.length;c++)0===c||c===d.length-1?e(d[c]).css("width","calc("+100/i.children().length+"% - 20px)"):e(d[c]).css("width","calc("+100/i.children().length+"% - 30px)");d.css("height",d.eq(0).width()),1===s.graphMode&&0===s.graphModeVal?d.css("max-height","300px"):0===s.graphMode&&0===s.graphModeVal&&d.css("max-height","400px");for(var p=i.find("#posGraph"),x=i.find("#velGraph"),b=i.find("#accGraph"),g=i.find("#jerkGraph"),w=i.find("#aioGraph"),y=Object.keys(D),T=Object.keys(F),c=0;c<y.length;c++)delete D[y[c]].yaxis;for(var c=0;c<T.length;c++)delete F[T[c]].yaxis;if(p.length>0){var C=e.extend(!0,{yaxis:{min:-1*a,max:a,position:"left",axisLabel:"Position (rad)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:l}},P);m=e.plot(p,[D.pos,F.pos],C),Q(m)}if(x.length>0){var O=e.extend(!0,{yaxis:{min:-1*o,max:o,position:"left",axisLabel:"Velocity (rad/sec)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:l}},P);f=e.plot(x,[D.vel,F.vel,F.dwell,F.movetime],O),X(f)}if(b.length>0){var S=e.extend(!0,{yaxis:{min:-1*n,max:n,position:"left",axisLabel:"Acceleration (rad/sec^2)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:l}},P);u=e.plot(b,[D.acc],S)}if(g.length>0&&setTimeout(function(){var i=e.extend(!0,{yaxis:{min:-1*r,max:r,position:"left",axisLabel:"Jerk (rad/sec^3)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:l}},P);h=e.plot(g,[D.jerk],i),Q(m)},4e3),w.length>0){var G={pos:{position:"left",axisLabel:"Position (rad)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*a,max:a},vel:{position:"left",axisLabel:"Velocity (rad/sec)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*o,max:o},acc:{position:"left",axisLabel:"Acceleration (rad/sec^2)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*n,max:n},jerk:{position:"left",axisLabel:"Jerk (rad/sec^3)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*r,max:r}},N=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<s.showGraphs.length;i++)e[i]=G[s.showGraphs[i]],D[s.showGraphs[i]].yaxis=i+1,F[s.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0,max:l}},P);N.legend={show:!0,backgroundOpacity:0},v=e.plot(w,V(),N),K(v)}s.onGraphPaint&&s.onGraphPaint()},J=function(){var i=r.find("#graphContainer");if(0===i.children().length)if(0===s.graphMode)for(var t=0;t<s.showGraphs.length;t++)i.append('<div id="'+s.showGraphs[t]+'Graph" class="graphArea"></div>');else 1===s.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');for(var a=i.find(".graphArea"),t=0;t<a.length;t++)0===t||t===a.length-1?e(a[t]).css("width","calc("+100/i.children().length+"% - 20px)"):e(a[t]).css("width","calc("+100/i.children().length+"% - 30px)");a.css("height",a.eq(0).width()),1===s.graphMode&&0===s.graphModeVal?a.css("max-height","300px"):0===s.graphMode&&0===s.graphModeVal&&a.css("max-height","400px");for(var o=Object.keys(D),n=Object.keys(F),t=0;t<o.length;t++)delete D[o[t]].yaxis;for(var t=0;t<n.length;t++)delete F[n[t]].yaxis;var l=i.find("#posGraph"),c=i.find("#velGraph"),d=i.find("#accGraph"),p=i.find("#jerkGraph"),x=i.find("#aioGraph");if(l.length>0&&(m=e.plot(l,[D.pos,F.pos],e.extend(!0,{yaxis:{position:"left",axisLabel:"Position (rad)"},xaxis:{min:0}},P))),c.length>0&&(f=e.plot(c,[D.vel,F.vel,F.dwell,F.movetime],e.extend(!0,{yaxis:{position:"left",axisLabel:"Velocity (rad/sec)"},xaxis:{min:0}},P))),d.length>0&&(u=e.plot(d,[D.acc],e.extend(!0,{yaxis:{position:"left",axisLabel:"Acceleration (rad/sec^2)"},xaxis:{min:0}},P))),p.length>0&&(h=e.plot(p,[D.jerk],e.extend(!0,{yaxis:{position:"left",axisLabel:"Jerk (rad/sec^3)"},xaxis:{min:0}},P))),x.length>0){var b={pos:{position:"left",axisLabel:"Position (rad)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},vel:{position:"left",axisLabel:"Velocity (rad/sec)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},acc:{position:"left",axisLabel:"Acceleration (rad/sec^2)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},jerk:{position:"left",axisLabel:"Jerk (rad/sec^3)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3}},g=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<s.showGraphs.length;i++)e[i]=b[s.showGraphs[i]],D[s.showGraphs[i]].yaxis=i+1,F[s.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0}},P);g.legend={show:!0,backgroundOpacity:0},v=e.plot(x,V(),g)}s.onGraphPaint&&s.onGraphPaint()},E=function(e,i){for(var t=e.time_initial,a=e.time_final,o=e.motion_equation_third_order_coefficient,n=e.motion_equation_second_order_coefficient,s=e.motion_equation_first_order_coefficient,l=e.motion_equation_zero_order_coefficient,r=a-t,c=r/i,d=0;r>d;d+=c)D.jerk.data.push([d+t,6*o]),D.acc.data.push([d+t,6*o*d+2*n]),D.vel.data.push([d+t,3*o*Math.pow(d,2)+2*n*d+s]),D.pos.data.push([d+t,o*Math.pow(d,3)+n*Math.pow(d,2)+s*d+l])},U=function(e){var i,t,a,o;if(e.cruise){var n=(e.cruise[0].time_final+e.cruise[0].time_initial)/2;i=[n,e.cruise[0].velocity_final]}else if(e.accel)for(var l=0,r=0;r<D.vel.data.length;r++)D.vel.data[r][1]>l&&(l=D.vel.data[r][1],i=D.vel.data[r]);e.dwell&&(t=[e.dwell[0].time_final,e.dwell[0].velocity_final]),e.decel?a=[e.decel[0].time_final,e.decel[0].velocity_final]:e.cruise&&(a=[e.cruise[0].time_final,e.cruise[0].velocity_final]);var c=parseFloat(b.movedtime+b.dweltime||0),d=parseFloat(b.movedistance);o=[c,d],s.showGraphDragHandles&&(s.showGraphDragHandles.indexOf("position")>-1&&F.pos.data.push(o),s.showGraphDragHandles.indexOf("peakVelocity")>-1&&F.vel.data.push(i),s.showGraphDragHandles.indexOf("moveTime")>-1&&F.movetime.data.push(a),s.showGraphDragHandles.indexOf("dwellTime")>-1&&F.dwell.data.push(t))},j=function(e){var i,t,a,o,n,s,l,r=e.dwell?e.dwell[0].time_final:0;n=s=l=0;var c,d,p,m;if(c=d=p=m=0,!e.cruise||e.accel||e.decel||(i=e.cruise[0].velocity_final,a=e.cruise[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),t=i,o=a,d=e.cruise[0].rms_acceleration,s=e.cruise[0].time_final),!e.cruise&&e.accel&&e.decel&&(i=e.accel[0].velocity_final,a=e.accel[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),t=i/Math.sqrt(3),o=Math.sqrt(Math.pow(e.accel[0].rms_acceleration,2)+Math.pow(e.decel[0].rms_acceleration,2)),c=e.accel[0].rms_acceleration,p=e.decel[0].rms_acceleration,n=e.accel[0].time_final,l=e.decel[0].time_final,s=n),e.cruise&&e.accel&&e.decel){i=e.cruise[0].velocity_final,a=e.accel[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),n=e.accel[0].time_final,s=e.cruise[0].time_final,l=e.decel[0].time_final;var f=Math.max(n,s,l,r);t=i*Math.sqrt((s-n+(l-s+n)/3)/f),c=e.accel[0].rms_acceleration,d=e.cruise[0].rms_acceleration,p=e.decel[0].rms_acceleration}var f=Math.max(n,s,l,r);o=Math.sqrt((Math.pow(c,2)*n+Math.pow(d,2)*(s-n)+Math.pow(p,2)*(l-s)+Math.pow(m,2)*(r-l))/f),w.peakVel=parseFloat(i),w.peakAcc=parseFloat(a),w.rmsVel=parseFloat(t),w.rmsAcc=parseFloat(o),oe()};l.find("#profileButtons").on("click",".profileButton",function(i){i.preventDefault();var t=e(this).attr("id");void 0!=t&&s.activeProfileIndex!=parseInt(t.slice(3))&&(s.activeProfileIndex=parseInt(t.slice(3)),s.smoothness=y.find("#smoothnessInputContainer").find(".smoothnessDropDown").find(".smoothnessDDMenu")[0].selectedIndex,l.find("#profileButtons").find(".profileButton.btn-primary").removeClass("btn-primary").addClass("btn-default"),e(this).addClass("btn-primary").removeClass("btn-default"),s.velocityJerk=void 0,R(),pe())});var q=function(){w.peakVel="",w.peakAcc="",w.rmsVel="",w.rmsAcc="",oe()},R=function(){void 0==b.movedistance&&(b.movedistance=x.movedistance=isNaN(parseFloat(s.moveDistance))?s.moveDistance:parseFloat(s.moveDistance)),void 0==b.movedtime&&(b.movedtime=x.movedtime=isNaN(parseFloat(s.moveTime))?s.moveTime:parseFloat(s.moveTime)),void 0==b.dweltime&&(b.dweltime=x.dweltime=isNaN(parseFloat(s.dwellTime))?s.dwellTime:parseFloat(s.dwellTime)),void 0===s.velocityJerk?(ee(),b.velocityJerk=x.velocityJerk=isNaN(parseFloat(s.indexType))?s.indexType:parseFloat(s.indexType)):b.velocityJerk=x.velocityJerk=isNaN(parseFloat(s.velocityJerk))?s.velocityJerk:parseFloat(s.velocityJerk),void 0==b.smoothness&&(b.smoothness=x.smoothness=isNaN(parseFloat(s.smoothness))?s.smoothness:parseFloat(s.smoothness))},Y=function(){var e=!0;return y.find(".input-entries .form-group").removeClass("has-error"),!isNaN(b.movedistance)&&b.movedistance>0||(y.find("#moveDistanceInputContainer").addClass("has-error"),e=!1),!isNaN(b.movedtime)&&b.movedtime>0||(y.find("#moveTimeInputContainer").addClass("has-error"),e=!1),!isNaN(b.dweltime)&&b.dweltime>=0||(y.find("#dwellTimeInputContainer").addClass("has-error"),e=!1),!isNaN(b.velocityJerk)&&b.velocityJerk>=0&&b.velocityJerk<=100||(y.find("#indexTypeInputContainer").addClass("has-error"),e=!1),s.assessmentMode&&y.find(".input-entries .form-group").removeClass("has-error"),e},z=function(){g.time=0,g.position=0,g.velocity=0},H=function(e){C=0;for(var i=D.vel.data[0][0],t=1;t<D.vel.data.length;t++)C+=(D.vel.data[t][0]-i)*D.vel.data[t][1],i=D.vel.data[t][0];d=-(1/0);var a=JSON.parse(JSON.stringify(b));a.velocityJerk=100,a.velocityJerk=0;for(var o=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(a,g).segmentData,t=0;t<Object.keys(o).length;t++)for(var n=0;n<o[Object.keys(o)[t]].length;n++)d<o[Object.keys(o)[t]][n].velocity_initial&&(d=o[Object.keys(o)[t]][n].velocity_initial);p=2*d,e.dwell&&(T=e.dwell[0].time_initial)},W=function(i,t,a){e('<div id="tooltip">'+a+"</div>").css({top:t+5,left:i+15}).appendTo(r).fadeIn(200)},X=function(e){var i=null,t=null,a=null;l.find("#velGraph").unbind("plothover").bind("plothover",function(o,n,s){if(i=s,s){var l=r.offset();if(a!=s.seriesIndex)switch(s.seriesIndex){case 1:W(s.pageX-l.left,s.pageY-l.top,"Drag to change Velocity Jerk"),a=s.seriesIndex;break;case 2:W(s.pageX-l.left,s.pageY-l.top,"Drag to change Dwell Time"),a=s.seriesIndex;break;case 3:W(s.pageX-l.left,s.pageY-l.top,"Drag to change Move Time"),a=s.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var c;if(n.y>=p)c=100;else if(n.y<=d)c=0;else{var m=parseFloat(b.movedtime)-C/n.y;c=m*n.y*100/C}x.velocityJerk=parseFloat(Math.ceil(c)),b.velocityJerk=parseFloat(Math.ceil(c));break;case 2:var f;f=n.x<T?0:parseFloat(n.x-T),x.dweltime=parseFloat(f),b.dweltime=parseFloat(f);break;case 3:var u;u=n.x<=0?1:n.x,x.movedtime=parseFloat(u),b.movedtime=parseFloat(u)}pe(!0)}}),l.find("#velGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>=d&&i.datapoint[1]<=p&&(t=i);break;case 2:i.datapoint[0]>=T&&(t=i);break;case 3:i.datapoint[0]>0&&(t=i)}}),l.find("#velGraph").unbind("mouseup").bind("mouseup",function(){t&&s.onGraphDrag&&s.onGraphDrag(),t&&s.assessmentMode&&te(),t=null}),l.find("#velGraph").unbind("mouseleave").bind("mouseleave",function(){l.find("#velGraph").mouseup()})},Q=function(e){var i=null,t=null,a=null;l.find("#posGraph").unbind("plothover").bind("plothover",function(o,n,s){if(i=s,s){var l=r.offset();if(a!=s.seriesIndex)switch(s.seriesIndex){case 1:W(s.pageX-l.left,s.pageY-l.top,"Drag to change Move Distance"),a=s.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var c;c=n.y<=0?1:parseFloat(n.y),x.movedistance=parseFloat(c),b.movedistance=parseFloat(c)}pe(!0)}}),l.find("#posGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i)}}),l.find("#posGraph").unbind("mouseup").bind("mouseup",function(){t&&s.onGraphDrag&&s.onGraphDrag(),t&&s.assessmentMode&&te(),t=null}),l.find("#posGraph").unbind("mouseleave").bind("mouseleave",function(){l.find("#posGraph").mouseup()})},K=function(e){var i=null,t=null,a=null;l.find("#aioGraph").unbind("plothover").bind("plothover",function(o,n,l){if(i=l,l){var c=r.offset();if(a!=l.seriesIndex)switch(l.seriesIndex){case 1:W(l.pageX-c.left,l.pageY-c.top,"Drag to change Move Distance"),a=l.seriesIndex;break;case 3:W(l.pageX-c.left,l.pageY-c.top,"Drag to change Velocity Jerk"),a=l.seriesIndex;break;case 4:W(l.pageX-c.left,l.pageY-c.top,"Drag to change Dwell Time"),a=l.seriesIndex;break;case 5:W(l.pageX-c.left,l.pageY-c.top,"Drag to change Move Time"),a=l.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var m;m=n.y<=0?1:parseFloat(n.y),x.movedistance=parseFloat(m),b.movedistance=parseFloat(m);break;case 3:var f,u=s.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?n.y2:n.y1;if(u>=p)f=100;else if(d>=u)f=0;else{var v=parseFloat(b.movedtime)-C/u;f=v*u*100/C}x.velocityJerk=parseFloat(Math.ceil(f)),b.velocityJerk=parseFloat(Math.ceil(f));break;case 4:var h;h=n.x<T?0:parseFloat(n.x-T),x.dweltime=parseFloat(h),b.dweltime=parseFloat(h);break;case 5:var g;g=n.x<=0?1:n.x,x.movedtime=parseFloat(g),b.movedtime=parseFloat(g)}pe(!0)}}),l.find("#aioGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i);break;case 3:i.datapoint[1]>=d&&i.datapoint[1]<=p&&(t=i);break;case 4:i.datapoint[0]>=T&&(t=i);break;case 5:i.datapoint[0]>0&&(t=i)}}),l.find("#aioGraph").unbind("mouseup").bind("mouseup",function(){t&&s.onGraphDrag&&s.onGraphDrag(),t&&s.assessmentMode&&te(),t=null}),l.find("#aioGraph").unbind("mouseleave").bind("mouseleave",function(){l.find("#aioGraph").mouseup()})},Z=function(){if(m){var i=l.find("#posGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(f){var i=l.find("#velGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(u){var i=l.find("#accGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(h){var i=l.find("#jerkGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(v)for(var a=l.find("#aioGraph .axisLabels"),o=0;o<a.length;o++){var i=e(a[o]);if(!i.hasClass("xaxisLabel")){var t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}}},$=function(e){c=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(b,g);var i=c.elementsData,t=i.length;if(t>0){var a=100;O();for(var o=0;t>o;o++)E(i[o],a)}U(c.segmentData),j(c.segmentData),H(c.segmentData),e?S(c.segmentData):G(c.segmentData)},ee=function(){switch(s.activeProfileIndex=parseInt(s.activeProfileIndex),s.activeProfileIndex){case 1:s.indexType=50;break;case 2:s.indexType=100;break;case 3:s.indexType=0}},ie=function(){pe()},te=function(){s.assessmentMode&&s.userResponseNotifier&&s.userResponseNotifier({movedistance:{value:b.movedistance,unit:s.moveDistanceUnit},movedtime:{value:b.movedtime,unit:s.moveTimeUnit},dweltime:{value:b.dweltime,unit:s.dwellTimeUnit},velocityJerk:{value:b.velocityJerk}})},ae=function(){var i=r.find("#inputControls");i.append('<form class="form-horizontal"> <div class="input-entries inputs"> <div class="form-group input-container" id="moveDistanceInputContainer"> <label for="moveDistance" class="control-label">Move Distance</label> <div class="combo-container comboMoveDistance"></div></div><div class="form-group input-container" id="moveTimeInputContainer"> <label for="moveTime" class="control-label">Move Time</label> <div class="combo-container comboMoveTime"></div></div><div class="form-group input-container" id="dwellTimeInputContainer"> <label for="dwellTime" class="control-label">Dwell Time</label> <div class="combo-container comboDwellTime"></div></div><div class="form-group input-container" id="indexTypeInputContainer"> <label for="indexType" class="control-label">Velocity Factor</label> <div class="combo-container comboIndexType"></div></div><div class="form-group input-container" id="smoothnessInputContainer"> <label for="smoothness" class="control-label">Smoothness</label> <div class="combo-container smoothnessDropDown"></div></div></div><div class="output-entries inputs"> <div class="form-group input-container" id="peakVelocityInputContainer"> <label for="peakVelocity" class="control-label">Peak Velocity</label> <div class="combo-container comboPeakVelocity"></div></div><div class="form-group input-container" id="rmsVelocityInputContainer"> <label for="rmsVelocity" class="control-label">RMS Velocity</label> <div class="combo-container comboRmsVelocity"></div></div><div class="form-group input-container" id="peakAccInputContainer"> <label for="peakAcc" class="control-label">Peak Acceleration</label> <div class="combo-container comboPeakAcc"></div></div><div class="form-group input-container" id="rmsAccInputContainer"> <label for="rmsAcc" class="control-label">RMS Acceleration</label> <div class="combo-container comboRmsAcc"></div></div></div></form>'),
i.find("#moveDistanceInputContainer").find(".comboMoveDistance").unitsComboBox({unitType:"ANGULARDISTANCE",unit:s.moveDistanceUnit,roundOfNumber:"2",value:s.moveDistance,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?s.moveDistanceUnit=this.unit:"textbox"==this.type&&(x.movedistance=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.movedistance=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),ie()),te())}}),i.find("#moveTimeInputContainer").find(".comboMoveTime").unitsComboBox({unitType:"TIME",unit:s.moveTimeUnit,roundOfNumber:"2",value:s.moveTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?s.moveTimeUnit=this.unit:"textbox"==this.type&&(x.movedtime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.movedtime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),ie()),te())}}),i.find("#dwellTimeInputContainer").find(".comboDwellTime").unitsComboBox({unitType:"TIME",unit:s.dwellTimeUnit,roundOfNumber:"2",value:s.dwellTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?s.dwellTimeUnit=this.unit:"textbox"==this.type&&(x.dweltime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.dweltime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),ie()),te())}}),i.find("#indexTypeInputContainer").find(".comboIndexType").unitsComboBox({unitType:"PERCENTAGE",unit:"0",roundOfNumber:"2",value:s.indexType,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&("textbox"==this.type&&(x.velocityJerk=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.velocityJerk=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?0:parseFloat(this.SIValue),ie()),te())}});var t=i.find("#smoothnessInputContainer").find(".smoothnessDropDown");t.append('<select class="form-control smoothnessDDMenu"><option value=automatic>Automatic<option value=standard>Standard<option value=maximum>Maximum</select>'),s.smoothness&&t.find("select option").eq(s.smoothness).attr("selected",!0),t.find("select").on("change",function(e){x.smoothness=e.target.selectedIndex,b.smoothness=e.target.selectedIndex,pe(!0)}),i.find("#peakVelocityInputContainer").find(".comboPeakVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:s.peakVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(s.peakVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:s.rmsVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(s.rmsVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#peakAccInputContainer").find(".comboPeakAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:s.peakAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(s.peakAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#rmsAccInputContainer").find(".comboRmsAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:s.rmsAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(s.rmsAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),i.resize(function(t){var a=e(t.target);if(a.width()<777){i.find("#moveDistanceInputContainer .control-label").text("Move Dist."),i.find("#peakAccInputContainer .control-label").text("Peak Acc."),i.find("#rmsAccInputContainer .control-label").text("RMS Acc."),i.find(".input-entries").css("width","55%"),i.find(".output-entries").css("width","45%");var o=i.find(".input-container .combo-container .cosmatt-unitComboBox");o.find(".unitTextBox").css("max-width","60px"),o.find(".unitComboBox").css("max-width","60px")}else if(a.width()>=777){i.find("#moveDistanceInputContainer .control-label").text("Move Distance"),i.find("#peakAccInputContainer .control-label").text("Peak Acceleration"),i.find("#rmsAccInputContainer .control-label").text("RMS Acceleration"),i.find(".input-entries").css("width","50%"),i.find(".output-entries").css("width","50%");var o=i.find(".input-container .combo-container .cosmatt-unitComboBox");o.find(".unitTextBox").css("max-width","100px"),o.find(".unitComboBox").css("max-width","100px")}}),i.width()<777&&i.trigger("resize")},oe=function(){var e;e=y.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox"),b.movedistance?e.setTextBoxValue(e.getValueInSelectedUnit(b.movedistance)):e.setTextBoxValue(b.movedistance),e=y.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox"),b.movedtime?e.setTextBoxValue(e.getValueInSelectedUnit(b.movedtime)):e.setTextBoxValue(b.movedtime),e=y.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox"),b.dweltime?e.setTextBoxValue(e.getValueInSelectedUnit(b.dweltime)):e.setTextBoxValue(b.dweltime),e=y.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox"),b.velocityJerk?e.setTextBoxValue(e.getValueInSelectedUnit(b.velocityJerk)):e.setTextBoxValue(b.velocityJerk),e=y.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox"),w.peakVel?e.setTextBoxValue(e.getValueInSelectedUnit(w.peakVel)):e.setTextBoxValue(w.peakVel),e=y.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox"),w.rmsVel?e.setTextBoxValue(e.getValueInSelectedUnit(w.rmsVel)):e.setTextBoxValue(w.rmsVel),e=y.find("#peakAccInputContainer").find(".comboPeakAcc").data("unitsComboBox"),w.peakAcc?e.setTextBoxValue(e.getValueInSelectedUnit(w.peakAcc)):e.setTextBoxValue(w.peakAcc),e=y.find("#rmsAccInputContainer").find(".comboRmsAcc").data("unitsComboBox"),w.rmsAcc?e.setTextBoxValue(e.getValueInSelectedUnit(w.rmsAcc)):e.setTextBoxValue(w.rmsAcc)},ne=function(e){var i=r.find("#profileButtons");i.find("#btn"+s.activeProfileIndex).addClass("btn-primary").removeClass("btn-default"),s.showProfiles&&se(s.showProfiles,i),s.showGraphDragHandles&&le(s.showGraphDragHandles),s.readOnlyInputs&&re(s.readOnlyInputs),s.hideInputs&&ce(s.hideInputs)},se=function(e,i){if(i.find("button").hide(),"boolean"==typeof e)e===!0?i.show():i.hide();else if(e.length>0)for(var t in e)t=e[t],i.find("#btn"+t.slice(t.length-1)).show()},le=function(e){"boolean"==typeof e&&(e===!0?s.showGraphDragHandles=[COSMATT.MotionProfile.configuration.GraphHandles.position,COSMATT.MotionProfile.configuration.GraphHandles.peakVelocity,COSMATT.MotionProfile.configuration.GraphHandles.moveTime,COSMATT.MotionProfile.configuration.GraphHandles.dwellTime]:s.showGraphDragHandles=[])},re=function(e){if("boolean"==typeof e&&(e=e===!0?[COSMATT.MotionProfile.configuration.DataFields.moveDistance,COSMATT.MotionProfile.configuration.DataFields.moveTime,COSMATT.MotionProfile.configuration.DataFields.dwellTime,COSMATT.MotionProfile.configuration.DataFields.velocityFormFactor,COSMATT.MotionProfile.configuration.DataFields.peakVelocity,COSMATT.MotionProfile.configuration.DataFields.rmsVelocity,COSMATT.MotionProfile.configuration.DataFields.peakAccelaration,COSMATT.MotionProfile.configuration.DataFields.rmsAccelaration]:[]),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],y.find("#"+i+"InputContainer").find(".combo"+i.charAt(0).toUpperCase()+i.slice(1)).data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}))},ce=function(e){if("boolean"==typeof e&&(e===!0?y.hide():y.show()),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],y.find("#"+i+"InputContainer").hide())},de=function(){var i=e("body"),t='<div id="editConfigBtnContainer"><button class="btn btn-default editConfigBtn pull-right btn-lg" type="button" href="configWindow.html" data-target="#theModal" data-toggle="modal">Edit Configurations</div>';i.append(t)};ae(),ne(r),s.showEditConfigButton&&de(),s.showCheckAnswerButton,R(),z();var pe=function(e,i){Y()?i?setTimeout(function(e){$()},0):$(e):(O(),q(),setTimeout(function(e){J(),N(!1)},0)),Z(),l.on("resize",function(){Z()})};return pe(!1,!0),{ref:this,updateInputs:t,markAnswers:a}}}(jQuery);