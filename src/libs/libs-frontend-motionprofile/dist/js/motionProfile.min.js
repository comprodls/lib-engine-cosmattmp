"use strict";window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.AccelDecelSegment=function(){var e,i,t,o,a,n,s,r,l,c,d,p,m,f,u,h,v,T,g,x,b,y,C={},M=function(){i=2/p-1,e=(1-i)*(1-m)/2,t=1-e-i,o=p*e/2,a=p*i,n=p*t/2,s=o/3*e,r=(a+2*o)/2*i,l=(1-n/3)*t,c=s+r+l,s/=c,r/=c,l/=c,d=.5/c},w=function(e){switch(e.permutation){case"TIME_DISTANCE":f=e.time,u=e.distance/f,h=b+2*(u-b)*d,v=h-b,T=f*b,g=e.distance-T;break;case"TIME_VELOCITY":f=e.time,v=e.velocity-b,g=f*v*c,T=f*b}},A=function(){if(e>0){var i=f*e,t=T*e+g*s,a=v*o,n=x,r=n+i,l=y,c=l+t,d=b,p=d+a,m=(p+d)/2,u=(t-m*i)*(-2/Math.pow(i,3)),h=(-3*u*Math.pow(i,2)+a)/(2*i),M=d,w=l,A=0,O=6*u*(r-n)+2*h,I=Math.abs(O),D=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),k=6*u,S={time_initial:n,time_final:r,velocity_initial:d,velocity_final:p,acceleration_initial:A,acceleration_final:O,position_initial:l,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:h,motion_equation_first_order_coefficient:M,motion_equation_zero_order_coefficient:w,rms_acceleration:I,rms_velocity:D,jerk:k};C.ElementsData.push(S),x=r,y=c,b=p}},O=function(){if(i>0){var e=f*i,t=T*i+g*r,o=v*a,n=x,s=n+e,l=y,c=l+t,d=b,p=d+o,m=0,u=(-3*m*Math.pow(e,2)+o)/(2*e),h=d,M=l,w=2*u,A=6*m*(s-n)+2*u,O=Math.abs(A),I=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),D=6*m,k={time_initial:n,time_final:s,velocity_initial:d,velocity_final:p,acceleration_initial:w,acceleration_final:A,position_initial:l,position_final:c,motion_equation_third_order_coefficient:m,motion_equation_second_order_coefficient:u,motion_equation_first_order_coefficient:h,motion_equation_zero_order_coefficient:M,rms_acceleration:O,rms_velocity:I,jerk:D};C.ElementsData.push(k),x=s,y=c,b=p}},I=function(){if(t>0){var e=f*t,i=T*t+g*l,o=v*n,a=x,s=a+e,r=y,c=r+i,d=b,p=d+o,m=(p+d)/2,u=(i-m*e)*(-2/Math.pow(e,3)),h=(-3*u*Math.pow(e,2)+o)/(2*e),M=d,w=r,A=2*h,O=0,I=Math.abs(O),D=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),k=6*u,S={time_initial:a,time_final:s,velocity_initial:d,velocity_final:p,acceleration_initial:A,acceleration_final:O,position_initial:r,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:h,motion_equation_first_order_coefficient:M,motion_equation_zero_order_coefficient:w,rms_acceleration:I,rms_velocity:D,jerk:k};C.ElementsData.push(S),x=s,y=c,b=p}},D=function(){A(),O(),I()},k=function(){var e=C.ElementsData,i=e.length,t=e[i-1].position_final-e[0].position_initial;C.SegmentData.distance=t},S=function(e,i){return C={},C.ElementsData=[],C.SegmentData={},m=e.skewPercentage/100||0,p=1/(1-e.jerkPercentage/200)||1,x=i.time||0,b=i.velocity||0,y=i.position||0,M(),w(e),D(),k(),C};return{calculate:S}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.CruiseSegment=function(){var e,i,t,o,a,n={},s=function(e){switch(e.permutation){case"TIME":o=e.time,a=o*i}},r=function(){var s=e,r=s+o,l=t,c=l+a,d=i,p=d,m=0,f=0,u=d,h=l,v=0,T=0,g=Math.abs(T),x=Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2),b={time_initial:s,time_final:r,velocity_initial:d,velocity_final:p,acceleration_initial:v,acceleration_final:T,position_initial:l,position_final:c,motion_equation_third_order_coefficient:m,motion_equation_second_order_coefficient:f,motion_equation_first_order_coefficient:u,motion_equation_zero_order_coefficient:h,rms_acceleration:g,rms_velocity:x};n.ElementsData.push(b)},l=function(){var e=n.ElementsData,i=e[0].position_final-e[0].position_initial;n.SegmentData.distance=i},c=function(o,a){return n={},n.ElementsData=[],n.SegmentData={},e=a.time||0,i=a.velocity||0,t=a.position||0,s(o),r(),l(),n};return{calculate:c}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.ProfileIndexModel=function(){var e,i,t,o,a,n,s,r,l,c,d,p,m,f,u,h,v,T,g=[],x={},b=0,y=0,C=function(e){if(e=parseInt(e),!isNaN(e))switch(e){case 0:b=0,y=0;break;case 1:b=40,y=40;break;case 2:b=100,y=100}},M=function(e){var i,t;i=void 0!=e.velocityJerk?e.velocityJerk:50,t=void 0!=e.velocitySkew?e.velocitySkew:0,s=i/100+1,r=t/100},w=function(){if(u=h=v=T=0,c=(a-i*n)/n,d=c*s,0==d)console.log("cruise velocity zero");else{var C=2*(d*n-(a-i*n))/d;if(p=C*(1+r)/2,m=C*(1-r)/2,f=n-C,p>0){var M={},w={};M.permutation="TIME_VELOCITY",M.velocity=d+i,M.time=p,M.jerkPercentage=b,M.skewPercentage=0,w.position=t,w.velocity=i,w.time=e;var A=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(M,w);u=A.SegmentData.distance,g=g.concat(A.ElementsData),x.accel=A.ElementsData}if(f>0){var O={},I={};O.permutation="TIME",O.velocity=d+i,O.time=f,O.skewPercentage=0,I.position=t+u,I.velocity=i+d,I.time=e+p;var D=COSMATT.ProfileCalculation.CruiseSegment.calculate(O,I);v=D.SegmentData.distance,g=g.concat(D.ElementsData),x.cruise=D.ElementsData}if(m>0){var k={},S={};k.permutation="TIME_VELOCITY",k.velocity=o,k.time=m,k.jerkPercentage=y,k.skewPercentage=0,S.position=t+u+v,S.velocity=d+i,S.time=e+p+f;var U=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(k,S);h=U.SegmentData.distance,g=g.concat(U.ElementsData),x.decel=U.ElementsData}if(l>0){var P={},_={};P.permutation="TIME",P.velocity=o,P.time=l,P.skewPercentage=0,_.position=t+a,_.velocity=o,_.time=e+n;var N=COSMATT.ProfileCalculation.CruiseSegment.calculate(P,_);T=N.SegmentData.distance,g=g.concat(N.ElementsData),x.dwell=N.ElementsData}}},A=function(s,r){if(g=[],x=[],a=s.movedistance||0,n=s.movedtime||0,l=s.dweltime||0,M(s),C(s.smoothness),e=r.time||0,i=r.velocity||0,t=r.position||0,o=i,!(a>0&&n>0))throw{message:"Time and distance needs to be positive values for Profile calculations"};return w(),{elementsData:g,segmentData:x}};return{calculate:A}}(),window.COSMATT=window.COSMATT||{},COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.configuration={DataFields:{moveDistance:"moveDistance",moveTime:"moveTime",dwellTime:"dwellTime",velocityFormFactor:"indexType",peakVelocity:"peakVelocity",rmsVelocity:"rmsVelocity",peakAccelaration:"peakAcc",rmsAccelaration:"rmsAcc",showAll:!0},Profiles:{profile1:"profile1",profile2:"profile2",profile3:"profile3",showAll:!0},GraphMode:{individualAxis:0,sameAxis:1},Graphs:{position:"pos",velocity:"vel",acceleration:"acc",jerk:"jerk",showAll:!0},GraphHandles:{position:"position",peakVelocity:"peakVelocity",moveTime:"moveTime",dwellTime:"dwellTime",showAll:!0},Smoothness:{automatic:0,standard:1,maximum:2},UnitData:{Velocity:"ANGULARVELOCITY",Position:"ANGULARDISTANCE",Acceleration:"ANGULARACCELERATION",Jerk:"ANGULARJERK"}},function(e){e.fn.motionProfile=function(i){function t(e){if(e.movedistance){C.movedistance=isNaN(parseFloat(e.movedistance.value))?"":parseFloat(e.movedistance.value);var i=A.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");i.setTextBoxValue(C.movedistance),e.movedistance.unit&&(r.moveDistanceUnit=e.movedistance.unit,i.setDropBoxItem(r.moveDistanceUnit))}if(e.movedtime){C.movedtime=isNaN(parseFloat(e.movedtime.value))?"":parseFloat(e.movedtime.value);var i=A.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox");i.setTextBoxValue(C.movedtime),e.movedtime.unit&&(r.moveTimeUnit=e.movedtime.unit,i.setDropBoxItem(r.moveTimeUnit))}if(e.dweltime){C.dweltime=isNaN(parseFloat(e.dweltime.value))?"":parseFloat(e.dweltime.value);var i=A.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox");i.setTextBoxValue(C.dweltime),e.dweltime.unit&&(r.dwellTimeUnit=e.dweltime.unit,i.setDropBoxItem(r.dwellTimeUnit))}if(e.velocityJerk){C.velocityJerk=isNaN(parseFloat(e.velocityJerk.value))?"":parseFloat(e.velocityJerk.value);var i=A.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");i.setTextBoxValue(C.velocityJerk)}ve()}function o(i){var t;if(i.movedistance){t=i.movedistance.status?"correct":"incorrect";var o=A.find("#moveDistanceInputContainer").find(".comboMoveDistance");o.addClass(t),o.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),t=i.movedistance.status?"fa-check correct":"fa-times incorrect";var n=COSMATT.UNITCONVERTER.getUnitConvertedValue("ANGULARDISTANCE",i.movedistance.correctAnswer,COSMATT.UNITCONVERTER.getSIUnit("ANGULARDISTANCE").id,"revolution"),s=i.movedistance.status?"":"("+Math.round(n)+" rev)";o.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+t+'"></span><span class="correct-answer">'+s+"</span></span>")}if(i.movedtime){t=i.movedtime.status?"correct":"incorrect";var r=A.find("#moveTimeInputContainer").find(".comboMoveTime");r.addClass(t),r.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),t=i.movedtime.status?"fa-check correct":"fa-times incorrect";var s=i.movedtime.status?"":"("+i.movedtime.correctAnswer+" sec)";r.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+t+'"></span><span class="correct-answer">'+s+"</span></span>")}if(i.dweltime){t=i.dweltime.status?"correct":"incorrect";var l=A.find("#dwellTimeInputContainer").find(".comboDwellTime");l.addClass(t),l.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),t=i.dweltime.status?"fa-check correct":"fa-times incorrect";var s=i.dweltime.status?"":"("+i.dweltime.correctAnswer+" sec)";l.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+t+'"></span><span class="correct-answer">'+s+"</span></span>")}if(i.velocityJerk){t=i.velocityJerk.status?"correct":"incorrect";var c=A.find("#indexTypeInputContainer").find(".comboIndexType");c.addClass(t),c.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),t=i.velocityJerk.status?"fa-check correct":"fa-times incorrect";var s=i.velocityJerk.status?"":"("+i.velocityJerk.correctAnswer+" %)";c.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+t+'"></span><span class="correct-answer">'+s+"</span></span>")}m.find(".response-status").unbind("mouseenter").bind("mouseenter",function(i){var t=e(this)[0],o=m.offset();t.offsetWidth<t.scrollWidth&&Q(i.pageX-o.left,i.pageY-o.top,t.innerText)}),m.find(".response-status").unbind("mouseleave").bind("mouseleave",function(e){m.find("#tooltip").remove()}),a()}function a(){if(v){var e=v.getData();e[1]&&(e[1].hoverable=!1),v.setupGrid(),v.setData(e),v.draw()}if(T){var i=T.getData();i[1]&&(i[1].hoverable=!1),i[2]&&(i[2].hoverable=!1),i[3]&&(i[3].hoverable=!1),T.setupGrid(),T.setData(i),T.draw()}te()}function n(){return{activeProfileIndex:r.activeProfileIndex,moveDistance:C.movedistance,moveTime:C.movedtime,dwellTime:C.dweltime,smoothness:C.smoothness}}var s={activeProfileIndex:1,moveDistance:125.664,moveTime:10,dwellTime:2,graphMode:COSMATT.MotionProfile.configuration.GraphMode.individualAxis,showGraphs:[COSMATT.MotionProfile.configuration.Graphs.velocity],showGraphDragHandles:COSMATT.MotionProfile.configuration.GraphHandles.showAll,readOnlyInputs:!1,hideInputs:!1,showProfiles:COSMATT.MotionProfile.configuration.Profiles.showAll,smoothness:COSMATT.MotionProfile.configuration.Smoothness.automatic,showCheckAnswerButton:!1,assessmentMode:!1,moveDistanceUnit:"radian",moveTimeUnit:"second",dwellTimeUnit:"second",peakVelocityUnit:"radianpersecond",rmsVelocityUnit:"radianpersecond",peakAccelarationUnit:"radianpersecondsquare",rmsAccelarationUnit:"radianpersecondsquare",velocityFactorUnit:"percentage",graphUnits:{Velocity:"radianpersecond",Position:"radian",Acceleration:"radianpersecondsquare",Jerk:"radianpersecondcube"},moveDistanceUnitDefaultSelected:"revolution",numberFormatterOptions:{significantDigits:3,maxPositiveExponent:6,minNegativeExponent:-4}};i.assessmentMode&&(s.moveDistance="",s.moveTime="",s.dwellTime="",s.activeProfileIndex=3);var r=e.extend(s,i),l=!0,c=new Cosmatt.NumberFormatter(r.numberFormatterOptions),d=function(e,i){return""===e.toString().trim()?e:c.format(e)};r.graphModeVal=r.graphMode;var p=this,m=e('<div class="cosmatt-motionProfile unselectable" unselectable="on"></div>');p.append(m),m.append('<div id="profileButtons"><button class="btn btn-default profileButton" id="btn1">Profile 1</button><button class="btn btn-default profileButton" id="btn2">Profile 2</button><button class="btn btn-default profileButton" id="btn3">Profile 3</button></div><div id="graphContainer" class=""></div><div id="inputControls"></div>'),i.assessmentMode&&m.addClass("assessment-mode");var f,u,h,v,T,g,x,b,y={},C={},M={},w={},A=m.find("#inputControls"),O=0,I=0,D=void 0!==r.xmin?parseFloat(r.xmin):15,k=void 0!==r.posYmin?parseFloat(r.posYmin):30,S=void 0!==r.velYmin?parseFloat(r.velYmin):8,U=void 0!==r.accYmin?parseFloat(r.accYmin):2,P=void 0!==r.jerkYmin?parseFloat(r.jerkYmin):3,_={vel:{graphtype:"Velocity",label:"Velocity",data:[],color:"#f7252a",lines:{show:!0},hoverable:!1,clickable:!1},pos:{graphtype:"Position",label:"Position",data:[],color:"#619beb",series:{lines:{show:!1}},hoverable:!1,clickable:!1},acc:{graphtype:"Acceleration",label:"Acceleration",data:[],color:"#ff8a65",series:{lines:{show:!1}},hoverable:!1,clickable:!1},jerk:{graphtype:"Jerk",label:"Jerk",data:[],color:"#40cc43",series:{lines:{show:!1}},hoverable:!1,clickable:!1}},N={vel:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},pos:{graphtype:"Position",data:[],color:"#619beb",lines:{show:!1},points:{show:!0,fillColor:"#619beb"}},acc:{label:"Acceleration",data:[],color:"#ff8a65"},jerk:{label:"Jerk",data:[],color:"#40cc43"},dwell:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},movetime:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}}},V={series:{lines:{show:!0}},xaxis:{axisLabel:"Time (sec)",position:"bottom",tickFormatter:d},legend:{show:!0},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,bottom:1,right:0,left:1}}},F=function(){for(var e in _)_.hasOwnProperty(e)&&(_[e].data=[]);for(var e in N)N.hasOwnProperty(e)&&(N[e].data=[])},E=function(e,i,t){var o=Object.keys(e),a=0;for(var n in o)if(o.hasOwnProperty(n)){var s=1.2*e[o[n]][0][i];s>a&&(a=s)}return t>a&&(a=t),a},R=function(){var e=[];return r.showGraphs.length>0&&(r.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?e.push(_.pos,N.pos):e.push([],[]),r.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.velocity)>-1?e.push(_.vel,N.vel,N.dwell,N.movetime):e.push([],[],[],[]),r.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.acceleration)>-1?e.push(_.acc):e.push([]),r.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.jerk)>-1?e.push(_.jerk):e.push([])),e},B=function(e){var i=(Object.keys(e),E(e,"time_final",D));if(v){var t=E(e,"position_final",k),o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",r.graphUnits.Position);o&&1!=o&&(t*=o),v.getOptions().yaxes[0].max=t,v.getOptions().yaxes[0].min=-1*t,v.getOptions().xaxes[0].max=i,v.setupGrid(),v.setData([_.pos,N.pos]),v.draw()}if(T){var a=E(e,"velocity_final",S),o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",r.graphUnits.Velocity);o&&1!=o&&(a*=o),T.getOptions().yaxes[0].max=a,T.getOptions().yaxes[0].min=-1*a,T.getOptions().xaxes[0].max=i,T.setupGrid(),T.setData([_.vel,N.vel,N.dwell,N.movetime]),T.draw()}if(g){var n=E(e,"acceleration_final",U),o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",r.graphUnits.Acceleration);o&&1!=o&&(n*=o),g.getOptions().yaxes[0].max=n,g.getOptions().yaxes[0].min=-1*n,g.getOptions().xaxes[0].max=i,g.setupGrid(),g.setData([_.acc]),g.draw()}if(b){var s=E(e,"jerk",P),o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",r.graphUnits.Jerk);o&&1!=o&&(s*=o),b.getOptions().yaxes[0].max=s,b.getOptions().yaxes[0].min=-1*s,b.getOptions().xaxes[0].max=i,b.setupGrid(),b.setData([_.jerk]),b.draw()}if(x){for(var l,c=x.getOptions().yaxes,d=0;d<c.length;d++){switch(c[d].axisLabel){case"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position).symbol+")":l=E(e,"position_final",k);var o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",r.graphUnits.Position);o&&1!=o&&(l*=o);break;case"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,r.graphUnits.Velocity).symbol+")":l=E(e,"velocity_final",S);var o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",r.graphUnits.Velocity);o&&1!=o&&(l*=o);break;case"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,r.graphUnits.Acceleration).symbol+")":l=E(e,"acceleration_final",U);var o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",r.graphUnits.Acceleration);o&&1!=o&&(l*=o);break;case"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,r.graphUnits.Jerk).symbol+")":l=E(e,"jerk",P);var o=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",r.graphUnits.Jerk);o&&1!=o&&(l*=o)}x.getOptions().yaxes[d].max=l,x.getOptions().yaxes[d].min=-1*l}x.getOptions().xaxes[0].max=i,x.setupGrid(),x.setData(R()),x.draw()}},G=function(e){J(e)},J=function(i){var t,o=m.find("#graphContainer"),a=!0,n=function(){v&&(v=v.destroy()),T&&(T=T.destroy()),g&&(g=g.destroy()),b&&(b=b.destroy()),x&&(x=x.destroy()),o.find(".graphArea").remove(),i?(L(o,i),a=!1):(j(),a=!1)};o.resize(function(s){var l=e(s.target);"graphContainer"===l[0].id?l.width()<777&&r.showGraphs.length>1&&0===r.graphModeVal&&0===r.graphMode?(r.graphMode=1,n()):l.width()>777&&r.showGraphs.length>1&&0===r.graphModeVal&&1===r.graphMode?(r.graphMode=0,n()):a&&(a=!1,i?L(o,i):j()):l.hasClass("graphArea")&&l.height(l.width()),r.autoResizer&&!t&&(t=setTimeout(function(){r.autoResizer(),t=void 0},500))}),o.trigger("resize")},L=function(i,t){var o=E(t,"position_final",k),a=E(t,"velocity_final",S),n=E(t,"acceleration_final",U),s=E(t,"time_final",D),l=E(t,"jerk",P),c=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,"SI",r.graphUnits.Position);if(c&&1!=c&&(o*=c),c=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",r.graphUnits.Velocity),c&&1!=c&&(a*=c),c=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Acceleration,"SI",r.graphUnits.Acceleration),c&&1!=c&&(n*=c),c=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Jerk,"SI",r.graphUnits.Jerk),c&&1!=c&&(l*=c),0===i.children().length)if(0===r.graphMode)for(var p=0;p<r.showGraphs.length;p++)i.append('<div id="'+r.showGraphs[p]+'Graph" class="graphArea"></div>');else 1===r.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');for(var m=i.find(".graphArea"),p=0;p<m.length;p++)0===p||p===m.length-1?e(m[p]).css("width","calc("+100/i.children().length+"% - 20px)"):e(m[p]).css("width","calc("+100/i.children().length+"% - 30px)");m.css("height",m.eq(0).width()),1===r.graphMode&&0===r.graphModeVal?m.css("max-height","300px"):0===r.graphMode&&0===r.graphModeVal&&m.css("max-height","400px");for(var f=i.find("#posGraph"),u=i.find("#velGraph"),h=i.find("#accGraph"),y=i.find("#jerkGraph"),C=i.find("#aioGraph"),M=Object.keys(_),w=Object.keys(N),p=0;p<M.length;p++)delete _[M[p]].yaxis;for(var p=0;p<w.length;p++)delete N[w[p]].yaxis;if(f.length>0){var A=e.extend(!0,{yaxis:{min:-1*o,max:o,position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position).symbol+")",tickFormatter:d},xaxis:{min:0,max:s,tickFormatter:d}},V);v=e.plot(f,[_.pos,N.pos],A),ee(v)}if(u.length>0){var O=e.extend(!0,{yaxis:{min:-1*a,max:a,position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,r.graphUnits.Velocity).symbol+")",tickFormatter:d},xaxis:{min:0,max:s,tickFormatter:d}},V);T=e.plot(u,[_.vel,N.vel,N.dwell,N.movetime],O),$(T)}if(h.length>0){var I=e.extend(!0,{yaxis:{min:-1*n,max:n,position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,r.graphUnits.Acceleration).symbol+")",tickFormatter:d},xaxis:{min:0,max:s,tickFormatter:d}},V);g=e.plot(h,[_.acc],I)}if(y.length>0){var F=e.extend(!0,{yaxis:{min:-1*l,max:l,position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,r.graphUnits.Jerk).symbol+")",tickFormatter:d},xaxis:{min:0,max:s,tickFormatter:d}},V);b=e.plot(y,[_.jerk],F),ee(v)}if(C.length>0){var B={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*o,max:o},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,r.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*a,max:a},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,r.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*n,max:n},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,r.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*l,max:l}},G=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<r.showGraphs.length;i++)e[i]=B[r.showGraphs[i]],_[r.showGraphs[i]].yaxis=i+1,N[r.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0,max:s,tickFormatter:d}},V);G.legend={show:!0,backgroundOpacity:0},x=e.plot(C,R(),G),ie(x)}r.onGraphPaint&&r.onGraphPaint()},j=function(){var i=m.find("#graphContainer");if(0===i.children().length)if(0===r.graphMode)for(var t=0;t<r.showGraphs.length;t++)i.append('<div id="'+r.showGraphs[t]+'Graph" class="graphArea"></div>');else 1===r.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');for(var o=i.find(".graphArea"),t=0;t<o.length;t++)0===t||t===o.length-1?e(o[t]).css("width","calc("+100/i.children().length+"% - 20px)"):e(o[t]).css("width","calc("+100/i.children().length+"% - 30px)");o.css("height",o.eq(0).width()),1===r.graphMode&&0===r.graphModeVal?o.css("max-height","300px"):0===r.graphMode&&0===r.graphModeVal&&o.css("max-height","400px");for(var a=Object.keys(_),n=Object.keys(N),t=0;t<a.length;t++)delete _[a[t]].yaxis;for(var t=0;t<n.length;t++)delete N[n[t]].yaxis;var s=i.find("#posGraph"),l=i.find("#velGraph"),c=i.find("#accGraph"),p=i.find("#jerkGraph"),f=i.find("#aioGraph");if(s.length>0&&(v=e.plot(s,[_.pos,N.pos],e.extend(!0,{yaxis:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position).symbol+")"},xaxis:{min:0,tickFormatter:d}},V))),l.length>0&&(T=e.plot(l,[_.vel,N.vel,N.dwell,N.movetime],e.extend(!0,{yaxis:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,r.graphUnits.Velocity).symbol+")"},xaxis:{min:0,tickFormatter:d}},V))),c.length>0&&(g=e.plot(c,[_.acc],e.extend(!0,{yaxis:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,r.graphUnits.Acceleration).symbol+")"},xaxis:{min:0,tickFormatter:d}},V))),p.length>0&&(b=e.plot(p,[_.jerk],e.extend(!0,{yaxis:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,r.graphUnits.Jerk).symbol+")"},xaxis:{min:0,tickFormatter:d}},V))),f.length>0){var u={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Velocity,r.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Acceleration,r.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(COSMATT.MotionProfile.configuration.UnitData.Jerk,r.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3}},h=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<r.showGraphs.length;i++)e[i]=u[r.showGraphs[i]],_[r.showGraphs[i]].yaxis=i+1,N[r.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0,tickFormatter:d}},V);h.legend={show:!0,backgroundOpacity:0},x=e.plot(f,R(),h)}r.onGraphPaint&&r.onGraphPaint()},q=function(e,i){for(var t=e.time_initial,o=e.time_final,a=e.motion_equation_third_order_coefficient,n=e.motion_equation_second_order_coefficient,s=e.motion_equation_first_order_coefficient,r=e.motion_equation_zero_order_coefficient,l=o-t,c=l/i,d=0;l>d;d+=c)_.jerk.data.push([d+t,6*a]),_.acc.data.push([d+t,6*a*d+2*n]),_.vel.data.push([d+t,3*a*Math.pow(d,2)+2*n*d+s]),_.pos.data.push([d+t,a*Math.pow(d,3)+n*Math.pow(d,2)+s*d+r])},z=function(e){var i,t,o,a;if(e.cruise){var n=(e.cruise[0].time_final+e.cruise[0].time_initial)/2;i=[n,e.cruise[0].velocity_final]}else if(e.accel)for(var s=0,l=0;l<_.vel.data.length;l++)_.vel.data[l][1]>s&&(s=_.vel.data[l][1],i=_.vel.data[l]);e.dwell&&(t=[e.dwell[0].time_final,e.dwell[0].velocity_final]),e.decel?o=[e.decel[0].time_final,e.decel[0].velocity_final]:e.cruise&&(o=[e.cruise[0].time_final,e.cruise[0].velocity_final]);var c=parseFloat(C.movedtime+C.dweltime||0),d=parseFloat(C.movedistance);a=[c,d],r.showGraphDragHandles&&(r.showGraphDragHandles.indexOf("position")>-1&&N.pos.data.push(a),r.showGraphDragHandles.indexOf("peakVelocity")>-1&&N.vel.data.push(JSON.parse(JSON.stringify(i))),r.showGraphDragHandles.indexOf("moveTime")>-1&&N.movetime.data.push(o),r.showGraphDragHandles.indexOf("dwellTime")>-1&&N.dwell.data.push(t))},Y=function(e){var i,t,o,a,n,s,r,l=e.dwell?e.dwell[0].time_final:0;n=s=r=0;var c,d,p,m;if(c=d=p=m=0,!e.cruise||e.accel||e.decel||(i=e.cruise[0].velocity_final,o=e.cruise[0].acceleration_final,i=parseFloat(i),o=parseFloat(o),t=i,a=o,d=e.cruise[0].rms_acceleration,s=e.cruise[0].time_final),!e.cruise&&e.accel&&e.decel&&(i=e.accel[0].velocity_final,o=e.accel[0].acceleration_final,i=parseFloat(i),o=parseFloat(o),t=i/Math.sqrt(3),a=Math.sqrt(Math.pow(e.accel[0].rms_acceleration,2)+Math.pow(e.decel[0].rms_acceleration,2)),c=e.accel[0].rms_acceleration,p=e.decel[0].rms_acceleration,n=e.accel[0].time_final,r=e.decel[0].time_final,s=n),e.cruise&&e.accel&&e.decel){i=e.cruise[0].velocity_final,o=e.accel[0].acceleration_final,i=parseFloat(i),o=parseFloat(o),n=e.accel[0].time_final,s=e.cruise[0].time_final,r=e.decel[0].time_final;var f=Math.max(n,s,r,l);t=i*Math.sqrt((s-n+(r-s+n)/3)/f),c=e.accel[0].rms_acceleration,d=e.cruise[0].rms_acceleration,p=e.decel[0].rms_acceleration}var f=Math.max(n,s,r,l);a=Math.sqrt((Math.pow(c,2)*n+Math.pow(d,2)*(s-n)+Math.pow(p,2)*(r-s)+Math.pow(m,2)*(l-r))/f),w.peakVel=parseFloat(i),w.peakAcc=parseFloat(o),w.rmsVel=parseFloat(t),w.rmsAcc=parseFloat(a),ce()};p.find("#profileButtons").on("click",".profileButton",function(i){i.preventDefault();var t=e(this).attr("id");void 0!=t&&r.activeProfileIndex!=parseInt(t.slice(3))&&(r.activeProfileIndex=parseInt(t.slice(3)),r.smoothness=A.find("#smoothnessInputContainer").find(".smoothnessDropDown").find(".smoothnessDDMenu")[0].selectedIndex,p.find("#profileButtons").find(".profileButton.btn-primary").removeClass("btn-primary").addClass("btn-default"),e(this).addClass("btn-primary").removeClass("btn-default"),r.velocityJerk=void 0,W(),ve())});var H=function(){w.peakVel="",w.peakAcc="",w.rmsVel="",w.rmsAcc="",ce()},W=function(){void 0==C.movedistance&&(C.movedistance=y.movedistance=isNaN(parseFloat(r.moveDistance))?r.moveDistance:parseFloat(r.moveDistance)),void 0==C.movedtime&&(C.movedtime=y.movedtime=isNaN(parseFloat(r.moveTime))?r.moveTime:parseFloat(r.moveTime)),void 0==C.dweltime&&(C.dweltime=y.dweltime=isNaN(parseFloat(r.dwellTime))?r.dwellTime:parseFloat(r.dwellTime)),void 0===r.velocityJerk?(ne(),C.velocityJerk=y.velocityJerk=isNaN(parseFloat(r.indexType))?r.indexType:parseFloat(r.indexType)):C.velocityJerk=y.velocityJerk=isNaN(parseFloat(r.velocityJerk))?r.velocityJerk:parseFloat(r.velocityJerk),void 0==C.smoothness&&(C.smoothness=y.smoothness=isNaN(parseFloat(r.smoothness))?r.smoothness:parseFloat(r.smoothness))},X=function(){var e=!0;return A.find(".input-entries .form-group").removeClass("has-error"),!isNaN(C.movedistance)&&C.movedistance>0||(A.find("#moveDistanceInputContainer").addClass("has-error"),e=!1),!isNaN(C.movedtime)&&C.movedtime>0||(A.find("#moveTimeInputContainer").addClass("has-error"),e=!1),!isNaN(C.dweltime)&&C.dweltime>=0||(A.find("#dwellTimeInputContainer").addClass("has-error"),e=!1),!isNaN(C.velocityJerk)&&C.velocityJerk>=0&&C.velocityJerk<=100||(A.find("#indexTypeInputContainer").addClass("has-error"),e=!1),r.assessmentMode&&A.find(".input-entries .form-group").removeClass("has-error"),e},Z=function(){M.time=0,M.position=0,M.velocity=0},K=function(e){I=0;for(var i=_.vel.data[0][0],t=1;t<_.vel.data.length;t++)I+=(_.vel.data[t][0]-i)*_.vel.data[t][1],i=_.vel.data[t][0];u=-(1/0);var o=JSON.parse(JSON.stringify(C));o.velocityJerk=100,o.velocityJerk=0;for(var a=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(o,M).segmentData,t=0;t<Object.keys(a).length;t++)for(var n=0;n<a[Object.keys(a)[t]].length;n++)u<a[Object.keys(a)[t]][n].velocity_initial&&(u=a[Object.keys(a)[t]][n].velocity_initial);var s=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Velocity,"SI",r.graphUnits.Velocity);s&&1!=s&&(u=parseFloat(u)*s),h=2*u,e.dwell&&(O=e.dwell[0].time_initial)},Q=function(i,t,o){e('<div id="tooltip">'+o+"</div>").css({top:t+5,left:i+15}).appendTo(m).fadeIn(200)},$=function(e){var i=null,t=null,o=null;p.find("#velGraph").unbind("plothover").bind("plothover",function(a,n,s){if(i=s,s){var r=m.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:Q(s.pageX-r.left,s.pageY-r.top,"Drag to change Velocity Jerk"),o=s.seriesIndex;break;case 2:Q(s.pageX-r.left,s.pageY-r.top,"Drag to change Dwell Time"),o=s.seriesIndex;break;case 3:Q(s.pageX-r.left,s.pageY-r.top,"Drag to change Move Time"),o=s.seriesIndex}}else m.find("#tooltip").remove(),o=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var l;if(n.y>=h)l=100;else if(n.y<=u)l=0;else{var c=parseFloat(C.movedtime)-I/n.y;l=c*n.y*100/I}C.velocityJerk=parseFloat(Math.ceil(l));break;case 2:var d;d=n.x<O?0:parseFloat(n.x-O),y.dweltime=parseFloat(d),C.dweltime=parseFloat(d);break;case 3:var p;p=n.x<=0?1:n.x,y.movedtime=parseFloat(p),C.movedtime=parseFloat(p)}ve(!0)}}),p.find("#velGraph").unbind("mousedown").bind("mousedown",function(){if(m.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>=u&&i.datapoint[1]<=h&&(t=i);break;case 2:i.datapoint[0]>=O&&(t=i);break;case 3:i.datapoint[0]>0&&(t=i)}}),p.find("#velGraph").unbind("mouseup").bind("mouseup",function(){
t&&r.onGraphDrag&&r.onGraphDrag(),t&&r.assessmentMode&&re(),t=null}),p.find("#velGraph").unbind("mouseleave").bind("mouseleave",function(){p.find("#velGraph").mouseup()})},ee=function(e){var i=null,t=null,o=null;p.find("#posGraph").unbind("plothover").bind("plothover",function(a,n,s){if(i=s,l=!0,s){var c=m.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:Q(s.pageX-c.left,s.pageY-c.top,"Drag to change Move Distance"),o=s.seriesIndex}}else m.find("#tooltip").remove(),o=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var d;d=n.y<=0?1:parseFloat(n.y);var p=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position,"SI");p&&1!=p&&(d=parseFloat(d)*p),y.movedistance=parseFloat(d),C.movedistance=parseFloat(d)}ve(!0)}}),p.find("#posGraph").unbind("mousedown").bind("mousedown",function(){if(m.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i)}}),p.find("#posGraph").unbind("mouseup").bind("mouseup",function(){t&&r.onGraphDrag&&r.onGraphDrag(),t&&r.assessmentMode&&re(),t=null}),p.find("#posGraph").unbind("mouseleave").bind("mouseleave",function(){p.find("#posGraph").mouseup()})},ie=function(e){var i=null,t=null,o=null;p.find("#aioGraph").unbind("plothover").bind("plothover",function(a,n,s){if(i=s,s){var l=m.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:Q(s.pageX-l.left,s.pageY-l.top,"Drag to change Move Distance"),o=s.seriesIndex;break;case 3:Q(s.pageX-l.left,s.pageY-l.top,"Drag to change Velocity Jerk"),o=s.seriesIndex;break;case 4:Q(s.pageX-l.left,s.pageY-l.top,"Drag to change Dwell Time"),o=s.seriesIndex;break;case 5:Q(s.pageX-l.left,s.pageY-l.top,"Drag to change Move Time"),o=s.seriesIndex}}else m.find("#tooltip").remove(),o=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var c;c=n.y<=0?1:parseFloat(n.y);var d=COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData.Position,r.graphUnits.Position,"SI");d&&1!=d&&(c=parseFloat(c)*d),y.movedistance=parseFloat(c),C.movedistance=parseFloat(c);break;case 3:var p,f=r.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?n.y2:n.y1;if(f>=h)p=100;else if(u>=f)p=0;else{var v=parseFloat(C.movedtime)-I/f;p=v*f*100/I}y.velocityJerk=parseFloat(Math.ceil(p)),C.velocityJerk=parseFloat(Math.ceil(p));break;case 4:var T;T=n.x<O?0:parseFloat(n.x-O),y.dweltime=parseFloat(T),C.dweltime=parseFloat(T);break;case 5:var g;g=n.x<=0?1:n.x,y.movedtime=parseFloat(g),C.movedtime=parseFloat(g)}ve(!0)}}),p.find("#aioGraph").unbind("mousedown").bind("mousedown",function(){if(m.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i);break;case 3:i.datapoint[1]>=u&&i.datapoint[1]<=h&&(t=i);break;case 4:i.datapoint[0]>=O&&(t=i);break;case 5:i.datapoint[0]>0&&(t=i)}}),p.find("#aioGraph").unbind("mouseup").bind("mouseup",function(){t&&r.onGraphDrag&&r.onGraphDrag(),t&&r.assessmentMode&&re(),t=null}),p.find("#aioGraph").unbind("mouseleave").bind("mouseleave",function(){p.find("#aioGraph").mouseup()})},te=function(){if(v){var i=p.find("#posGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&(t++,i.width(t)),i.css("top","-3%")}if(T){var i=p.find("#velGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&(t++,i.width(t)),i.css("top","-3%")}if(g){var i=p.find("#accGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&(t++,i.width(t)),i.css("top","-3%")}if(b){var i=p.find("#jerkGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&(t++,i.width(t)),i.css("top","-3%")}if(x)for(var o=p.find("#aioGraph .axisLabels"),a=0;a<o.length;a++){var i=e(o[a]);if(!i.hasClass("xaxisLabel")){var t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&(t++,i.width(t)),i.css("top","-3%")}}},oe=function(e){f=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(C,M);var i=f.elementsData,t=i.length;if(t>0){var o=100;F();for(var a=0;t>a;a++)q(i[a],o)}z(f.segmentData),Y(f.segmentData),ae(_),ae(N),K(f.segmentData),e?B(f.segmentData):G(f.segmentData)},ae=function(e){for(var i=r.graphUnits,t=Object.keys(e),o=0;o<t.length;o++){var a=COSMATT.MotionProfile.configuration.UnitData[e[t[o]].graphtype]?COSMATT.UNITCONVERTER.getConversionRatioById(COSMATT.MotionProfile.configuration.UnitData[e[t[o]].graphtype],"SI",i[e[t[o]].graphtype]):void 0;if(a&&1!=a)for(var n=0;n<e[t[o]].data.length;n++)e[t[o]].data[n][1]*=a}},ne=function(){switch(r.activeProfileIndex=parseInt(r.activeProfileIndex),r.activeProfileIndex){case 1:r.indexType=50;break;case 2:r.indexType=100;break;case 3:r.indexType=0}},se=function(){l=!1,ve()},re=function(){r.assessmentMode&&r.userResponseNotifier&&r.userResponseNotifier({movedistance:{value:C.movedistance,unit:r.moveDistanceUnit},movedtime:{value:C.movedtime,unit:r.moveTimeUnit},dweltime:{value:C.dweltime,unit:r.dwellTimeUnit},velocityJerk:{value:C.velocityJerk}})},le=function(){var i=m.find("#inputControls");i.append('<form class="form-horizontal"> <div class="input-entries inputs"> <div class="form-group input-container" id="moveDistanceInputContainer"> <label for="moveDistance" class="control-label">Move Distance</label> <div class="combo-container comboMoveDistance"></div></div><div class="form-group input-container" id="moveTimeInputContainer"> <label for="moveTime" class="control-label">Move Time</label> <div class="combo-container comboMoveTime"></div></div><div class="form-group input-container" id="dwellTimeInputContainer"> <label for="dwellTime" class="control-label">Dwell Time</label> <div class="combo-container comboDwellTime"></div></div><div class="form-group input-container" id="indexTypeInputContainer"> <label for="indexType" class="control-label">Velocity Factor</label> <div class="combo-container comboIndexType"></div></div><div class="form-group input-container" id="smoothnessInputContainer"> <label for="smoothness" class="control-label">Smoothness</label> <div class="combo-container smoothnessDropDown"></div></div></div><div class="output-entries inputs"> <div class="form-group input-container" id="peakVelocityInputContainer"> <label for="peakVelocity" class="control-label">Peak Velocity</label> <div class="combo-container comboPeakVelocity"></div></div><div class="form-group input-container" id="rmsVelocityInputContainer"> <label for="rmsVelocity" class="control-label">RMS Velocity</label> <div class="combo-container comboRmsVelocity"></div></div><div class="form-group input-container" id="peakAccInputContainer"> <label for="peakAcc" class="control-label">Peak Acceleration</label> <div class="combo-container comboPeakAcc"></div></div><div class="form-group input-container" id="rmsAccInputContainer"> <label for="rmsAcc" class="control-label">RMS Acceleration</label> <div class="combo-container comboRmsAcc"></div></div></div></form>'),i.find("#moveDistanceInputContainer").find(".comboMoveDistance").unitsComboBox({unitType:"ANGULARDISTANCE",unit:r.moveDistanceUnit,roundOfNumber:"2",value:r.moveDistance,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?r.moveDistanceUnit=this.unit:"textbox"==this.type&&(y.movedistance=isNaN(parseFloat(this.value))?"":parseFloat(this.value),C.movedistance=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),se()),re())}});var t=i.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");t.setDropBoxItem(r.moveDistanceUnitDefaultSelected),i.find("#moveTimeInputContainer").find(".comboMoveTime").unitsComboBox({unitType:"TIME",unit:r.moveTimeUnit,roundOfNumber:"2",value:r.moveTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?r.moveTimeUnit=this.unit:"textbox"==this.type&&(y.movedtime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),C.movedtime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),se()),re())}}),i.find("#dwellTimeInputContainer").find(".comboDwellTime").unitsComboBox({unitType:"TIME",unit:r.dwellTimeUnit,roundOfNumber:"2",value:r.dwellTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?r.dwellTimeUnit=this.unit:"textbox"==this.type&&(y.dweltime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),C.dweltime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),se()),re())}}),i.find("#indexTypeInputContainer").find(".comboIndexType").unitsComboBox({unitType:"PERCENTAGE",unit:r.velocityFactorUnit,roundOfNumber:"2",value:r.indexType,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("textbox"==this.type&&(y.velocityJerk=isNaN(parseFloat(this.value))?"":parseFloat(this.value),C.velocityJerk=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?0:parseFloat(this.SIValue),se()),re())}});var o=i.find("#smoothnessInputContainer").find(".smoothnessDropDown");o.append('<select class="form-control smoothnessDDMenu"><option value=automatic>Automatic<option value=standard>Standard<option value=maximum>Maximum</select>'),r.smoothness&&o.find("select option").eq(r.smoothness).attr("selected",!0),o.find("select").on("change",function(e){y.smoothness=e.target.selectedIndex,C.smoothness=e.target.selectedIndex,ve(!0)}),i.find("#peakVelocityInputContainer").find(".comboPeakVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:r.peakVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(r.peakVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:r.rmsVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(r.rmsVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#peakAccInputContainer").find(".comboPeakAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:r.peakAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(r.peakAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),i.find("#rmsAccInputContainer").find(".comboRmsAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:r.rmsAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:r.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(r.rmsAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),i.resize(function(t){var o=e(t.target);if(o.width()<839){m.addClass("lowerResolution"),i.find(".input-entries").css("width","55%"),i.find(".output-entries").css("width","45%");var a=i.find(".input-container .combo-container .cosmatt-unitComboBox");a.find(".unitTextBox").css("max-width","100px"),a.find(".unitComboBox").css("max-width","100px")}else if(o.width()>=839){m.removeClass("lowerResolution"),i.find(".input-entries").css("width","50%"),i.find(".output-entries").css("width","50%");var a=i.find(".input-container .combo-container .cosmatt-unitComboBox");a.find(".unitTextBox").css("max-width","100px"),a.find(".unitComboBox").css("max-width","100px")}o.width()<1239&&o.width()>839?m.addClass("resizeon1240"):o.width()>=1239&&m.removeClass("resizeon1240")}),i.width()<1239&&i.trigger("resize")},ce=function(){if(!l)return void(l=!0);var e;e=A.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox"),C.movedistance?e.setTextBoxValue(e.getValueInSelectedUnit(C.movedistance)):e.setTextBoxValue(C.movedistance),e=A.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox"),C.movedtime?e.setTextBoxValue(e.getValueInSelectedUnit(C.movedtime)):e.setTextBoxValue(C.movedtime),e=A.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox"),C.dweltime?e.setTextBoxValue(e.getValueInSelectedUnit(C.dweltime)):e.setTextBoxValue(C.dweltime),e=A.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox"),C.velocityJerk?e.setTextBoxValue(e.getValueInSelectedUnit(C.velocityJerk)):e.setTextBoxValue(C.velocityJerk),e=A.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox"),w.peakVel?e.setTextBoxValue(e.getValueInSelectedUnit(w.peakVel)):e.setTextBoxValue(w.peakVel),e=A.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox"),w.rmsVel?e.setTextBoxValue(e.getValueInSelectedUnit(w.rmsVel)):e.setTextBoxValue(w.rmsVel),e=A.find("#peakAccInputContainer").find(".comboPeakAcc").data("unitsComboBox"),w.peakAcc?e.setTextBoxValue(e.getValueInSelectedUnit(w.peakAcc)):e.setTextBoxValue(w.peakAcc),e=A.find("#rmsAccInputContainer").find(".comboRmsAcc").data("unitsComboBox"),w.rmsAcc?e.setTextBoxValue(e.getValueInSelectedUnit(w.rmsAcc)):e.setTextBoxValue(w.rmsAcc)},de=function(e){var i=m.find("#profileButtons");i.find("#btn"+r.activeProfileIndex).addClass("btn-primary").removeClass("btn-default"),r.showProfiles&&pe(r.showProfiles,i),r.showGraphDragHandles&&me(r.showGraphDragHandles),r.readOnlyInputs&&fe(r.readOnlyInputs),r.hideInputs&&ue(r.hideInputs)},pe=function(e,i){if(i.find("button").hide(),"boolean"==typeof e)e===!0?i.show():i.hide();else if(e.length>0)for(var t in e)t=e[t],i.find("#btn"+t.slice(t.length-1)).show()},me=function(e){"boolean"==typeof e&&(e===!0?r.showGraphDragHandles=[COSMATT.MotionProfile.configuration.GraphHandles.position,COSMATT.MotionProfile.configuration.GraphHandles.peakVelocity,COSMATT.MotionProfile.configuration.GraphHandles.moveTime,COSMATT.MotionProfile.configuration.GraphHandles.dwellTime]:r.showGraphDragHandles=[])},fe=function(e){if("boolean"==typeof e&&(e=e===!0?[COSMATT.MotionProfile.configuration.DataFields.moveDistance,COSMATT.MotionProfile.configuration.DataFields.moveTime,COSMATT.MotionProfile.configuration.DataFields.dwellTime,COSMATT.MotionProfile.configuration.DataFields.velocityFormFactor,COSMATT.MotionProfile.configuration.DataFields.peakVelocity,COSMATT.MotionProfile.configuration.DataFields.rmsVelocity,COSMATT.MotionProfile.configuration.DataFields.peakAccelaration,COSMATT.MotionProfile.configuration.DataFields.rmsAccelaration]:[]),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],A.find("#"+i+"InputContainer").find(".combo"+i.charAt(0).toUpperCase()+i.slice(1)).data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}))},ue=function(e){if("boolean"==typeof e&&(e===!0?A.hide():A.show()),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],A.find("#"+i+"InputContainer").hide())},he=function(){var i=e("body"),t='<div id="editConfigBtnContainer"><button class="btn btn-default editConfigBtn pull-right btn-lg" type="button" href="configWindow.html" data-target="#theModal" data-toggle="modal">Edit Configurations</div>';i.append(t)};le(),de(m),r.showEditConfigButton&&he(),r.showCheckAnswerButton,W(),Z();var ve=function(e,i){X()?i?setTimeout(function(e){oe()},0):oe(e):(F(),H(),setTimeout(function(e){j(),J(!1)},0)),te(),p.on("resize",function(){te()})};return ve(!1,!0),{ref:this,updateInputs:t,markAnswers:o,getProfileValues:n}}}(jQuery);var Cosmatt=function(e){function i(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}var t={};return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=0)}([function(e,i,t){Object.defineProperty(i,"__esModule",{value:!0});var o=3,a=6,n=-4,s=function(){function e(e){this.superscripts={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","-":"⁻"},this.options={},e||(e={}),this.options.significantDigits=e.significantDigits||o,this.options.maxPositiveExponent=e.maxPositiveExponent||a,this.options.minNegativeExponent=e.minNegativeExponent||n}return e.prototype.format=function(e){if(e=parseFloat(e),Number.isNaN(e))throw new Error("not a number exception!");if(Number.isInteger(e)){if(Math.abs(e)>=Math.pow(10,this.options.maxPositiveExponent)){var i=e.toExponential(this.options.significantDigits-1);return this.toSuperscript(i)}return e.toString()}if(Math.abs(e)>=Math.pow(10,this.options.maxPositiveExponent)){var t=e.toPrecision(this.options.significantDigits);return this.toSuperscript(t)}if(Math.abs(e)>1)return this.removeTrailingZeroesAfterDecimal(e.toFixed(this.options.significantDigits));if(Math.abs(e)<1&&Math.abs(e)>=Math.pow(10,this.options.minNegativeExponent)){var o=Math.abs(this.options.minNegativeExponent)+this.options.significantDigits-1;return this.removeTrailingZeroesAfterDecimal(e.toFixed(o))}var a=e.toExponential(this.options.significantDigits-1);return this.toSuperscript(a)},e.prototype.toSuperscript=function(e){var i;if(e.includes("e+"))i=e.split("e+");else{if(!e.includes("e-"))return e;i=e.split("e")}for(var t="",o=0,a=i[1];o<a.length;o++){var n=a[o];t+=this.superscripts[n]}return i[1]=t,i.join("x10")},e.prototype.removeTrailingZeroesAfterDecimal=function(e){return parseFloat(e).toString()},e}();i.NumberFormatter=s}]);