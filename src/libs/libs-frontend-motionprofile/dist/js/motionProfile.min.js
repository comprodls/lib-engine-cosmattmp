"use strict";var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.AccelDecelSegment=function(){var e,i,t,a,o,n,l,s,r,c,d,m,p,f,u,v,h,x,b,g,y,w,T={},C=function(){i=2/m-1,e=(1-i)*(1-p)/2,t=1-e-i,a=m*e/2,o=m*i,n=m*t/2,l=a/3*e,s=(o+2*a)/2*i,r=(1-n/3)*t,c=l+s+r,l/=c,s/=c,r/=c,d=.5/c},M=function(e){switch(e.permutation){case"TIME_DISTANCE":f=e.time,u=e.distance/f,v=y+2*(u-y)*d,h=v-y,x=f*y,b=e.distance-x;break;case"TIME_VELOCITY":f=e.time,h=e.velocity-y,b=f*h*c,x=f*y}},_=function(){if(e>0){var i=f*e,t=x*e+b*l,o=h*a,n=g,s=n+i,r=w,c=r+t,d=y,m=d+o,p=(m+d)/2,u=(t-p*i)*(-2/Math.pow(i,3)),v=(-3*u*Math.pow(i,2)+o)/(2*i),C=d,M=r,_=0,k=6*u*(s-n)+2*v,A=Math.abs(k),I=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),D=6*u,F={time_initial:n,time_final:s,velocity_initial:d,velocity_final:m,acceleration_initial:_,acceleration_final:k,position_initial:r,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:C,motion_equation_zero_order_coefficient:M,rms_acceleration:A,rms_velocity:I,jerk:D};T.ElementsData.push(F),g=s,w=c,y=m}},k=function(){if(i>0){var e=f*i,t=x*i+b*s,a=h*o,n=g,l=n+e,r=w,c=r+t,d=y,m=d+a,p=0,u=(-3*p*Math.pow(e,2)+a)/(2*e),v=d,C=r,M=2*u,_=6*p*(l-n)+2*u,k=Math.abs(_),A=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),I=6*p,D={time_initial:n,time_final:l,velocity_initial:d,velocity_final:m,acceleration_initial:M,acceleration_final:_,position_initial:r,position_final:c,motion_equation_third_order_coefficient:p,motion_equation_second_order_coefficient:u,motion_equation_first_order_coefficient:v,motion_equation_zero_order_coefficient:C,rms_acceleration:k,rms_velocity:A,jerk:I};T.ElementsData.push(D),g=l,w=c,y=m}},A=function(){if(t>0){var e=f*t,i=x*t+b*r,a=h*n,o=g,l=o+e,s=w,c=s+i,d=y,m=d+a,p=(m+d)/2,u=(i-p*e)*(-2/Math.pow(e,3)),v=(-3*u*Math.pow(e,2)+a)/(2*e),C=d,M=s,_=2*v,k=0,A=Math.abs(k),I=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),D=6*u,F={time_initial:o,time_final:l,velocity_initial:d,velocity_final:m,acceleration_initial:_,acceleration_final:k,position_initial:s,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:C,motion_equation_zero_order_coefficient:M,rms_acceleration:A,rms_velocity:I,jerk:D};T.ElementsData.push(F),g=l,w=c,y=m}},I=function(){_(),k(),A()},D=function(){var e=T.ElementsData,i=e.length,t=e[i-1].position_final-e[0].position_initial;T.SegmentData.distance=t},F=function(e,i){return T={},T.ElementsData=[],T.SegmentData={},p=e.skewPercentage/100||0,m=1/(1-e.jerkPercentage/200)||1,g=i.time||0,y=i.velocity||0,w=i.position||0,C(),M(e),I(),D(),T};return{calculate:F}}();var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.CruiseSegment=function(){var e,i,t,a,o,n={},l=function(e){switch(e.permutation){case"TIME":a=e.time,o=a*i}},s=function(){var l=e,s=l+a,r=t,c=r+o,d=i,m=d,p=0,f=0,u=d,v=r,h=0,x=0,b=Math.abs(x),g=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),y={time_initial:l,time_final:s,velocity_initial:d,velocity_final:m,acceleration_initial:h,acceleration_final:x,position_initial:r,position_final:c,motion_equation_third_order_coefficient:p,motion_equation_second_order_coefficient:f,motion_equation_first_order_coefficient:u,motion_equation_zero_order_coefficient:v,rms_acceleration:b,rms_velocity:g};n.ElementsData.push(y)},r=function(){var e=n.ElementsData,i=e[0].position_final-e[0].position_initial;n.SegmentData.distance=i},c=function(a,o){return n={},n.ElementsData=[],n.SegmentData={},e=o.time||0,i=o.velocity||0,t=o.position||0,l(a),s(),r(),n};return{calculate:c}}();var COSMATT=COSMATT||{};COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.ProfileIndexModel=function(){var e,i,t,a,o,n,l,s,r,c,d,m,p,f,u,v,h,x,b=[],g={},y=0,w=0,T=function(e){if(e=parseInt(e),!isNaN(e))switch(e){case 0:y=0,w=0;break;case 1:y=40,w=40;break;case 2:y=100,w=100}},C=function(e){var i,t;i=void 0!=e.velocityJerk?e.velocityJerk:50,t=void 0!=e.velocitySkew?e.velocitySkew:0,l=i/100+1,s=t/100},M=function(){if(u=v=h=x=0,c=(o-i*n)/n,d=c*l,0==d)console.log("cruise velocity zero");else{var T=2*(d*n-(o-i*n))/d;if(m=T*(1+s)/2,p=T*(1-s)/2,f=n-T,m>0){var C={},M={};C.permutation="TIME_VELOCITY",C.velocity=d+i,C.time=m,C.jerkPercentage=y,C.skewPercentage=0,M.position=t,M.velocity=i,M.time=e;var _=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(C,M);u=_.SegmentData.distance,b=b.concat(_.ElementsData),g.accel=_.ElementsData}if(f>0){var k={},A={};k.permutation="TIME",k.velocity=d+i,k.time=f,k.skewPercentage=0,A.position=t+u,A.velocity=i+d,A.time=e+m;var I=COSMATT.ProfileCalculation.CruiseSegment.calculate(k,A);h=I.SegmentData.distance,b=b.concat(I.ElementsData),g.cruise=I.ElementsData}if(p>0){var D={},F={};D.permutation="TIME_VELOCITY",D.velocity=a,D.time=p,D.jerkPercentage=w,D.skewPercentage=0,F.position=t+u+h,F.velocity=d+i,F.time=e+m+f;var O=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(D,F);v=O.SegmentData.distance,b=b.concat(O.ElementsData),g.decel=O.ElementsData}if(r>0){var P={},V={};P.permutation="TIME",P.velocity=a,P.time=r,P.skewPercentage=0,V.position=t+o,V.velocity=a,V.time=e+n;var G=COSMATT.ProfileCalculation.CruiseSegment.calculate(P,V);x=G.SegmentData.distance,b=b.concat(G.ElementsData),g.dwell=G.ElementsData}}},_=function(l,s){if(b=[],g=[],o=l.movedistance||0,n=l.movedtime||0,r=l.dweltime||0,C(l),T(l.smoothness),e=s.time||0,i=s.velocity||0,t=s.position||0,a=i,!(o>0&&n>0))throw{message:"Time and distance needs to be positive values for Profile calculations"};return M(),{elementsData:b,segmentData:g}};return{calculate:_}}();var COSMATT=COSMATT||{};COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.configuration={DataFields:{moveDistance:"moveDistance",moveTime:"moveTime",dwellTime:"dwellTime",velocityFormFactor:"indexType",peakVelocity:"peakVelocity",rmsVelocity:"rmsVelocity",peakAccelaration:"peakAcc",rmsAccelaration:"rmsAcc",showAll:!0},Profiles:{profile1:"profile1",profile2:"profile2",profile3:"profile3",showAll:!0},GraphMode:{individualAxis:0,sameAxis:1},Graphs:{position:"pos",velocity:"vel",acceleration:"acc",jerk:"jerk",showAll:!0},GraphHandles:{position:"position",peakVelocity:"peakVelocity",moveTime:"moveTime",dwellTime:"dwellTime",showAll:!0},Smoothness:{automatic:0,standard:1,maximum:2}},function(e){e.fn.motionProfile=function(i){function t(e){if(e.movedistance){b.movedistance=isNaN(parseFloat(e.movedistance.value))?"":parseFloat(e.movedistance.value);var i=w.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");i.setTextBoxValue(b.movedistance),e.movedistance.unit&&(l.moveDistanceUnit=e.movedistance.unit,i.setDropBoxItem(l.moveDistanceUnit))}if(e.movedtime){b.movedtime=isNaN(parseFloat(e.movedtime.value))?"":parseFloat(e.movedtime.value);var i=w.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox");i.setTextBoxValue(b.movedtime),e.movedtime.unit&&(l.moveTimeUnit=e.movedtime.unit,i.setDropBoxItem(l.moveTimeUnit))}if(e.dweltime){b.dweltime=isNaN(parseFloat(e.dweltime.value))?"":parseFloat(e.dweltime.value);var i=w.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox");i.setTextBoxValue(b.dweltime),e.dweltime.unit&&(l.dwellTimeUnit=e.dweltime.unit,i.setDropBoxItem(l.dwellTimeUnit))}if(e.velocityJerk){b.velocityJerk=isNaN(parseFloat(e.velocityJerk.value))?"":parseFloat(e.velocityJerk.value);var i=w.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");i.setTextBoxValue(b.velocityJerk)}me()}function a(e){var i;if(e.movedistance){i=e.movedistance.status?"correct":"incorrect";var t=w.find("#moveDistanceInputContainer").find(".comboMoveDistance");t.addClass(i),t.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}})}if(e.movedtime){i=e.movedtime.status?"correct":"incorrect";var a=w.find("#moveTimeInputContainer").find(".comboMoveTime");a.addClass(i),a.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}})}if(e.dweltime){i=e.dweltime.status?"correct":"incorrect";var n=w.find("#dwellTimeInputContainer").find(".comboDwellTime");n.addClass(i),n.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}})}if(e.velocityJerk){i=e.velocityJerk.status?"correct":"incorrect";var l=w.find("#indexTypeInputContainer").find(".comboIndexType");l.addClass(i),l.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}})}o()}function o(){if(p){var e=p.getData();e[1]&&(e[1].hoverable=!1),p.setupGrid(),p.setData(e),p.draw()}if(f){var i=f.getData();i[1]&&(i[1].hoverable=!1),i[2]&&(i[2].hoverable=!1),i[3]&&(i[3].hoverable=!1),f.setupGrid(),f.setData(i),f.draw()}}var n={activeProfileIndex:1,moveDistance:20,moveTime:10,dwellTime:2,graphMode:COSMATT.MotionProfile.configuration.GraphMode.individualAxis,showGraphs:[COSMATT.MotionProfile.configuration.Graphs.velocity],showGraphDragHandles:COSMATT.MotionProfile.configuration.GraphHandles.showAll,readOnlyInputs:!1,hideInputs:!1,showProfiles:COSMATT.MotionProfile.configuration.Profiles.showAll,smoothness:COSMATT.MotionProfile.configuration.Smoothness.automatic,showCheckAnswerButton:!1,assessmentMode:!1,moveDistanceUnit:"radian",moveTimeUnit:"second",dwellTimeUnit:"second",peakVelocityUnit:"radianpersecond",rmsVelocityUnit:"radianpersecond",peakAccelarationUnit:"radianpersecondsquare",rmsAccelarationUnit:"radianpersecondsquare"};i.assessmentMode&&(n.moveDistance="",n.moveTime="",n.dwellTime="",n.activeProfileIndex=3);var l=e.extend(n,i);l.graphModeVal=l.graphMode;var s=this,r=e('<div class="cosmatt-motionProfile unselectable" unselectable="on"></div>');s.append(r),r.append('<div id="profileButtons"><button class="btn btn-default profileButton" id="btn1">Profile 1</button><button class="btn btn-default profileButton" id="btn2">Profile 2</button><button class="btn btn-default profileButton" id="btn3">Profile 3</button></div><div id="graphContainer" class=""></div><div id="inputControls"></div>'),i.assessmentMode&&r.addClass("assessment-mode");var c,d,m,p,f,u,v,h,x={},b={},g={},y={},w=r.find("#inputControls"),T=0,C=0,M=void 0!==l.xmin?parseFloat(l.xmin):15,_=void 0!==l.posYmin?parseFloat(l.posYmin):30,k=void 0!==l.velYmin?parseFloat(l.velYmin):8,A=void 0!==l.accYmin?parseFloat(l.accYmin):2,I=void 0!==l.jerkYmin?parseFloat(l.jerkYmin):3,D={vel:{label:"Velocity",data:[],color:"#f7252a",lines:{show:!0},hoverable:!1,clickable:!1},pos:{label:"Position",data:[],color:"#619beb",series:{lines:{show:!1}},hoverable:!1,clickable:!1},acc:{label:"Acceleration",data:[],color:"#ff8a65",series:{lines:{show:!1}},hoverable:!1,clickable:!1},jerk:{label:"Jerk",data:[],color:"#40cc43",series:{lines:{show:!1}},hoverable:!1,clickable:!1}},F={vel:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},pos:{data:[],color:"#619beb",lines:{show:!1},points:{show:!0,fillColor:"#619beb"}},acc:{label:"Acceleration",data:[],color:"#ff8a65"},jerk:{label:"Jerk",data:[],color:"#40cc43"},dwell:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},movetime:{data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}}},O={series:{lines:{show:!0}},xaxis:{axisLabel:"Time (sec)",position:"bottom"},legend:{show:!0},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,bottom:1,right:0,left:1}}},P=function(){for(var e in D)D.hasOwnProperty(e)&&(D[e].data=[]);for(var e in F)F.hasOwnProperty(e)&&(F[e].data=[])},V=function(e,i,t){var a=Object.keys(e),o=0;for(var n in a)if(a.hasOwnProperty(n)){var l=1.2*e[a[n]][0][i];l>o&&(o=l)}return t>o&&(o=t),o},G=function(){var e=[];return l.showGraphs.length>0&&(l.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?e.push(D.pos,F.pos):e.push([],[]),l.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.velocity)>-1?e.push(D.vel,F.vel,F.dwell,F.movetime):e.push([],[],[],[]),l.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.acceleration)>-1?e.push(D.acc):e.push([]),l.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.jerk)>-1?e.push(D.jerk):e.push([])),e},S=function(e){var i=(Object.keys(e),V(e,"time_final",M));if(p){var t=V(e,"position_final",_);p.getOptions().yaxes[0].max=t,p.getOptions().yaxes[0].min=-1*t,p.getOptions().xaxes[0].max=i,p.setupGrid(),p.setData([D.pos,F.pos]),p.draw()}if(f){var a=V(e,"velocity_final",k);f.getOptions().yaxes[0].max=a,f.getOptions().yaxes[0].min=-1*a,f.getOptions().xaxes[0].max=i,f.setupGrid(),f.setData([D.vel,F.vel,F.dwell,F.movetime]),f.draw()}if(u){var o=V(e,"acceleration_final",A);u.getOptions().yaxes[0].max=o,u.getOptions().yaxes[0].min=-1*o,u.getOptions().xaxes[0].max=i,u.setupGrid(),u.setData([D.acc]),u.draw()}if(h){var n=V(e,"jerk",I);h.getOptions().yaxes[0].max=n,h.getOptions().yaxes[0].min=-1*n,h.getOptions().xaxes[0].max=i,h.setupGrid(),h.setData([D.jerk]),h.draw()}if(v){for(var l,s=v.getOptions().yaxes,r=0;r<s.length;r++){switch(s[r].axisLabel){case"Position (rad)":l=V(e,"position_final",_);break;case"Velocity (rad/sec)":l=V(e,"velocity_final",k);break;case"Acceleration (rad/sec^2)":l=V(e,"acceleration_final",A);break;case"Jerk (rad/sec^3)":l=V(e,"jerk",I)}v.getOptions().yaxes[r].max=l,v.getOptions().yaxes[r].min=-1*l}v.getOptions().xaxes[0].max=i,v.setupGrid(),v.setData(G()),v.draw()}},B=function(e){N(e)},N=function(i){var t=r.find("#graphContainer"),a=!0,o=function(){p&&(p=p.destroy()),f&&(f=f.destroy()),u&&(u=u.destroy()),h&&(h=h.destroy()),v&&(v=v.destroy()),t.find(".graphArea").remove(),i?(L(t,i),a=!1):(J(),a=!1)};t.resize(function(n){var s=e(n.target);"graphContainer"===s[0].id?s.width()<777&&l.showGraphs.length>1&&0===l.graphModeVal&&0===l.graphMode?(l.graphMode=1,o()):s.width()>777&&l.showGraphs.length>1&&0===l.graphModeVal&&1===l.graphMode?(l.graphMode=0,o()):a&&(a=!1,i?L(t,i):J()):s.hasClass("graphArea")&&s.height(s.width())}),t.trigger("resize")},L=function(i,t){var a=V(t,"position_final",_),o=V(t,"velocity_final",k),n=V(t,"acceleration_final",A),s=V(t,"time_final",M),r=V(t,"jerk",I);if(0===i.children().length)if(0===l.graphMode)for(var c=0;c<l.showGraphs.length;c++)i.append('<div id="'+l.showGraphs[c]+'Graph" class="graphArea"></div>');else 1===l.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');var d=i.find(".graphArea");d.css({width:100/i.children().length+"%","max-height":"400px","min-height":"250px","min-width":"250px"}),d.css("height",d.eq(0).width()),1===l.graphMode&&0===l.graphModeVal?d.css("max-height","300px"):0===l.graphMode&&0===l.graphModeVal&&d.css("max-height","400px");for(var m=i.find("#posGraph"),x=i.find("#velGraph"),b=i.find("#accGraph"),g=i.find("#jerkGraph"),y=i.find("#aioGraph"),w=Object.keys(D),T=Object.keys(F),c=0;c<w.length;c++)delete D[w[c]].yaxis;for(var c=0;c<T.length;c++)delete F[T[c]].yaxis;if(m.length>0){var C=e.extend(!0,{yaxis:{min:-1*a,max:a,position:"left",axisLabel:"Position (rad)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:s}},O);p=e.plot(m,[D.pos,F.pos],C),Q(p)}if(x.length>0){var P=e.extend(!0,{yaxis:{min:-1*o,max:o,position:"left",axisLabel:"Velocity (rad/sec)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:s}},O);f=e.plot(x,[D.vel,F.vel,F.dwell,F.movetime],P),X(f)}if(b.length>0){var S=e.extend(!0,{yaxis:{min:-1*n,max:n,position:"left",axisLabel:"Acceleration (rad/sec^2)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:s}},O);u=e.plot(b,[D.acc],S)}if(g.length>0&&setTimeout(function(){var i=e.extend(!0,{yaxis:{min:-1*r,max:r,position:"left",axisLabel:"Jerk (rad/sec^3)",tickFormatter:function(e,i){var t=e.toString();return t.length>5&&"-"==t[0]||t.length>4&&"-"!=t[0]?e.toExponential(1):e}},xaxis:{min:0,max:s}},O);h=e.plot(g,[D.jerk],i),Q(p)},4e3),y.length>0){var B={pos:{position:"left",axisLabel:"Position (rad)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*a,max:a},vel:{position:"left",axisLabel:"Velocity (rad/sec)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*o,max:o},acc:{position:"left",axisLabel:"Acceleration (rad/sec^2)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*n,max:n},jerk:{position:"left",axisLabel:"Jerk (rad/sec^3)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*r,max:r}},N=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<l.showGraphs.length;i++)e[i]=B[l.showGraphs[i]],D[l.showGraphs[i]].yaxis=i+1,F[l.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0,max:s}},O);N.legend={show:!0,backgroundOpacity:0},v=e.plot(y,G(),N),K(v)}l.onGraphPaint&&l.onGraphPaint()},J=function(){var i=r.find("#graphContainer");if(0===i.children().length)if(0===l.graphMode)for(var t=0;t<l.showGraphs.length;t++)i.append('<div id="'+l.showGraphs[t]+'Graph" class="graphArea"></div>');else 1===l.graphMode&&i.append('<div id="aioGraph" class="graphArea"></div>');var a=i.find(".graphArea");a.css({width:100/i.children().length+"%","max-height":"400px","min-height":"250px","min-width":"250px"}),a.css("height",a.eq(0).width()),1===l.graphMode&&0===l.graphModeVal?a.css("max-height","300px"):0===l.graphMode&&0===l.graphModeVal&&a.css("max-height","400px");for(var o=Object.keys(D),n=Object.keys(F),t=0;t<o.length;t++)delete D[o[t]].yaxis;for(var t=0;t<n.length;t++)delete F[n[t]].yaxis;var s=i.find("#posGraph"),c=i.find("#velGraph"),d=i.find("#accGraph"),m=i.find("#jerkGraph"),x=i.find("#aioGraph");if(s.length>0&&(p=e.plot(s,[D.pos,F.pos],e.extend(!0,{yaxis:{position:"left",axisLabel:"Position (rad)"},xaxis:{min:0}},O))),c.length>0&&(f=e.plot(c,[D.vel,F.vel,F.dwell,F.movetime],e.extend(!0,{yaxis:{position:"left",axisLabel:"Velocity (rad/sec)"},xaxis:{min:0}},O))),d.length>0&&(u=e.plot(d,[D.acc],e.extend(!0,{yaxis:{position:"left",axisLabel:"Acceleration (rad/sec^2)"},xaxis:{min:0}},O))),m.length>0&&(h=e.plot(m,[D.jerk],e.extend(!0,{yaxis:{position:"left",axisLabel:"Jerk (rad/sec^3)"},xaxis:{min:0}},O))),x.length>0){var b={pos:{position:"left",axisLabel:"Position (rad)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},vel:{position:"left",axisLabel:"Velocity (rad/sec)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},acc:{position:"left",axisLabel:"Acceleration (rad/sec^2)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},jerk:{position:"left",axisLabel:"Jerk (rad/sec^3)",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3}},g=e.extend(!0,{yaxes:function(){for(var e=[],i=0;i<l.showGraphs.length;i++)e[i]=b[l.showGraphs[i]],D[l.showGraphs[i]].yaxis=i+1,F[l.showGraphs[i]].yaxis=i+1;return e}(),xaxis:{min:0}},O);g.legend={show:!0,backgroundOpacity:0},v=e.plot(x,G(),g)}l.onGraphPaint&&l.onGraphPaint()},E=function(e,i){for(var t=e.time_initial,a=e.time_final,o=e.motion_equation_third_order_coefficient,n=e.motion_equation_second_order_coefficient,l=e.motion_equation_first_order_coefficient,s=e.motion_equation_zero_order_coefficient,r=a-t,c=r/i,d=0;r>d;d+=c)D.jerk.data.push([d+t,6*o]),D.acc.data.push([d+t,6*o*d+2*n]),D.vel.data.push([d+t,3*o*Math.pow(d,2)+2*n*d+l]),D.pos.data.push([d+t,o*Math.pow(d,3)+n*Math.pow(d,2)+l*d+s])},U=function(e){var i,t,a,o;if(e.cruise){var n=(e.cruise[0].time_final+e.cruise[0].time_initial)/2;i=[n,e.cruise[0].velocity_final]}else if(e.accel)for(var s=0,r=0;r<D.vel.data.length;r++)D.vel.data[r][1]>s&&(s=D.vel.data[r][1],i=D.vel.data[r]);e.dwell&&(t=[e.dwell[0].time_final,e.dwell[0].velocity_final]),e.decel?a=[e.decel[0].time_final,e.decel[0].velocity_final]:e.cruise&&(a=[e.cruise[0].time_final,e.cruise[0].velocity_final]);var c=parseFloat(b.movedtime+b.dweltime||0),d=parseFloat(b.movedistance);o=[c,d],l.showGraphDragHandles&&(l.showGraphDragHandles.indexOf("position")>-1&&F.pos.data.push(o),l.showGraphDragHandles.indexOf("peakVelocity")>-1&&F.vel.data.push(i),l.showGraphDragHandles.indexOf("moveTime")>-1&&F.movetime.data.push(a),l.showGraphDragHandles.indexOf("dwellTime")>-1&&F.dwell.data.push(t))},j=function(e){var i,t,a,o,n,l,s,r=e.dwell?e.dwell[0].time_final:0;n=l=s=0;var c,d,m,p;if(c=d=m=p=0,!e.cruise||e.accel||e.decel||(i=e.cruise[0].velocity_final,a=e.cruise[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),t=i,o=a,d=e.cruise[0].rms_acceleration,l=e.cruise[0].time_final),!e.cruise&&e.accel&&e.decel&&(i=e.accel[0].velocity_final,a=e.accel[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),t=i/Math.sqrt(3),o=Math.sqrt(Math.pow(e.accel[0].rms_acceleration,2)+Math.pow(e.decel[0].rms_acceleration,2)),c=e.accel[0].rms_acceleration,m=e.decel[0].rms_acceleration,n=e.accel[0].time_final,s=e.decel[0].time_final,l=n),e.cruise&&e.accel&&e.decel){i=e.cruise[0].velocity_final,a=e.accel[0].acceleration_final,i=parseFloat(i),a=parseFloat(a),n=e.accel[0].time_final,l=e.cruise[0].time_final,s=e.decel[0].time_final;var f=Math.max(n,l,s,r);t=i*Math.sqrt((l-n+(s-l+n)/3)/f),c=e.accel[0].rms_acceleration,d=e.cruise[0].rms_acceleration,m=e.decel[0].rms_acceleration}var f=Math.max(n,l,s,r);o=Math.sqrt((Math.pow(c,2)*n+Math.pow(d,2)*(l-n)+Math.pow(m,2)*(s-l)+Math.pow(p,2)*(r-s))/f),y.peakVel=parseFloat(i),y.peakAcc=parseFloat(a),y.rmsVel=parseFloat(t),y.rmsAcc=parseFloat(o),oe()};s.find("#profileButtons").on("click",".profileButton",function(i){i.preventDefault();var t=e(this).attr("id");void 0!=t&&l.activeProfileIndex!=parseInt(t.slice(3))&&(l.activeProfileIndex=parseInt(t.slice(3)),l.smoothness=w.find("#smoothnessInputContainer").find(".smoothnessDropDown").find(".smoothnessDDMenu")[0].selectedIndex,s.find("#profileButtons").find(".profileButton.btn-primary").removeClass("btn-primary").addClass("btn-default"),e(this).addClass("btn-primary").removeClass("btn-default"),l.velocityJerk=void 0,R(),me())});var q=function(){y.peakVel="",y.peakAcc="",y.rmsVel="",y.rmsAcc="",oe()},R=function(){void 0==b.movedistance&&(b.movedistance=x.movedistance=isNaN(parseFloat(l.moveDistance))?l.moveDistance:parseFloat(l.moveDistance)),void 0==b.movedtime&&(b.movedtime=x.movedtime=isNaN(parseFloat(l.moveTime))?l.moveTime:parseFloat(l.moveTime)),void 0==b.dweltime&&(b.dweltime=x.dweltime=isNaN(parseFloat(l.dwellTime))?l.dwellTime:parseFloat(l.dwellTime)),void 0===l.velocityJerk?(ee(),b.velocityJerk=x.velocityJerk=isNaN(parseFloat(l.indexType))?l.indexType:parseFloat(l.indexType)):b.velocityJerk=x.velocityJerk=isNaN(parseFloat(l.velocityJerk))?l.velocityJerk:parseFloat(l.velocityJerk),void 0==b.smoothness&&(b.smoothness=x.smoothness=isNaN(parseFloat(l.smoothness))?l.smoothness:parseFloat(l.smoothness))},Y=function(){var e=!0;return w.find(".input-entries .form-group").removeClass("has-error"),!isNaN(b.movedistance)&&b.movedistance>0||(w.find("#moveDistanceInputContainer").addClass("has-error"),e=!1),!isNaN(b.movedtime)&&b.movedtime>0||(w.find("#moveTimeInputContainer").addClass("has-error"),e=!1),!isNaN(b.dweltime)&&b.dweltime>=0||(w.find("#dwellTimeInputContainer").addClass("has-error"),e=!1),!isNaN(b.velocityJerk)&&b.velocityJerk>=0&&b.velocityJerk<=100||(w.find("#indexTypeInputContainer").addClass("has-error"),e=!1),l.assessmentMode&&w.find(".input-entries .form-group").removeClass("has-error"),e},z=function(){g.time=0,g.position=0,g.velocity=0},H=function(e){C=0;for(var i=D.vel.data[0][0],t=1;t<D.vel.data.length;t++)C+=(D.vel.data[t][0]-i)*D.vel.data[t][1],i=D.vel.data[t][0];d=-(1/0);var a=JSON.parse(JSON.stringify(b));a.velocityJerk=100,a.velocityJerk=0;for(var o=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(a,g).segmentData,t=0;t<Object.keys(o).length;t++)for(var n=0;n<o[Object.keys(o)[t]].length;n++)d<o[Object.keys(o)[t]][n].velocity_initial&&(d=o[Object.keys(o)[t]][n].velocity_initial);m=2*d,e.dwell&&(T=e.dwell[0].time_initial)},W=function(i,t,a){e('<div id="tooltip">'+a+"</div>").css({top:t+5,left:i+15}).appendTo(r).fadeIn(200)},X=function(e){var i=null,t=null,a=null;s.find("#velGraph").unbind("plothover").bind("plothover",function(o,n,l){if(i=l,l){var s=r.offset();if(a!=l.seriesIndex)switch(l.seriesIndex){case 1:W(l.pageX-s.left,l.pageY-s.top,"Drag to change Velocity Jerk"),a=l.seriesIndex;break;case 2:W(l.pageX-s.left,l.pageY-s.top,"Drag to change Dwell Time"),a=l.seriesIndex;break;case 3:W(l.pageX-s.left,l.pageY-s.top,"Drag to change Move Time"),a=l.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var c;if(n.y>=m)c=100;else if(n.y<=d)c=0;else{var p=parseFloat(b.movedtime)-C/n.y;c=p*n.y*100/C}x.velocityJerk=parseFloat(Math.ceil(c)),b.velocityJerk=parseFloat(Math.ceil(c));break;case 2:var f;f=n.x<T?0:parseFloat(n.x-T),x.dweltime=parseFloat(f),b.dweltime=parseFloat(f);break;case 3:var u;u=n.x<=0?1:n.x,x.movedtime=parseFloat(u),b.movedtime=parseFloat(u)}me(!0)}}),s.find("#velGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>=d&&i.datapoint[1]<=m&&(t=i);break;case 2:i.datapoint[0]>=T&&(t=i);break;case 3:i.datapoint[0]>0&&(t=i)}}),s.find("#velGraph").unbind("mouseup").bind("mouseup",function(){t&&l.onGraphDrag&&l.onGraphDrag(),t=null}),s.find("#velGraph").unbind("mouseleave").bind("mouseleave",function(){s.find("#velGraph").mouseup()})},Q=function(e){var i=null,t=null,a=null;s.find("#posGraph").unbind("plothover").bind("plothover",function(o,n,l){if(i=l,l){var s=r.offset();if(a!=l.seriesIndex)switch(l.seriesIndex){case 1:W(l.pageX-s.left,l.pageY-s.top,"Drag to change Move Distance"),a=l.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var c;c=n.y<=0?1:parseFloat(n.y),x.movedistance=parseFloat(c),b.movedistance=parseFloat(c)}me(!0)}}),s.find("#posGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i)}}),s.find("#posGraph").unbind("mouseup").bind("mouseup",function(){t&&l.onGraphDrag&&l.onGraphDrag(),t=null}),s.find("#posGraph").unbind("mouseleave").bind("mouseleave",function(){s.find("#posGraph").mouseup()})},K=function(e){var i=null,t=null,a=null;s.find("#aioGraph").unbind("plothover").bind("plothover",function(o,n,s){if(i=s,s){var c=r.offset();if(a!=s.seriesIndex)switch(s.seriesIndex){case 1:W(s.pageX-c.left,s.pageY-c.top,"Drag to change Move Distance"),a=s.seriesIndex;break;case 3:W(s.pageX-c.left,s.pageY-c.top,"Drag to change Velocity Jerk"),a=s.seriesIndex;break;case 4:W(s.pageX-c.left,s.pageY-c.top,"Drag to change Dwell Time"),a=s.seriesIndex;break;case 5:W(s.pageX-c.left,s.pageY-c.top,"Drag to change Move Time"),a=s.seriesIndex}}else r.find("#tooltip").remove(),a=null;if(t&&t.seriesIndex){e.getData();switch(t.seriesIndex){case 1:var p;p=n.y<=0?1:parseFloat(n.y),x.movedistance=parseFloat(p),b.movedistance=parseFloat(p);break;case 3:var f,u=l.showGraphs.indexOf(COSMATT.MotionProfile.configuration.Graphs.position)>-1?n.y2:n.y1;if(u>=m)f=100;else if(d>=u)f=0;else{var v=parseFloat(b.movedtime)-C/u;f=v*u*100/C}x.velocityJerk=parseFloat(Math.ceil(f)),b.velocityJerk=parseFloat(Math.ceil(f));break;case 4:var h;h=n.x<T?0:parseFloat(n.x-T),x.dweltime=parseFloat(h),b.dweltime=parseFloat(h);break;case 5:var g;g=n.x<=0?1:n.x,x.movedtime=parseFloat(g),b.movedtime=parseFloat(g)}me(!0)}}),s.find("#aioGraph").unbind("mousedown").bind("mousedown",function(){if(r.find("#tooltip").remove(),i)switch(i.seriesIndex){case 1:i.datapoint[1]>0&&(t=i);break;case 3:i.datapoint[1]>=d&&i.datapoint[1]<=m&&(t=i);break;case 4:i.datapoint[0]>=T&&(t=i);break;case 5:i.datapoint[0]>0&&(t=i)}}),s.find("#aioGraph").unbind("mouseup").bind("mouseup",function(){t&&l.onGraphDrag&&l.onGraphDrag(),t=null}),s.find("#aioGraph").unbind("mouseleave").bind("mouseleave",function(){s.find("#aioGraph").mouseup()})},Z=function(){if(p){var i=s.find("#posGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(f){var i=s.find("#velGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(u){var i=s.find("#accGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(h){var i=s.find("#jerkGraph .yaxisLabel"),t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}if(v)for(var a=s.find("#aioGraph .axisLabels"),o=0;o<a.length;o++){var i=e(a[o]);if(!i.hasClass("xaxisLabel")){var t=Math.ceil(i.width()>i.height()?i.width():i.height());t%2!=0&&t++,i.width(t),i.css("top","-3%")}}},$=function(e){c=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(b,g);var i=c.elementsData,t=i.length;if(t>0){var a=100;P();for(var o=0;t>o;o++)E(i[o],a)}U(c.segmentData),j(c.segmentData),H(c.segmentData),e?S(c.segmentData):B(c.segmentData)},ee=function(){switch(l.activeProfileIndex=parseInt(l.activeProfileIndex),l.activeProfileIndex){case 1:l.indexType=50;break;case 2:l.indexType=100;break;case 3:l.indexType=0}},ie=function(){me()},te=function(){l.assessmentMode&&l.userResponseNotifier&&l.userResponseNotifier({movedistance:{value:b.movedistance,unit:l.moveDistanceUnit},movedtime:{value:b.movedtime,unit:l.moveTimeUnit},dweltime:{value:b.dweltime,unit:l.dwellTimeUnit},velocityJerk:{value:b.velocityJerk}})},ae=function(){var e=r.find("#inputControls");e.append('<form class="row form-horizontal"><div class="col-6 col-xs-6 input-entries inputs"><div class="row form-group" id="moveDistanceInputContainer"><label for="moveDistance" class="col-4 col-xs-4 control-label">Move Distance</label><div class="col-8 col-xs-8 comboMoveDistance"></div></div><div class="row form-group" id="moveTimeInputContainer"><label for="moveTime" class="col-4 col-xs-4 control-label">Move Time</label><div class="col-8 col-xs-8 comboMoveTime"></div></div><div class="row form-group" id="dwellTimeInputContainer"><label for="dwellTime" class="col-4 col-xs-4 control-label">Dwell Time</label><div class="col-8 col-xs-8 comboDwellTime"></div></div><div class="row form-group" id="indexTypeInputContainer"><label for="indexType" class="col-4 col-xs-4 control-label">Velocity Jerk</label><div class="col-8 col-xs-8 comboIndexType"></div></div><div class="row form-group" id="smoothnessInputContainer"><label for="smoothness" class="col-4 col-xs-4 control-label">Smoothness</label><div class="col-8 col-xs-8 smoothnessDropDown"></div></div></div><div class="col-6 col-xs-6 inputs"><div class="row form-group" id="peakVelocityInputContainer"><label for="peakVelocity" class="col-4 col-xs-4 control-label">Peak Velocity</label><div class="col-8 col-xs-8 comboPeakVelocity"></div></div><div class="row form-group" id="rmsVelocityInputContainer"><label for="rmsVelocity" class="col-4 col-xs-4 control-label">RMS Velocity</label><div class="col-8 col-xs-8 comboRmsVelocity"></div></div><div class="row form-group" id="peakAccInputContainer"><label for="peakAcc" class="col-4 col-xs-4 control-label">Peak Acceleration</label><div class="col-8 col-xs-8 comboPeakAcc"></div></div><div class="row form-group" id="rmsAccInputContainer"><label for="rmsAcc" class="col-4 col-xs-4 control-label">RMS Acceleration</label><div class="col-8 col-xs-8 comboRmsAcc"></div></div></div></form>'),e.find("#moveDistanceInputContainer").find(".comboMoveDistance").unitsComboBox({unitType:"ANGULARDISTANCE",unit:l.moveDistanceUnit,roundOfNumber:"2",value:l.moveDistance,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?l.moveDistanceUnit=this.unit:"textbox"==this.type&&(x.movedistance=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.movedistance=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),
ie()),te())}}),e.find("#moveTimeInputContainer").find(".comboMoveTime").unitsComboBox({unitType:"TIME",unit:l.moveTimeUnit,roundOfNumber:"2",value:l.moveTime,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?l.moveTimeUnit=this.unit:"textbox"==this.type&&(x.movedtime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.movedtime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),ie()),te())}}),e.find("#dwellTimeInputContainer").find(".comboDwellTime").unitsComboBox({unitType:"TIME",unit:l.dwellTimeUnit,roundOfNumber:"2",value:l.dwellTime,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?l.dwellTimeUnit=this.unit:"textbox"==this.type&&(x.dweltime=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.dweltime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),ie()),te())}}),e.find("#indexTypeInputContainer").find(".comboIndexType").unitsComboBox({unitType:"PERCENTAGE",unit:"0",roundOfNumber:"2",value:l.indexType,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&("textbox"==this.type&&(x.velocityJerk=isNaN(parseFloat(this.value))?"":parseFloat(this.value),b.velocityJerk=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?0:parseFloat(this.SIValue),ie()),te())}});var i=e.find("#smoothnessInputContainer").find(".smoothnessDropDown");i.append('<select class="form-control smoothnessDDMenu"><option value=automatic>Automatic<option value=standard>Standard<option value=maximum>Maximum</select>'),l.smoothness&&i.find("select option").eq(l.smoothness).attr("selected",!0),i.find("select").on("change",function(e){x.smoothness=e.target.selectedIndex,b.smoothness=e.target.selectedIndex,me(!0)}),e.find("#peakVelocityInputContainer").find(".comboPeakVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:l.peakVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(l.peakVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),e.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").unitsComboBox({unitType:"ANGULARVELOCITY",unit:l.rmsVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(l.rmsVelocityUnit=parseInt(this.unit.split("_")[1])-1)}}),e.find("#peakAccInputContainer").find(".comboPeakAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:l.peakAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(l.peakAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),e.find("#rmsAccInputContainer").find(".comboRmsAcc").unitsComboBox({unitType:"ANGULARACCELERATION",unit:l.rmsAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"55%",comboBox:"45%"},callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(l.rmsAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}})},oe=function(){var e;e=w.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox"),b.movedistance?e.setTextBoxValue(e.getValueInSelectedUnit(b.movedistance)):e.setTextBoxValue(b.movedistance),e=w.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox"),b.movedtime?e.setTextBoxValue(e.getValueInSelectedUnit(b.movedtime)):e.setTextBoxValue(b.movedtime),e=w.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox"),b.dweltime?e.setTextBoxValue(e.getValueInSelectedUnit(b.dweltime)):e.setTextBoxValue(b.dweltime),e=w.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox"),b.velocityJerk?e.setTextBoxValue(e.getValueInSelectedUnit(b.velocityJerk)):e.setTextBoxValue(b.velocityJerk),e=w.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox"),y.peakVel?e.setTextBoxValue(e.getValueInSelectedUnit(y.peakVel)):e.setTextBoxValue(y.peakVel),e=w.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox"),y.rmsVel?e.setTextBoxValue(e.getValueInSelectedUnit(y.rmsVel)):e.setTextBoxValue(y.rmsVel),e=w.find("#peakAccInputContainer").find(".comboPeakAcc").data("unitsComboBox"),y.peakAcc?e.setTextBoxValue(e.getValueInSelectedUnit(y.peakAcc)):e.setTextBoxValue(y.peakAcc),e=w.find("#rmsAccInputContainer").find(".comboRmsAcc").data("unitsComboBox"),y.rmsAcc?e.setTextBoxValue(e.getValueInSelectedUnit(y.rmsAcc)):e.setTextBoxValue(y.rmsAcc)},ne=function(e){var i=r.find("#profileButtons");i.find("#btn"+l.activeProfileIndex).addClass("btn-primary").removeClass("btn-default"),l.showProfiles&&le(l.showProfiles,i),l.showGraphDragHandles&&se(l.showGraphDragHandles),l.readOnlyInputs&&re(l.readOnlyInputs),l.hideInputs&&ce(l.hideInputs)},le=function(e,i){if(i.find("button").hide(),"boolean"==typeof e)e===!0?i.show():i.hide();else if(e.length>0)for(var t in e)t=e[t],i.find("#btn"+t.slice(t.length-1)).show()},se=function(e){"boolean"==typeof e&&(e===!0?l.showGraphDragHandles=[COSMATT.MotionProfile.configuration.GraphHandles.position,COSMATT.MotionProfile.configuration.GraphHandles.peakVelocity,COSMATT.MotionProfile.configuration.GraphHandles.moveTime,COSMATT.MotionProfile.configuration.GraphHandles.dwellTime]:l.showGraphDragHandles=[])},re=function(e){if("boolean"==typeof e&&(e=e===!0?[COSMATT.MotionProfile.configuration.DataFields.moveDistance,COSMATT.MotionProfile.configuration.DataFields.moveTime,COSMATT.MotionProfile.configuration.DataFields.dwellTime,COSMATT.MotionProfile.configuration.DataFields.velocityFormFactor,COSMATT.MotionProfile.configuration.DataFields.peakVelocity,COSMATT.MotionProfile.configuration.DataFields.rmsVelocity,COSMATT.MotionProfile.configuration.DataFields.peakAccelaration,COSMATT.MotionProfile.configuration.DataFields.rmsAccelaration]:[]),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],w.find("#"+i+"InputContainer").find(".combo"+i.charAt(0).toUpperCase()+i.slice(1)).data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}))},ce=function(e){if("boolean"==typeof e&&(e===!0?w.hide():w.show()),e.length>0)for(var i in e)e.hasOwnProperty(i)&&(i=e[i],w.find("#"+i+"InputContainer").hide())},de=function(){var i=e("body"),t='<div id="editConfigBtnContainer"><button class="btn btn-default editConfigBtn pull-right btn-lg" type="button" href="configWindow.html" data-target="#theModal" data-toggle="modal">Edit Configurations</div>';i.append(t)};ae(),ne(r),l.showEditConfigButton&&de(),l.showCheckAnswerButton,R(),z();var me=function(e,i){Y()?i?setTimeout(function(e){$()},0):$(e):(P(),q(),setTimeout(function(e){J(),N(!1)},0)),Z(),s.on("resize",function(){Z()})};return me(!1,!0),{ref:this,updateInputs:t,markAnswers:a}}}(jQuery);